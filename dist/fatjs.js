!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.fatjs=e():t.fatjs=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=86)}([function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(90),i=r(91),o=r(92);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,r)}function c(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=a(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=a(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function h(t,e){var r=e.length<0?0:0|p(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(t).length;default:if(n)return q(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,r);case"utf8":case"utf-8":return x(this,e,r);case"ascii":return I(this,e,r);case"latin1":case"binary":return T(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function _(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function b(t,e,r,n){return H(q(e,t.length-r),t,r,n)}function w(t,e,r,n){return H(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function E(t,e,r,n){return w(t,e,r,n)}function k(t,e,r,n){return H(V(e),t,r,n)}function A(t,e,r,n){return H(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function x(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=C));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return c(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return l(e),e<=0?a(t,e):void 0!==r?"string"==typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?x(this,0,t):y.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(n,i),l=t.slice(e,r),f=0;f<a;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return E(this,t,e,r);case"base64":return k(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function R(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=M(t[o]);return i}function O(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function D(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function L(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(t,e,r,n,o){return o||L(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function B(t,e,r,n,o){return o||L(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||P(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||P(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||j(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||j(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);j(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);j(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return B(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return B(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=u.isBuffer(t)?t:q(new u(t,n).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function M(t){return t<16?"0"+t.toString(16):t.toString(16)}function q(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(10))},function(t,e,r){!function(t){"use strict";var e=function(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;e++)r[e]=t[e];return r},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=e(),a=e([1]),u=e([56129,1]),c=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(t,e,r,n){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r,t[e+4]=n>>24&255,t[e+5]=n>>16&255,t[e+6]=n>>8&255,t[e+7]=255&n}function y(t,e,r,n,i){var o,s=0;for(o=0;o<i;o++)s|=t[e+o]^r[n+o];return(1&s-1>>>8)-1}function g(t,e,r,n){return y(t,e,r,n,16)}function m(t,e,r,n){return y(t,e,r,n,32)}function v(t,e,r,n){!function(t,e,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,f=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,h=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,p=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,d=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,y=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,b=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=o,E=s,k=a,A=u,S=c,x=l,C=f,I=h,T=p,R=d,O=y,P=g,j=m,N=v,D=_,L=b,F=0;F<20;F+=2)w^=(i=(j^=(i=(T^=(i=(S^=(i=w+j|0)<<7|i>>>25)+w|0)<<9|i>>>23)+S|0)<<13|i>>>19)+T|0)<<18|i>>>14,x^=(i=(E^=(i=(N^=(i=(R^=(i=x+E|0)<<7|i>>>25)+x|0)<<9|i>>>23)+R|0)<<13|i>>>19)+N|0)<<18|i>>>14,O^=(i=(C^=(i=(k^=(i=(D^=(i=O+C|0)<<7|i>>>25)+O|0)<<9|i>>>23)+D|0)<<13|i>>>19)+k|0)<<18|i>>>14,L^=(i=(P^=(i=(I^=(i=(A^=(i=L+P|0)<<7|i>>>25)+L|0)<<9|i>>>23)+A|0)<<13|i>>>19)+I|0)<<18|i>>>14,w^=(i=(A^=(i=(k^=(i=(E^=(i=w+A|0)<<7|i>>>25)+w|0)<<9|i>>>23)+E|0)<<13|i>>>19)+k|0)<<18|i>>>14,x^=(i=(S^=(i=(I^=(i=(C^=(i=x+S|0)<<7|i>>>25)+x|0)<<9|i>>>23)+C|0)<<13|i>>>19)+I|0)<<18|i>>>14,O^=(i=(R^=(i=(T^=(i=(P^=(i=O+R|0)<<7|i>>>25)+O|0)<<9|i>>>23)+P|0)<<13|i>>>19)+T|0)<<18|i>>>14,L^=(i=(D^=(i=(N^=(i=(j^=(i=L+D|0)<<7|i>>>25)+L|0)<<9|i>>>23)+j|0)<<13|i>>>19)+N|0)<<18|i>>>14;w=w+o|0,E=E+s|0,k=k+a|0,A=A+u|0,S=S+c|0,x=x+l|0,C=C+f|0,I=I+h|0,T=T+p|0,R=R+d|0,O=O+y|0,P=P+g|0,j=j+m|0,N=N+v|0,D=D+_|0,L=L+b|0,t[0]=w>>>0&255,t[1]=w>>>8&255,t[2]=w>>>16&255,t[3]=w>>>24&255,t[4]=E>>>0&255,t[5]=E>>>8&255,t[6]=E>>>16&255,t[7]=E>>>24&255,t[8]=k>>>0&255,t[9]=k>>>8&255,t[10]=k>>>16&255,t[11]=k>>>24&255,t[12]=A>>>0&255,t[13]=A>>>8&255,t[14]=A>>>16&255,t[15]=A>>>24&255,t[16]=S>>>0&255,t[17]=S>>>8&255,t[18]=S>>>16&255,t[19]=S>>>24&255,t[20]=x>>>0&255,t[21]=x>>>8&255,t[22]=x>>>16&255,t[23]=x>>>24&255,t[24]=C>>>0&255,t[25]=C>>>8&255,t[26]=C>>>16&255,t[27]=C>>>24&255,t[28]=I>>>0&255,t[29]=I>>>8&255,t[30]=I>>>16&255,t[31]=I>>>24&255,t[32]=T>>>0&255,t[33]=T>>>8&255,t[34]=T>>>16&255,t[35]=T>>>24&255,t[36]=R>>>0&255,t[37]=R>>>8&255,t[38]=R>>>16&255,t[39]=R>>>24&255,t[40]=O>>>0&255,t[41]=O>>>8&255,t[42]=O>>>16&255,t[43]=O>>>24&255,t[44]=P>>>0&255,t[45]=P>>>8&255,t[46]=P>>>16&255,t[47]=P>>>24&255,t[48]=j>>>0&255,t[49]=j>>>8&255,t[50]=j>>>16&255,t[51]=j>>>24&255,t[52]=N>>>0&255,t[53]=N>>>8&255,t[54]=N>>>16&255,t[55]=N>>>24&255,t[56]=D>>>0&255,t[57]=D>>>8&255,t[58]=D>>>16&255,t[59]=D>>>24&255,t[60]=L>>>0&255,t[61]=L>>>8&255,t[62]=L>>>16&255,t[63]=L>>>24&255}(t,e,r,n)}function _(t,e,r,n){!function(t,e,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,u=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,f=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,h=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,p=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,d=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,y=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,b=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=0;w<20;w+=2)o^=(i=(m^=(i=(p^=(i=(c^=(i=o+m|0)<<7|i>>>25)+o|0)<<9|i>>>23)+c|0)<<13|i>>>19)+p|0)<<18|i>>>14,l^=(i=(s^=(i=(v^=(i=(d^=(i=l+s|0)<<7|i>>>25)+l|0)<<9|i>>>23)+d|0)<<13|i>>>19)+v|0)<<18|i>>>14,y^=(i=(f^=(i=(a^=(i=(_^=(i=y+f|0)<<7|i>>>25)+y|0)<<9|i>>>23)+_|0)<<13|i>>>19)+a|0)<<18|i>>>14,b^=(i=(g^=(i=(h^=(i=(u^=(i=b+g|0)<<7|i>>>25)+b|0)<<9|i>>>23)+u|0)<<13|i>>>19)+h|0)<<18|i>>>14,o^=(i=(u^=(i=(a^=(i=(s^=(i=o+u|0)<<7|i>>>25)+o|0)<<9|i>>>23)+s|0)<<13|i>>>19)+a|0)<<18|i>>>14,l^=(i=(c^=(i=(h^=(i=(f^=(i=l+c|0)<<7|i>>>25)+l|0)<<9|i>>>23)+f|0)<<13|i>>>19)+h|0)<<18|i>>>14,y^=(i=(d^=(i=(p^=(i=(g^=(i=y+d|0)<<7|i>>>25)+y|0)<<9|i>>>23)+g|0)<<13|i>>>19)+p|0)<<18|i>>>14,b^=(i=(_^=(i=(v^=(i=(m^=(i=b+_|0)<<7|i>>>25)+b|0)<<9|i>>>23)+m|0)<<13|i>>>19)+v|0)<<18|i>>>14;t[0]=o>>>0&255,t[1]=o>>>8&255,t[2]=o>>>16&255,t[3]=o>>>24&255,t[4]=l>>>0&255,t[5]=l>>>8&255,t[6]=l>>>16&255,t[7]=l>>>24&255,t[8]=y>>>0&255,t[9]=y>>>8&255,t[10]=y>>>16&255,t[11]=y>>>24&255,t[12]=b>>>0&255,t[13]=b>>>8&255,t[14]=b>>>16&255,t[15]=b>>>24&255,t[16]=f>>>0&255,t[17]=f>>>8&255,t[18]=f>>>16&255,t[19]=f>>>24&255,t[20]=h>>>0&255,t[21]=h>>>8&255,t[22]=h>>>16&255,t[23]=h>>>24&255,t[24]=p>>>0&255,t[25]=p>>>8&255,t[26]=p>>>16&255,t[27]=p>>>24&255,t[28]=d>>>0&255,t[29]=d>>>8&255,t[30]=d>>>16&255,t[31]=d>>>24&255}(t,e,r,n)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(t,e,r,n,i,o,s){var a,u,c=new Uint8Array(16),l=new Uint8Array(64);for(u=0;u<16;u++)c[u]=0;for(u=0;u<8;u++)c[u]=o[u];for(;i>=64;){for(v(l,c,s,b),u=0;u<64;u++)t[e+u]=r[n+u]^l[u];for(a=1,u=8;u<16;u++)a=a+(255&c[u])|0,c[u]=255&a,a>>>=8;i-=64,e+=64,n+=64}if(i>0)for(v(l,c,s,b),u=0;u<i;u++)t[e+u]=r[n+u]^l[u];return 0}function E(t,e,r,n,i){var o,s,a=new Uint8Array(16),u=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(v(u,a,i,b),s=0;s<64;s++)t[e+s]=u[s];for(o=1,s=8;s<16;s++)o=o+(255&a[s])|0,a[s]=255&o,o>>>=8;r-=64,e+=64}if(r>0)for(v(u,a,i,b),s=0;s<r;s++)t[e+s]=u[s];return 0}function k(t,e,r,n,i){var o=new Uint8Array(32);_(o,n,i,b);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return E(t,e,r,s,o)}function A(t,e,r,n,i,o,s){var a=new Uint8Array(32);_(a,o,s,b);for(var u=new Uint8Array(8),c=0;c<8;c++)u[c]=o[c+16];return w(t,e,r,n,i,u,a)}var S=function(t){var e,r,n,i,o,s,a,u;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,r=255&t[2]|(255&t[3])<<8,this.r[1]=8191&(e>>>13|r<<3),n=255&t[4]|(255&t[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&t[6]|(255&t[7])<<8,this.r[3]=8191&(n>>>7|i<<9),o=255&t[8]|(255&t[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&t[10]|(255&t[11])<<8,this.r[6]=8191&(o>>>14|s<<2),a=255&t[12]|(255&t[13])<<8,this.r[7]=8065&(s>>>11|a<<5),u=255&t[14]|(255&t[15])<<8,this.r[8]=8191&(a>>>8|u<<8),this.r[9]=u>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};function x(t,e,r,n,i,o){var s=new S(o);return s.update(r,n,i),s.finish(t,e),0}function C(t,e,r,n,i,o){var s=new Uint8Array(16);return x(s,0,r,n,i,o),g(t,e,s,0)}function I(t,e,r,n,i){var o;if(r<32)return-1;for(A(t,0,e,0,r,n,i),x(t,16,t,32,r-32,t),o=0;o<16;o++)t[o]=0;return 0}function T(t,e,r,n,i){var o,s=new Uint8Array(32);if(r<32)return-1;if(k(s,0,32,n,i),0!==C(e,16,e,32,r-32,s))return-1;for(A(t,0,e,0,r,n,i),o=0;o<32;o++)t[o]=0;return 0}function R(t,e){var r;for(r=0;r<16;r++)t[r]=0|e[r]}function O(t){var e,r,n=1;for(e=0;e<16;e++)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-65536*n;t[0]+=n-1+37*(n-1)}function P(t,e,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}function j(t,r){var n,i,o,s=e(),a=e();for(n=0;n<16;n++)a[n]=r[n];for(O(a),O(a),O(a),i=0;i<2;i++){for(s[0]=a[0]-65517,n=1;n<15;n++)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,P(a,s,1-o)}for(n=0;n<16;n++)t[2*n]=255&a[n],t[2*n+1]=a[n]>>8}function N(t,e){var r=new Uint8Array(32),n=new Uint8Array(32);return j(r,t),j(n,e),m(r,0,n,0)}function D(t){var e=new Uint8Array(32);return j(e,t),1&e[0]}function L(t,e){var r;for(r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function F(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n]}function B(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n]}function U(t,e,r){var n,i,o=0,s=0,a=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,y=0,g=0,m=0,v=0,_=0,b=0,w=0,E=0,k=0,A=0,S=0,x=0,C=0,I=0,T=0,R=0,O=0,P=0,j=0,N=0,D=0,L=r[0],F=r[1],B=r[2],U=r[3],M=r[4],q=r[5],V=r[6],H=r[7],z=r[8],Y=r[9],$=r[10],K=r[11],W=r[12],X=r[13],G=r[14],J=r[15];o+=(n=e[0])*L,s+=n*F,a+=n*B,u+=n*U,c+=n*M,l+=n*q,f+=n*V,h+=n*H,p+=n*z,d+=n*Y,y+=n*$,g+=n*K,m+=n*W,v+=n*X,_+=n*G,b+=n*J,s+=(n=e[1])*L,a+=n*F,u+=n*B,c+=n*U,l+=n*M,f+=n*q,h+=n*V,p+=n*H,d+=n*z,y+=n*Y,g+=n*$,m+=n*K,v+=n*W,_+=n*X,b+=n*G,w+=n*J,a+=(n=e[2])*L,u+=n*F,c+=n*B,l+=n*U,f+=n*M,h+=n*q,p+=n*V,d+=n*H,y+=n*z,g+=n*Y,m+=n*$,v+=n*K,_+=n*W,b+=n*X,w+=n*G,E+=n*J,u+=(n=e[3])*L,c+=n*F,l+=n*B,f+=n*U,h+=n*M,p+=n*q,d+=n*V,y+=n*H,g+=n*z,m+=n*Y,v+=n*$,_+=n*K,b+=n*W,w+=n*X,E+=n*G,k+=n*J,c+=(n=e[4])*L,l+=n*F,f+=n*B,h+=n*U,p+=n*M,d+=n*q,y+=n*V,g+=n*H,m+=n*z,v+=n*Y,_+=n*$,b+=n*K,w+=n*W,E+=n*X,k+=n*G,A+=n*J,l+=(n=e[5])*L,f+=n*F,h+=n*B,p+=n*U,d+=n*M,y+=n*q,g+=n*V,m+=n*H,v+=n*z,_+=n*Y,b+=n*$,w+=n*K,E+=n*W,k+=n*X,A+=n*G,S+=n*J,f+=(n=e[6])*L,h+=n*F,p+=n*B,d+=n*U,y+=n*M,g+=n*q,m+=n*V,v+=n*H,_+=n*z,b+=n*Y,w+=n*$,E+=n*K,k+=n*W,A+=n*X,S+=n*G,x+=n*J,h+=(n=e[7])*L,p+=n*F,d+=n*B,y+=n*U,g+=n*M,m+=n*q,v+=n*V,_+=n*H,b+=n*z,w+=n*Y,E+=n*$,k+=n*K,A+=n*W,S+=n*X,x+=n*G,C+=n*J,p+=(n=e[8])*L,d+=n*F,y+=n*B,g+=n*U,m+=n*M,v+=n*q,_+=n*V,b+=n*H,w+=n*z,E+=n*Y,k+=n*$,A+=n*K,S+=n*W,x+=n*X,C+=n*G,I+=n*J,d+=(n=e[9])*L,y+=n*F,g+=n*B,m+=n*U,v+=n*M,_+=n*q,b+=n*V,w+=n*H,E+=n*z,k+=n*Y,A+=n*$,S+=n*K,x+=n*W,C+=n*X,I+=n*G,T+=n*J,y+=(n=e[10])*L,g+=n*F,m+=n*B,v+=n*U,_+=n*M,b+=n*q,w+=n*V,E+=n*H,k+=n*z,A+=n*Y,S+=n*$,x+=n*K,C+=n*W,I+=n*X,T+=n*G,R+=n*J,g+=(n=e[11])*L,m+=n*F,v+=n*B,_+=n*U,b+=n*M,w+=n*q,E+=n*V,k+=n*H,A+=n*z,S+=n*Y,x+=n*$,C+=n*K,I+=n*W,T+=n*X,R+=n*G,O+=n*J,m+=(n=e[12])*L,v+=n*F,_+=n*B,b+=n*U,w+=n*M,E+=n*q,k+=n*V,A+=n*H,S+=n*z,x+=n*Y,C+=n*$,I+=n*K,T+=n*W,R+=n*X,O+=n*G,P+=n*J,v+=(n=e[13])*L,_+=n*F,b+=n*B,w+=n*U,E+=n*M,k+=n*q,A+=n*V,S+=n*H,x+=n*z,C+=n*Y,I+=n*$,T+=n*K,R+=n*W,O+=n*X,P+=n*G,j+=n*J,_+=(n=e[14])*L,b+=n*F,w+=n*B,E+=n*U,k+=n*M,A+=n*q,S+=n*V,x+=n*H,C+=n*z,I+=n*Y,T+=n*$,R+=n*K,O+=n*W,P+=n*X,j+=n*G,N+=n*J,b+=(n=e[15])*L,s+=38*(E+=n*B),a+=38*(k+=n*U),u+=38*(A+=n*M),c+=38*(S+=n*q),l+=38*(x+=n*V),f+=38*(C+=n*H),h+=38*(I+=n*z),p+=38*(T+=n*Y),d+=38*(R+=n*$),y+=38*(O+=n*K),g+=38*(P+=n*W),m+=38*(j+=n*X),v+=38*(N+=n*G),_+=38*(D+=n*J),o=(n=(o+=38*(w+=n*F))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),_=(n=_+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=u,t[4]=c,t[5]=l,t[6]=f,t[7]=h,t[8]=p,t[9]=d,t[10]=y,t[11]=g,t[12]=m,t[13]=v,t[14]=_,t[15]=b}function M(t,e){U(t,e,e)}function q(t,r){var n,i=e();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)M(i,i),2!==n&&4!==n&&U(i,i,r);for(n=0;n<16;n++)t[n]=i[n]}function V(t,r,n){var i,o,s=new Uint8Array(32),a=new Float64Array(80),c=e(),l=e(),f=e(),h=e(),p=e(),d=e();for(o=0;o<31;o++)s[o]=r[o];for(s[31]=127&r[31]|64,s[0]&=248,L(a,n),o=0;o<16;o++)l[o]=a[o],h[o]=c[o]=f[o]=0;for(c[0]=h[0]=1,o=254;o>=0;--o)P(c,l,i=s[o>>>3]>>>(7&o)&1),P(f,h,i),F(p,c,f),B(c,c,f),F(f,l,h),B(l,l,h),M(h,p),M(d,c),U(c,f,c),U(f,l,p),F(p,c,f),B(c,c,f),M(l,c),B(f,h,d),U(c,f,u),F(c,c,h),U(f,f,c),U(c,h,d),U(h,l,a),M(l,p),P(c,l,i),P(f,h,i);for(o=0;o<16;o++)a[o+16]=c[o],a[o+32]=f[o],a[o+48]=l[o],a[o+64]=h[o];var y=a.subarray(32),g=a.subarray(16);return q(y,y),U(g,g,y),j(t,g),0}function H(t,e){return V(t,e,o)}function z(t,e){return n(e,32),H(t,e)}function Y(t,e,r){var n=new Uint8Array(32);return V(n,r,e),_(t,i,n,b)}S.prototype.blocks=function(t,e,r){for(var n,i,o,s,a,u,c,l,f,h,p,d,y,g,m,v,_,b,w,E=this.fin?0:2048,k=this.h[0],A=this.h[1],S=this.h[2],x=this.h[3],C=this.h[4],I=this.h[5],T=this.h[6],R=this.h[7],O=this.h[8],P=this.h[9],j=this.r[0],N=this.r[1],D=this.r[2],L=this.r[3],F=this.r[4],B=this.r[5],U=this.r[6],M=this.r[7],q=this.r[8],V=this.r[9];r>=16;)h=f=0,h+=(k+=8191&(n=255&t[e+0]|(255&t[e+1])<<8))*j,h+=(A+=8191&(n>>>13|(i=255&t[e+2]|(255&t[e+3])<<8)<<3))*(5*V),h+=(S+=8191&(i>>>10|(o=255&t[e+4]|(255&t[e+5])<<8)<<6))*(5*q),h+=(x+=8191&(o>>>7|(s=255&t[e+6]|(255&t[e+7])<<8)<<9))*(5*M),f=(h+=(C+=8191&(s>>>4|(a=255&t[e+8]|(255&t[e+9])<<8)<<12))*(5*U))>>>13,h&=8191,h+=(I+=a>>>1&8191)*(5*B),h+=(T+=8191&(a>>>14|(u=255&t[e+10]|(255&t[e+11])<<8)<<2))*(5*F),h+=(R+=8191&(u>>>11|(c=255&t[e+12]|(255&t[e+13])<<8)<<5))*(5*L),h+=(O+=8191&(c>>>8|(l=255&t[e+14]|(255&t[e+15])<<8)<<8))*(5*D),p=f+=(h+=(P+=l>>>5|E)*(5*N))>>>13,p+=k*N,p+=A*j,p+=S*(5*V),p+=x*(5*q),f=(p+=C*(5*M))>>>13,p&=8191,p+=I*(5*U),p+=T*(5*B),p+=R*(5*F),p+=O*(5*L),f+=(p+=P*(5*D))>>>13,p&=8191,d=f,d+=k*D,d+=A*N,d+=S*j,d+=x*(5*V),f=(d+=C*(5*q))>>>13,d&=8191,d+=I*(5*M),d+=T*(5*U),d+=R*(5*B),d+=O*(5*F),y=f+=(d+=P*(5*L))>>>13,y+=k*L,y+=A*D,y+=S*N,y+=x*j,f=(y+=C*(5*V))>>>13,y&=8191,y+=I*(5*q),y+=T*(5*M),y+=R*(5*U),y+=O*(5*B),g=f+=(y+=P*(5*F))>>>13,g+=k*F,g+=A*L,g+=S*D,g+=x*N,f=(g+=C*j)>>>13,g&=8191,g+=I*(5*V),g+=T*(5*q),g+=R*(5*M),g+=O*(5*U),m=f+=(g+=P*(5*B))>>>13,m+=k*B,m+=A*F,m+=S*L,m+=x*D,f=(m+=C*N)>>>13,m&=8191,m+=I*j,m+=T*(5*V),m+=R*(5*q),m+=O*(5*M),v=f+=(m+=P*(5*U))>>>13,v+=k*U,v+=A*B,v+=S*F,v+=x*L,f=(v+=C*D)>>>13,v&=8191,v+=I*N,v+=T*j,v+=R*(5*V),v+=O*(5*q),_=f+=(v+=P*(5*M))>>>13,_+=k*M,_+=A*U,_+=S*B,_+=x*F,f=(_+=C*L)>>>13,_&=8191,_+=I*D,_+=T*N,_+=R*j,_+=O*(5*V),b=f+=(_+=P*(5*q))>>>13,b+=k*q,b+=A*M,b+=S*U,b+=x*B,f=(b+=C*F)>>>13,b&=8191,b+=I*L,b+=T*D,b+=R*N,b+=O*j,w=f+=(b+=P*(5*V))>>>13,w+=k*V,w+=A*q,w+=S*M,w+=x*U,f=(w+=C*B)>>>13,w&=8191,w+=I*F,w+=T*L,w+=R*D,w+=O*N,k=h=8191&(f=(f=((f+=(w+=P*j)>>>13)<<2)+f|0)+(h&=8191)|0),A=p+=f>>>=13,S=d&=8191,x=y&=8191,C=g&=8191,I=m&=8191,T=v&=8191,R=_&=8191,O=b&=8191,P=w&=8191,e+=16,r-=16;this.h[0]=k,this.h[1]=A,this.h[2]=S,this.h[3]=x,this.h[4]=C,this.h[5]=I,this.h[6]=T,this.h[7]=R,this.h[8]=O,this.h[9]=P},S.prototype.finish=function(t,e){var r,n,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this.h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this.h[o]=this.h[o]&n|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},S.prototype.update=function(t,e,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=t[e+n];if(r-=i,e+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(t,e,i),e+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=t[e+n];this.leftover+=r}};var $=I,K=T;var W=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function X(t,e,r,n){for(var i,o,s,a,u,c,l,f,h,p,d,y,g,m,v,_,b,w,E,k,A,S,x,C,I,T,R=new Int32Array(16),O=new Int32Array(16),P=t[0],j=t[1],N=t[2],D=t[3],L=t[4],F=t[5],B=t[6],U=t[7],M=e[0],q=e[1],V=e[2],H=e[3],z=e[4],Y=e[5],$=e[6],K=e[7],X=0;n>=128;){for(E=0;E<16;E++)k=8*E+X,R[E]=r[k+0]<<24|r[k+1]<<16|r[k+2]<<8|r[k+3],O[E]=r[k+4]<<24|r[k+5]<<16|r[k+6]<<8|r[k+7];for(E=0;E<80;E++)if(i=P,o=j,s=N,a=D,u=L,c=F,l=B,U,h=M,p=q,d=V,y=H,g=z,m=Y,v=$,K,x=65535&(S=K),C=S>>>16,I=65535&(A=U),T=A>>>16,x+=65535&(S=(z>>>14|L<<18)^(z>>>18|L<<14)^(L>>>9|z<<23)),C+=S>>>16,I+=65535&(A=(L>>>14|z<<18)^(L>>>18|z<<14)^(z>>>9|L<<23)),T+=A>>>16,x+=65535&(S=z&Y^~z&$),C+=S>>>16,I+=65535&(A=L&F^~L&B),T+=A>>>16,A=W[2*E],x+=65535&(S=W[2*E+1]),C+=S>>>16,I+=65535&A,T+=A>>>16,A=R[E%16],C+=(S=O[E%16])>>>16,I+=65535&A,T+=A>>>16,I+=(C+=(x+=65535&S)>>>16)>>>16,x=65535&(S=w=65535&x|C<<16),C=S>>>16,I=65535&(A=b=65535&I|(T+=I>>>16)<<16),T=A>>>16,x+=65535&(S=(M>>>28|P<<4)^(P>>>2|M<<30)^(P>>>7|M<<25)),C+=S>>>16,I+=65535&(A=(P>>>28|M<<4)^(M>>>2|P<<30)^(M>>>7|P<<25)),T+=A>>>16,C+=(S=M&q^M&V^q&V)>>>16,I+=65535&(A=P&j^P&N^j&N),T+=A>>>16,f=65535&(I+=(C+=(x+=65535&S)>>>16)>>>16)|(T+=I>>>16)<<16,_=65535&x|C<<16,x=65535&(S=y),C=S>>>16,I=65535&(A=a),T=A>>>16,C+=(S=w)>>>16,I+=65535&(A=b),T+=A>>>16,j=i,N=o,D=s,L=a=65535&(I+=(C+=(x+=65535&S)>>>16)>>>16)|(T+=I>>>16)<<16,F=u,B=c,U=l,P=f,q=h,V=p,H=d,z=y=65535&x|C<<16,Y=g,$=m,K=v,M=_,E%16==15)for(k=0;k<16;k++)A=R[k],x=65535&(S=O[k]),C=S>>>16,I=65535&A,T=A>>>16,A=R[(k+9)%16],x+=65535&(S=O[(k+9)%16]),C+=S>>>16,I+=65535&A,T+=A>>>16,b=R[(k+1)%16],x+=65535&(S=((w=O[(k+1)%16])>>>1|b<<31)^(w>>>8|b<<24)^(w>>>7|b<<25)),C+=S>>>16,I+=65535&(A=(b>>>1|w<<31)^(b>>>8|w<<24)^b>>>7),T+=A>>>16,b=R[(k+14)%16],C+=(S=((w=O[(k+14)%16])>>>19|b<<13)^(b>>>29|w<<3)^(w>>>6|b<<26))>>>16,I+=65535&(A=(b>>>19|w<<13)^(w>>>29|b<<3)^b>>>6),T+=A>>>16,T+=(I+=(C+=(x+=65535&S)>>>16)>>>16)>>>16,R[k]=65535&I|T<<16,O[k]=65535&x|C<<16;x=65535&(S=M),C=S>>>16,I=65535&(A=P),T=A>>>16,A=t[0],C+=(S=e[0])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(C+=(x+=65535&S)>>>16)>>>16)>>>16,t[0]=P=65535&I|T<<16,e[0]=M=65535&x|C<<16,x=65535&(S=q),C=S>>>16,I=65535&(A=j),T=A>>>16,A=t[1],C+=(S=e[1])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(C+=(x+=65535&S)>>>16)>>>16)>>>16,t[1]=j=65535&I|T<<16,e[1]=q=65535&x|C<<16,x=65535&(S=V),C=S>>>16,I=65535&(A=N),T=A>>>16,A=t[2],C+=(S=e[2])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(C+=(x+=65535&S)>>>16)>>>16)>>>16,t[2]=N=65535&I|T<<16,e[2]=V=65535&x|C<<16,x=65535&(S=H),C=S>>>16,I=65535&(A=D),T=A>>>16,A=t[3],C+=(S=e[3])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(C+=(x+=65535&S)>>>16)>>>16)>>>16,t[3]=D=65535&I|T<<16,e[3]=H=65535&x|C<<16,x=65535&(S=z),C=S>>>16,I=65535&(A=L),T=A>>>16,A=t[4],C+=(S=e[4])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(C+=(x+=65535&S)>>>16)>>>16)>>>16,t[4]=L=65535&I|T<<16,e[4]=z=65535&x|C<<16,x=65535&(S=Y),C=S>>>16,I=65535&(A=F),T=A>>>16,A=t[5],C+=(S=e[5])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(C+=(x+=65535&S)>>>16)>>>16)>>>16,t[5]=F=65535&I|T<<16,e[5]=Y=65535&x|C<<16,x=65535&(S=$),C=S>>>16,I=65535&(A=B),T=A>>>16,A=t[6],C+=(S=e[6])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(C+=(x+=65535&S)>>>16)>>>16)>>>16,t[6]=B=65535&I|T<<16,e[6]=$=65535&x|C<<16,x=65535&(S=K),C=S>>>16,I=65535&(A=U),T=A>>>16,A=t[7],C+=(S=e[7])>>>16,I+=65535&A,T+=A>>>16,T+=(I+=(C+=(x+=65535&S)>>>16)>>>16)>>>16,t[7]=U=65535&I|T<<16,e[7]=K=65535&x|C<<16,X+=128,n-=128}return n}function G(t,e,r){var n,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,X(i,o,e,r),r%=128,n=0;n<r;n++)s[n]=e[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,d(s,r-8,a/536870912|0,a<<3),X(i,o,s,r),n=0;n<8;n++)d(t,8*n,i[n],o[n]);return 0}function J(t,r){var n=e(),i=e(),o=e(),s=e(),a=e(),u=e(),c=e(),f=e(),h=e();B(n,t[1],t[0]),B(h,r[1],r[0]),U(n,n,h),F(i,t[0],t[1]),F(h,r[0],r[1]),U(i,i,h),U(o,t[3],r[3]),U(o,o,l),U(s,t[2],r[2]),F(s,s,s),B(a,i,n),B(u,s,o),F(c,s,o),F(f,i,n),U(t[0],a,u),U(t[1],f,c),U(t[2],c,u),U(t[3],a,f)}function Z(t,e,r){var n;for(n=0;n<4;n++)P(t[n],e[n],r)}function Q(t,r){var n=e(),i=e(),o=e();q(o,r[2]),U(n,r[0],o),U(i,r[1],o),j(t,i),t[31]^=D(n)<<7}function tt(t,e,r){var n,i;for(R(t[0],s),R(t[1],a),R(t[2],a),R(t[3],s),i=255;i>=0;--i)Z(t,e,n=r[i/8|0]>>(7&i)&1),J(e,t),J(t,t),Z(t,e,n)}function et(t,r){var n=[e(),e(),e(),e()];R(n[0],f),R(n[1],h),R(n[2],a),U(n[3],f,h),tt(t,n,r)}function rt(t,r,i){var o,s=new Uint8Array(64),a=[e(),e(),e(),e()];for(i||n(r,32),G(s,r,32),s[0]&=248,s[31]&=127,s[31]|=64,et(a,s),Q(t,a),o=0;o<32;o++)r[o+32]=t[o];return 0}var nt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function it(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*nt[i-(n-32)],r=e[i]+128>>8,e[i]-=256*r;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;i++)e[i]+=r-(e[31]>>4)*nt[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;i++)e[i]-=r*nt[i];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function ot(t){var e,r=new Float64Array(64);for(e=0;e<64;e++)r[e]=t[e];for(e=0;e<64;e++)t[e]=0;it(t,r)}function st(t,r,n,i){var o,s,a=new Uint8Array(64),u=new Uint8Array(64),c=new Uint8Array(64),l=new Float64Array(64),f=[e(),e(),e(),e()];G(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var h=n+64;for(o=0;o<n;o++)t[64+o]=r[o];for(o=0;o<32;o++)t[32+o]=a[32+o];for(G(c,t.subarray(32),n+32),ot(c),et(f,c),Q(t,f),o=32;o<64;o++)t[o]=i[o];for(G(u,t,n+64),ot(u),o=0;o<64;o++)l[o]=0;for(o=0;o<32;o++)l[o]=c[o];for(o=0;o<32;o++)for(s=0;s<32;s++)l[o+s]+=u[o]*a[s];return it(t.subarray(32),l),h}function at(t,r){var n=e(),i=e(),o=e(),u=e(),l=e(),f=e(),h=e();return R(t[2],a),L(t[1],r),M(o,t[1]),U(u,o,c),B(o,o,t[2]),F(u,t[2],u),M(l,u),M(f,l),U(h,f,l),U(n,h,o),U(n,n,u),function(t,r){var n,i=e();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)M(i,i),1!==n&&U(i,i,r);for(n=0;n<16;n++)t[n]=i[n]}(n,n),U(n,n,o),U(n,n,u),U(n,n,u),U(t[0],n,u),M(i,t[0]),U(i,i,u),N(i,o)&&U(t[0],t[0],p),M(i,t[0]),U(i,i,u),N(i,o)?-1:(D(t[0])===r[31]>>7&&B(t[0],s,t[0]),U(t[3],t[0],t[1]),0)}function ut(t,r,n,i){var o,s=new Uint8Array(32),a=new Uint8Array(64),u=[e(),e(),e(),e()],c=[e(),e(),e(),e()];if(-1,n<64)return-1;if(at(c,i))return-1;for(o=0;o<n;o++)t[o]=r[o];for(o=0;o<32;o++)t[o+32]=i[o];if(G(a,t,n),ot(a),tt(u,c,a),et(c,r.subarray(32)),J(u,c),Q(s,u),n-=64,m(r,0,s,0)){for(o=0;o<n;o++)t[o]=0;return-1}for(o=0;o<n;o++)t[o]=r[o+64];return n}var ct=32,lt=24,ft=32,ht=32,pt=lt;function dt(t,e){if(t.length!==ct)throw new Error("bad key size");if(e.length!==lt)throw new Error("bad nonce size")}function yt(){for(var t=0;t<arguments.length;t++)if(!(arguments[t]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function gt(t){for(var e=0;e<t.length;e++)t[e]=0}t.lowlevel={crypto_core_hsalsa20:_,crypto_stream_xor:A,crypto_stream:k,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:E,crypto_onetimeauth:x,crypto_onetimeauth_verify:C,crypto_verify_16:g,crypto_verify_32:m,crypto_secretbox:I,crypto_secretbox_open:T,crypto_scalarmult:V,crypto_scalarmult_base:H,crypto_box_beforenm:Y,crypto_box_afternm:$,crypto_box:function(t,e,r,n,i,o){var s=new Uint8Array(32);return Y(s,i,o),$(t,e,r,n,s)},crypto_box_open:function(t,e,r,n,i,o){var s=new Uint8Array(32);return Y(s,i,o),K(t,e,r,n,s)},crypto_box_keypair:z,crypto_hash:G,crypto_sign:st,crypto_sign_keypair:rt,crypto_sign_open:ut,crypto_secretbox_KEYBYTES:ct,crypto_secretbox_NONCEBYTES:lt,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:ft,crypto_box_SECRETKEYBYTES:ht,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:pt,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},t.randomBytes=function(t){var e=new Uint8Array(t);return n(e,t),e},t.secretbox=function(t,e,r){yt(t,e,r),dt(r,e);for(var n=new Uint8Array(32+t.length),i=new Uint8Array(n.length),o=0;o<t.length;o++)n[o+32]=t[o];return I(i,n,n.length,e,r),i.subarray(16)},t.secretbox.open=function(t,e,r){yt(t,e,r),dt(r,e);for(var n=new Uint8Array(16+t.length),i=new Uint8Array(n.length),o=0;o<t.length;o++)n[o+16]=t[o];return n.length<32?null:0!==T(i,n,n.length,e,r)?null:i.subarray(32)},t.secretbox.keyLength=ct,t.secretbox.nonceLength=lt,t.secretbox.overheadLength=16,t.scalarMult=function(t,e){if(yt(t,e),32!==t.length)throw new Error("bad n size");if(32!==e.length)throw new Error("bad p size");var r=new Uint8Array(32);return V(r,t,e),r},t.scalarMult.base=function(t){if(yt(t),32!==t.length)throw new Error("bad n size");var e=new Uint8Array(32);return H(e,t),e},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,r,n,i){var o=t.box.before(n,i);return t.secretbox(e,r,o)},t.box.before=function(t,e){yt(t,e),function(t,e){if(t.length!==ft)throw new Error("bad public key size");if(e.length!==ht)throw new Error("bad secret key size")}(t,e);var r=new Uint8Array(32);return Y(r,t,e),r},t.box.after=t.secretbox,t.box.open=function(e,r,n,i){var o=t.box.before(n,i);return t.secretbox.open(e,r,o)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var t=new Uint8Array(ft),e=new Uint8Array(ht);return z(t,e),{publicKey:t,secretKey:e}},t.box.keyPair.fromSecretKey=function(t){if(yt(t),t.length!==ht)throw new Error("bad secret key size");var e=new Uint8Array(ft);return H(e,t),{publicKey:e,secretKey:new Uint8Array(t)}},t.box.publicKeyLength=ft,t.box.secretKeyLength=ht,t.box.sharedKeyLength=32,t.box.nonceLength=pt,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(t,e){if(yt(t,e),64!==e.length)throw new Error("bad secret key size");var r=new Uint8Array(64+t.length);return st(r,t,t.length,e),r},t.sign.open=function(t,e){if(yt(t,e),32!==e.length)throw new Error("bad public key size");var r=new Uint8Array(t.length),n=ut(r,t,t.length,e);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o];return i},t.sign.detached=function(e,r){for(var n=t.sign(e,r),i=new Uint8Array(64),o=0;o<i.length;o++)i[o]=n[o];return i},t.sign.detached.verify=function(t,e,r){if(yt(t,e,r),64!==e.length)throw new Error("bad signature size");if(32!==r.length)throw new Error("bad public key size");var n,i=new Uint8Array(64+t.length),o=new Uint8Array(64+t.length);for(n=0;n<64;n++)i[n]=e[n];for(n=0;n<t.length;n++)i[n+64]=t[n];return ut(o,i,i.length,r)>=0},t.sign.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(64);return rt(t,e),{publicKey:t,secretKey:e}},t.sign.keyPair.fromSecretKey=function(t){if(yt(t),64!==t.length)throw new Error("bad secret key size");for(var e=new Uint8Array(32),r=0;r<e.length;r++)e[r]=t[32+r];return{publicKey:e,secretKey:new Uint8Array(t)}},t.sign.keyPair.fromSeed=function(t){if(yt(t),32!==t.length)throw new Error("bad seed size");for(var e=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=t[n];return rt(e,r,!0),{publicKey:e,secretKey:r}},t.sign.publicKeyLength=32,t.sign.secretKeyLength=64,t.sign.seedLength=32,t.sign.signatureLength=64,t.hash=function(t){yt(t);var e=new Uint8Array(64);return G(e,t,t.length),e},t.hash.hashLength=64,t.verify=function(t,e){return yt(t,e),0!==t.length&&0!==e.length&&(t.length===e.length&&0===y(t,0,e,0,t.length))},t.setPRNG=function(t){n=t},function(){var e="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(e&&e.getRandomValues){t.setPRNG((function(t,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)e.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)t[n]=i[n];gt(i)}))}else(e=r(127))&&e.randomBytes&&t.setPRNG((function(t,r){var n,i=e.randomBytes(r);for(n=0;n<r;n++)t[n]=i[n];gt(i)}))}()}(t.exports?t.exports:self.nacl=self.nacl||{})},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e,r){"use strict";(function(e){t.exports={FAT0:"FAT-0",FAT1:"FAT-1",RCD_TYPE_1:e.from("01","hex"),COINBASE_ADDRESS_PUBLIC:"FA1zT4aFpEvcnPqPCigB3fvGu4Q4mTXY22iiuV69DqE1pNhdF2MC",COINBASE_ADDRESS_PRIVATE:"Fs1KWJrpLdfucvmYwN2nWrwepLn8ercpMbzXshd1g8zyhKXLVLWj"}}).call(this,r(0).Buffer)},function(t,e,r){(function(e){const n=r(16),i=r(1),{RCD_TYPE_1:o,secretToPublicKey:s,sha256d:a}=r(7),{FACTOID_PUBLIC_PREFIX:u,FACTOID_PRIVATE_PREFIX:c,ENTRYCREDIT_PUBLIC_PREFIX:l,ENTRYCREDIT_PRIVATE_PREFIX:f,VALID_PREFIXES:h,PUBLIC_ADDRESS_VALID_PREFIXES:p,PRIVATE_ADDRESS_VALID_PREFIXES:d,EC_ADDRESS_VALID_PREFIXES:y,FCT_ADDRESS_VALID_PREFIXES:g}=r(18);function m(t){try{if(!h.has(t.slice(0,2)))return!1;const r=e.from(n.decode(t));return 38===r.length&&!!a(r.slice(0,34)).slice(0,4).equals(r.slice(34,38))}catch(t){return!1}}function v(t){return m(t)&&"FA"===t.substring(0,2)}function _(t){return k(t,u,!0)}function b(t){return k(t,c)}function w(t){return k(t,l)}function E(t){return k(t,f)}function k(t,r,i){const o=e.from(t,"hex");if(32!==o.length)throw new Error(`Key ${o} is not 32 bytes long.`);const s=e.concat([r,i?A(o):o]),u=a(s).slice(0,4);return n.encode(e.concat([s,u]))}function A(t){return a(e.concat([o,t]))}t.exports={isValidAddress:m,addressToKey:function(t){if(!m(t))throw new Error(`Invalid address ${t}.`);if(t.startsWith("FA"))throw new Error("A public Factoid address does not hold a public key but a RCD hash. Use addressToRcdHash function instead.");return e.from(n.decode(t).slice(2,34))},addressToRcdHash:function(t){if(!v(t))throw new Error(`Address ${t} is not a valid public Factoid address`);return e.from(n.decode(t).slice(2,34))},isValidPublicAddress:function(t){return m(t)&&p.has(t.substring(0,2))},isValidPrivateAddress:function(t){return m(t)&&d.has(t.substring(0,2))},isValidEcAddress:function(t){return m(t)&&y.has(t.substring(0,2))},isValidPublicEcAddress:function(t){return m(t)&&"EC"===t.substring(0,2)},isValidPrivateEcAddress:function(t){return m(t)&&"Es"===t.substring(0,2)},isValidFctAddress:function(t){return m(t)&&g.has(t.substring(0,2))},isValidPublicFctAddress:v,isValidPrivateFctAddress:function(t){return m(t)&&"Fs"===t.substring(0,2)},getPublicAddress:function(t){if(!m(t))throw new Error(`Invalid address ${t}.`);if("s"!==t[1])return t;const e=n.decode(t).slice(2,34),r=s(e);return"F"===t[0]?_(r):w(r)},keyToPublicFctAddress:_,rcdHashToPublicFctAddress:function(t){return k(t,u)},seedToPrivateFctAddress:b,keyToPublicEcAddress:w,seedToPrivateEcAddress:E,generateRandomFctAddress:function(){const t=i.randomBytes(32);return{public:_(i.sign.keyPair.fromSeed(t).publicKey),private:b(t)}},generateRandomEcAddress:function(){const t=i.randomBytes(32);return{public:w(i.sign.keyPair.fromSeed(t).publicKey),private:E(t)}}}}).call(this,r(0).Buffer)},function(t,e,r){(function(e){const n=r(1).sign,i=r(73),o=r(31),s=r(75),a=e.from("01","hex"),u=i.fromString("8000000000000000",!0,16);t.exports={RCD_TYPE_1:a,sha256:function(t){return e.from(o().update(t).digest())},sha512:function(t){return e.from(s().update(t).digest())},sha256d:function(t){return e.from(o().update(o().update(t).digest()).digest())},toHex:function(t){return e.isBuffer(t)?t.toString("hex"):t},encodeVarInt:function(t){const r=[];0!==t&&"0"!==t||r.push(0);let n=i.fromValue(t,!0),o=!1;n.and(u).isZero()||(r.push(129),o=!0);for(let t=0;t<9;++t){let e=n.shiftRightUnsigned(56).toNumber();(e||o)&&(o=!0,8!==t?e|=128:e&=127,r.push(e)),n=n.shiftLeft(7)}return e.from(r)},isIterable:function(t){return null!=t&&"function"==typeof t[Symbol.iterator]},flatMap:(t,e)=>[].concat(...t.map(e)),secretToPublicKey:function(t){const r=n.keyPair.fromSeed(t);return e.from(r.publicKey)}}}).call(this,r(0).Buffer)},function(t,e,r){"use strict";var n=r(62),i=r(109),o=Object.prototype.toString;function s(t){return"[object Array]"===o.call(t)}function a(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===o.call(t)}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),s(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function t(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=t(e[n],r):e[n]=r}for(var n=0,i=arguments.length;n<i;n++)c(arguments[n],r);return e},deepMerge:function t(){var e={};function r(r,n){"object"==typeof e[n]&&"object"==typeof r?e[n]=t(e[n],r):e[n]="object"==typeof r?t({},r):r}for(var n=0,i=arguments.length;n<i;n++)c(arguments[n],r);return e},extend:function(t,e,r){return c(e,(function(e,i){t[i]=r&&"function"==typeof e?n(e,r):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,r){var n;!function(i){"use strict";var o,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,u=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",f=1e14,h=14,p=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],y=1e7,g=1e9;function m(t){var e=0|t;return t>0||t===e?e:e-1}function v(t){for(var e,r,n=1,i=t.length,o=t[0]+"";n<i;){for(e=t[n++]+"",r=h-e.length;r--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function _(t,e){var r,n,i=t.c,o=e.c,s=t.s,a=e.s,u=t.e,c=e.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=u==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=i.length)<(c=o.length)?u:c,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return u==c?0:u>c^r?1:-1}function b(t,e,r,n){if(t<e||t>r||t!==u(t))throw Error(c+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function w(t){var e=t.c.length-1;return m(t.e/h)==e&&t.c[e]%2!=0}function E(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function k(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(++e>(n=t.length)){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}(o=function t(e){var r,n,i,o,A,S,x,C,I,T=V.prototype={constructor:V,toString:null,valueOf:null},R=new V(1),O=20,P=4,j=-7,N=21,D=-1e7,L=1e7,F=!1,B=1,U=0,M={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},q="0123456789abcdefghijklmnopqrstuvwxyz";function V(t,e){var r,o,a,c,f,d,y,g,m=this;if(!(m instanceof V))return new V(t,e);if(null==e){if(t&&!0===t._isBigNumber)return m.s=t.s,void(!t.c||t.e>L?m.c=m.e=null:t.e<D?m.c=[m.e=0]:(m.e=t.e,m.c=t.c.slice()));if((d="number"==typeof t)&&0*t==0){if(m.s=1/t<0?(t=-t,-1):1,t===~~t){for(c=0,f=t;f>=10;f/=10,c++);return void(c>L?m.c=m.e=null:(m.e=c,m.c=[t]))}g=String(t)}else{if(!s.test(g=String(t)))return i(m,g,d);m.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(c=g.indexOf("."))>-1&&(g=g.replace(".","")),(f=g.search(/e/i))>0?(c<0&&(c=f),c+=+g.slice(f+1),g=g.substring(0,f)):c<0&&(c=g.length)}else{if(b(e,2,q.length,"Base"),10==e)return $(m=new V(t),O+m.e+1,P);if(g=String(t),d="number"==typeof t){if(0*t!=0)return i(m,g,d,e);if(m.s=1/t<0?(g=g.slice(1),-1):1,V.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(l+t)}else m.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(r=q.slice(0,e),c=f=0,y=g.length;f<y;f++)if(r.indexOf(o=g.charAt(f))<0){if("."==o){if(f>c){c=y;continue}}else if(!a&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){a=!0,f=-1,c=0;continue}return i(m,String(t),d,e)}d=!1,(c=(g=n(g,e,10,m.s)).indexOf("."))>-1?g=g.replace(".",""):c=g.length}for(f=0;48===g.charCodeAt(f);f++);for(y=g.length;48===g.charCodeAt(--y););if(g=g.slice(f,++y)){if(y-=f,d&&V.DEBUG&&y>15&&(t>p||t!==u(t)))throw Error(l+m.s*t);if((c=c-f-1)>L)m.c=m.e=null;else if(c<D)m.c=[m.e=0];else{if(m.e=c,m.c=[],f=(c+1)%h,c<0&&(f+=h),f<y){for(f&&m.c.push(+g.slice(0,f)),y-=h;f<y;)m.c.push(+g.slice(f,f+=h));f=h-(g=g.slice(f)).length}else f-=y;for(;f--;g+="0");m.c.push(+g)}}else m.c=[m.e=0]}function H(t,e,r,n){var i,o,s,a,u;if(null==r?r=P:b(r,0,8),!t.c)return t.toString();if(i=t.c[0],s=t.e,null==e)u=v(t.c),u=1==n||2==n&&(s<=j||s>=N)?E(u,s):k(u,s,"0");else if(o=(t=$(new V(t),e,r)).e,a=(u=v(t.c)).length,1==n||2==n&&(e<=o||o<=j)){for(;a<e;u+="0",a++);u=E(u,o)}else if(e-=s,u=k(u,o,"0"),o+1>a){if(--e>0)for(u+=".";e--;u+="0");}else if((e+=o-a)>0)for(o+1==a&&(u+=".");e--;u+="0");return t.s<0&&i?"-"+u:u}function z(t,e){for(var r,n=1,i=new V(t[0]);n<t.length;n++){if(!(r=new V(t[n])).s){i=r;break}e.call(i,r)&&(i=r)}return i}function Y(t,e,r){for(var n=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,n++);return(r=n+r*h-1)>L?t.c=t.e=null:r<D?t.c=[t.e=0]:(t.e=r,t.c=e),t}function $(t,e,r,n){var i,o,s,c,l,p,y,g=t.c,m=d;if(g){t:{for(i=1,c=g[0];c>=10;c/=10,i++);if((o=e-i)<0)o+=h,s=e,y=(l=g[p=0])/m[i-s-1]%10|0;else if((p=a((o+1)/h))>=g.length){if(!n)break t;for(;g.length<=p;g.push(0));l=y=0,i=1,s=(o%=h)-h+1}else{for(l=c=g[p],i=1;c>=10;c/=10,i++);y=(s=(o%=h)-h+i)<0?0:l/m[i-s-1]%10|0}if(n=n||e<0||null!=g[p+1]||(s<0?l:l%m[i-s-1]),n=r<4?(y||n)&&(0==r||r==(t.s<0?3:2)):y>5||5==y&&(4==r||n||6==r&&(o>0?s>0?l/m[i-s]:0:g[p-1])%10&1||r==(t.s<0?8:7)),e<1||!g[0])return g.length=0,n?(e-=t.e+1,g[0]=m[(h-e%h)%h],t.e=-e||0):g[0]=t.e=0,t;if(0==o?(g.length=p,c=1,p--):(g.length=p+1,c=m[h-o],g[p]=s>0?u(l/m[i-s]%m[s])*c:0),n)for(;;){if(0==p){for(o=1,s=g[0];s>=10;s/=10,o++);for(s=g[0]+=c,c=1;s>=10;s/=10,c++);o!=c&&(t.e++,g[0]==f&&(g[0]=1));break}if(g[p]+=c,g[p]!=f)break;g[p--]=0,c=1}for(o=g.length;0===g[--o];g.pop());}t.e>L?t.c=t.e=null:t.e<D&&(t.c=[t.e=0])}return t}function K(t){var e,r=t.e;return null===r?t.toString():(e=v(t.c),e=r<=j||r>=N?E(e,r):k(e,r,"0"),t.s<0?"-"+e:e)}return V.clone=t,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(c+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(b(r=t[e],0,g,e),O=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(b(r=t[e],0,8,e),P=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(b(r[0],-g,0,e),b(r[1],0,g,e),j=r[0],N=r[1]):(b(r,-g,g,e),j=-(N=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if((r=t[e])&&r.pop)b(r[0],-g,-1,e),b(r[1],1,g,e),D=r[0],L=r[1];else{if(b(r,-g,g,e),!r)throw Error(c+e+" cannot be zero: "+r);D=-(L=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if((r=t[e])!==!!r)throw Error(c+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw F=!r,Error(c+"crypto unavailable");F=r}else F=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(b(r=t[e],0,9,e),B=r),t.hasOwnProperty(e="POW_PRECISION")&&(b(r=t[e],0,g,e),U=r),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(r=t[e]))throw Error(c+e+" not an object: "+r);M=r}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(c+e+" invalid: "+r);q=r}}return{DECIMAL_PLACES:O,ROUNDING_MODE:P,EXPONENTIAL_AT:[j,N],RANGE:[D,L],CRYPTO:F,MODULO_MODE:B,POW_PRECISION:U,FORMAT:M,ALPHABET:q}},V.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!V.DEBUG)return!0;var e,r,n=t.c,i=t.e,o=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&i>=-g&&i<=g&&i===u(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break t}if((e=(i+1)%h)<1&&(e+=h),String(n[0]).length==e){for(e=0;e<n.length;e++)if((r=n[e])<0||r>=f||r!==u(r))break t;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(c+"Invalid BigNumber: "+t)},V.maximum=V.max=function(){return z(arguments,T.lt)},V.minimum=V.min=function(){return z(arguments,T.gt)},V.random=(o=9007199254740992*Math.random()&2097151?function(){return u(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,r,n,i,s,l=0,f=[],p=new V(R);if(null==t?t=O:b(t,0,g),i=a(t/h),F)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(i*=2));l<i;)(s=131072*e[l]+(e[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),e[l]=r[0],e[l+1]=r[1]):(f.push(s%1e14),l+=2);l=i/2}else{if(!crypto.randomBytes)throw F=!1,Error(c+"crypto unavailable");for(e=crypto.randomBytes(i*=7);l<i;)(s=281474976710656*(31&e[l])+1099511627776*e[l+1]+4294967296*e[l+2]+16777216*e[l+3]+(e[l+4]<<16)+(e[l+5]<<8)+e[l+6])>=9e15?crypto.randomBytes(7).copy(e,l):(f.push(s%1e14),l+=7);l=i/7}if(!F)for(;l<i;)(s=o())<9e15&&(f[l++]=s%1e14);for(i=f[--l],t%=h,i&&t&&(s=d[h-t],f[l]=u(i/s)*s);0===f[l];f.pop(),l--);if(l<0)f=[n=0];else{for(n=-1;0===f[0];f.splice(0,1),n-=h);for(l=1,s=f[0];s>=10;s/=10,l++);l<h&&(n-=h-l)}return p.e=n,p.c=f,p}),V.sum=function(){for(var t=1,e=arguments,r=new V(e[0]);t<e.length;)r=r.plus(e[t++]);return r},n=function(){function t(t,e,r,n){for(var i,o,s=[0],a=0,u=t.length;a<u;){for(o=s.length;o--;s[o]*=e);for(s[0]+=n.indexOf(t.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(e,n,i,o,s){var a,u,c,l,f,h,p,d,y=e.indexOf("."),g=O,m=P;for(y>=0&&(l=U,U=0,e=e.replace(".",""),h=(d=new V(n)).pow(e.length-y),U=l,d.c=t(k(v(h.c),h.e,"0"),10,i,"0123456789"),d.e=d.c.length),c=l=(p=t(e,n,i,s?(a=q,"0123456789"):(a="0123456789",q))).length;0==p[--l];p.pop());if(!p[0])return a.charAt(0);if(y<0?--c:(h.c=p,h.e=c,h.s=o,p=(h=r(h,d,g,m,i)).c,f=h.r,c=h.e),y=p[u=c+g+1],l=i/2,f=f||u<0||null!=p[u+1],f=m<4?(null!=y||f)&&(0==m||m==(h.s<0?3:2)):y>l||y==l&&(4==m||f||6==m&&1&p[u-1]||m==(h.s<0?8:7)),u<1||!p[0])e=f?k(a.charAt(1),-g,a.charAt(0)):a.charAt(0);else{if(p.length=u,f)for(--i;++p[--u]>i;)p[u]=0,u||(++c,p=[1].concat(p));for(l=p.length;!p[--l];);for(y=0,e="";y<=l;e+=a.charAt(p[y++]));e=k(e,c,a.charAt(0))}return e}}(),r=function(){function t(t,e,r){var n,i,o,s,a=0,u=t.length,c=e%y,l=e/y|0;for(t=t.slice();u--;)a=((i=c*(o=t[u]%y)+(n=l*o+(s=t[u]/y|0)*c)%y*y+a)/r|0)+(n/y|0)+l*s,t[u]=i%r;return a&&(t=[a].concat(t)),t}function e(t,e,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,i,o,s,a){var c,l,p,d,y,g,v,_,b,w,E,k,A,S,x,C,I,T=n.s==i.s?1:-1,R=n.c,O=i.c;if(!(R&&R[0]&&O&&O[0]))return new V(n.s&&i.s&&(R?!O||R[0]!=O[0]:O)?R&&0==R[0]||!O?0*T:T/0:NaN);for(b=(_=new V(T)).c=[],T=o+(l=n.e-i.e)+1,a||(a=f,l=m(n.e/h)-m(i.e/h),T=T/h|0),p=0;O[p]==(R[p]||0);p++);if(O[p]>(R[p]||0)&&l--,T<0)b.push(1),d=!0;else{for(S=R.length,C=O.length,p=0,T+=2,(y=u(a/(O[0]+1)))>1&&(O=t(O,y,a),R=t(R,y,a),C=O.length,S=R.length),A=C,E=(w=R.slice(0,C)).length;E<C;w[E++]=0);I=O.slice(),I=[0].concat(I),x=O[0],O[1]>=a/2&&x++;do{if(y=0,(c=e(O,w,C,E))<0){if(k=w[0],C!=E&&(k=k*a+(w[1]||0)),(y=u(k/x))>1)for(y>=a&&(y=a-1),v=(g=t(O,y,a)).length,E=w.length;1==e(g,w,v,E);)y--,r(g,C<v?I:O,v,a),v=g.length,c=1;else 0==y&&(c=y=1),v=(g=O.slice()).length;if(v<E&&(g=[0].concat(g)),r(w,g,E,a),E=w.length,-1==c)for(;e(O,w,C,E)<1;)y++,r(w,C<E?I:O,E,a),E=w.length}else 0===c&&(y++,w=[0]);b[p++]=y,w[0]?w[E++]=R[A]||0:(w=[R[A]],E=1)}while((A++<S||null!=w[0])&&T--);d=null!=w[0],b[0]||b.splice(0,1)}if(a==f){for(p=1,T=b[0];T>=10;T/=10,p++);$(_,o+(_.e=p+l*h-1)+1,s,d)}else _.e=l,_.r=+d;return _}}(),A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,S=/^([^.]+)\.$/,x=/^\.([^.]+)$/,C=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(t,e,r,n){var i,o=r?e:e.replace(I,"");if(C.test(o))t.s=isNaN(o)?null:o<0?-1:1;else{if(!r&&(o=o.replace(A,(function(t,e,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?t:e})),n&&(i=n,o=o.replace(S,"$1").replace(x,"0.$1")),e!=o))return new V(o,i);if(V.DEBUG)throw Error(c+"Not a"+(n?" base "+n:"")+" number: "+e);t.s=null}t.c=t.e=null},T.absoluteValue=T.abs=function(){var t=new V(this);return t.s<0&&(t.s=1),t},T.comparedTo=function(t,e){return _(this,new V(t,e))},T.decimalPlaces=T.dp=function(t,e){var r,n,i,o=this;if(null!=t)return b(t,0,g),null==e?e=P:b(e,0,8),$(new V(o),t+o.e+1,e);if(!(r=o.c))return null;if(n=((i=r.length-1)-m(this.e/h))*h,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},T.dividedBy=T.div=function(t,e){return r(this,new V(t,e),O,P)},T.dividedToIntegerBy=T.idiv=function(t,e){return r(this,new V(t,e),0,1)},T.exponentiatedBy=T.pow=function(t,e){var r,n,i,o,s,l,f,p,d=this;if((t=new V(t)).c&&!t.isInteger())throw Error(c+"Exponent not an integer: "+K(t));if(null!=e&&(e=new V(e)),s=t.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!t.c||!t.c[0])return p=new V(Math.pow(+K(d),s?2-w(t):+K(t))),e?p.mod(e):p;if(l=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new V(NaN);(n=!l&&d.isInteger()&&e.isInteger())&&(d=d.mod(e))}else{if(t.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||s&&d.c[1]>=24e7:d.c[0]<8e13||s&&d.c[0]<=9999975e7)))return o=d.s<0&&w(t)?-0:0,d.e>-1&&(o=1/o),new V(l?1/o:o);U&&(o=a(U/h+2))}for(s?(r=new V(.5),l&&(t.s=1),f=w(t)):f=(i=Math.abs(+K(t)))%2,p=new V(R);;){if(f){if(!(p=p.times(d)).c)break;o?p.c.length>o&&(p.c.length=o):n&&(p=p.mod(e))}if(i){if(0===(i=u(i/2)))break;f=i%2}else if($(t=t.times(r),t.e+1,1),t.e>14)f=w(t);else{if(0===(i=+K(t)))break;f=i%2}d=d.times(d),o?d.c&&d.c.length>o&&(d.c.length=o):n&&(d=d.mod(e))}return n?p:(l&&(p=R.div(p)),e?p.mod(e):o?$(p,U,P,void 0):p)},T.integerValue=function(t){var e=new V(this);return null==t?t=P:b(t,0,8),$(e,e.e+1,t)},T.isEqualTo=T.eq=function(t,e){return 0===_(this,new V(t,e))},T.isFinite=function(){return!!this.c},T.isGreaterThan=T.gt=function(t,e){return _(this,new V(t,e))>0},T.isGreaterThanOrEqualTo=T.gte=function(t,e){return 1===(e=_(this,new V(t,e)))||0===e},T.isInteger=function(){return!!this.c&&m(this.e/h)>this.c.length-2},T.isLessThan=T.lt=function(t,e){return _(this,new V(t,e))<0},T.isLessThanOrEqualTo=T.lte=function(t,e){return-1===(e=_(this,new V(t,e)))||0===e},T.isNaN=function(){return!this.s},T.isNegative=function(){return this.s<0},T.isPositive=function(){return this.s>0},T.isZero=function(){return!!this.c&&0==this.c[0]},T.minus=function(t,e){var r,n,i,o,s=this,a=s.s;if(e=(t=new V(t,e)).s,!a||!e)return new V(NaN);if(a!=e)return t.s=-e,s.plus(t);var u=s.e/h,c=t.e/h,l=s.c,p=t.c;if(!u||!c){if(!l||!p)return l?(t.s=-e,t):new V(p?s:NaN);if(!l[0]||!p[0])return p[0]?(t.s=-e,t):new V(l[0]?s:3==P?-0:0)}if(u=m(u),c=m(c),l=l.slice(),a=u-c){for((o=a<0)?(a=-a,i=l):(c=u,i=p),i.reverse(),e=a;e--;i.push(0));i.reverse()}else for(n=(o=(a=l.length)<(e=p.length))?a:e,a=e=0;e<n;e++)if(l[e]!=p[e]){o=l[e]<p[e];break}if(o&&(i=l,l=p,p=i,t.s=-t.s),(e=(n=p.length)-(r=l.length))>0)for(;e--;l[r++]=0);for(e=f-1;n>a;){if(l[--n]<p[n]){for(r=n;r&&!l[--r];l[r]=e);--l[r],l[n]+=f}l[n]-=p[n]}for(;0==l[0];l.splice(0,1),--c);return l[0]?Y(t,l,c):(t.s=3==P?-1:1,t.c=[t.e=0],t)},T.modulo=T.mod=function(t,e){var n,i,o=this;return t=new V(t,e),!o.c||!t.s||t.c&&!t.c[0]?new V(NaN):!t.c||o.c&&!o.c[0]?new V(o):(9==B?(i=t.s,t.s=1,n=r(o,t,0,3),t.s=i,n.s*=i):n=r(o,t,0,B),(t=o.minus(n.times(t))).c[0]||1!=B||(t.s=o.s),t)},T.multipliedBy=T.times=function(t,e){var r,n,i,o,s,a,u,c,l,p,d,g,v,_,b,w=this,E=w.c,k=(t=new V(t,e)).c;if(!(E&&k&&E[0]&&k[0]))return!w.s||!t.s||E&&!E[0]&&!k||k&&!k[0]&&!E?t.c=t.e=t.s=null:(t.s*=w.s,E&&k?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=m(w.e/h)+m(t.e/h),t.s*=w.s,(u=E.length)<(p=k.length)&&(v=E,E=k,k=v,i=u,u=p,p=i),i=u+p,v=[];i--;v.push(0));for(_=f,b=y,i=p;--i>=0;){for(r=0,d=k[i]%b,g=k[i]/b|0,o=i+(s=u);o>i;)r=((c=d*(c=E[--s]%b)+(a=g*c+(l=E[s]/b|0)*d)%b*b+v[o]+r)/_|0)+(a/b|0)+g*l,v[o--]=c%_;v[o]=r}return r?++n:v.splice(0,1),Y(t,v,n)},T.negated=function(){var t=new V(this);return t.s=-t.s||null,t},T.plus=function(t,e){var r,n=this,i=n.s;if(e=(t=new V(t,e)).s,!i||!e)return new V(NaN);if(i!=e)return t.s=-e,n.minus(t);var o=n.e/h,s=t.e/h,a=n.c,u=t.c;if(!o||!s){if(!a||!u)return new V(i/0);if(!a[0]||!u[0])return u[0]?t:new V(a[0]?n:0*i)}if(o=m(o),s=m(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=u):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(e=u.length)<0&&(r=u,u=a,a=r,e=i),i=0;e;)i=(a[--e]=a[e]+u[e]+i)/f|0,a[e]=f===a[e]?0:a[e]%f;return i&&(a=[i].concat(a),++s),Y(t,a,s)},T.precision=T.sd=function(t,e){var r,n,i,o=this;if(null!=t&&t!==!!t)return b(t,1,g),null==e?e=P:b(e,0,8),$(new V(o),t,e);if(!(r=o.c))return null;if(n=(i=r.length-1)*h+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return t&&o.e+1>n&&(n=o.e+1),n},T.shiftedBy=function(t){return b(t,-p,p),this.times("1e"+t)},T.squareRoot=T.sqrt=function(){var t,e,n,i,o,s=this,a=s.c,u=s.s,c=s.e,l=O+4,f=new V("0.5");if(1!==u||!a||!a[0])return new V(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(u=Math.sqrt(+K(s)))||u==1/0?(((e=v(a)).length+c)%2==0&&(e+="0"),u=Math.sqrt(+e),c=m((c+1)/2)-(c<0||c%2),n=new V(e=u==1/0?"1e"+c:(e=u.toExponential()).slice(0,e.indexOf("e")+1)+c)):n=new V(u+""),n.c[0])for((u=(c=n.e)+l)<3&&(u=0);;)if(o=n,n=f.times(o.plus(r(s,o,l,1))),v(o.c).slice(0,u)===(e=v(n.c)).slice(0,u)){if(n.e<c&&--u,"9999"!=(e=e.slice(u-3,u+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||($(n,n.e+O+2,1),t=!n.times(n).eq(s));break}if(!i&&($(o,o.e+O+2,0),o.times(o).eq(s))){n=o;break}l+=4,u+=4,i=1}return $(n,n.e+O+1,P,t)},T.toExponential=function(t,e){return null!=t&&(b(t,0,g),t++),H(this,t,e,1)},T.toFixed=function(t,e){return null!=t&&(b(t,0,g),t=t+this.e+1),H(this,t,e)},T.toFormat=function(t,e,r){var n,i=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=M;else if("object"!=typeof r)throw Error(c+"Argument not an object: "+r);if(n=i.toFixed(t,e),i.c){var o,s=n.split("."),a=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",f=s[0],h=s[1],p=i.s<0,d=p?f.slice(1):f,y=d.length;if(u&&(o=a,a=u,u=o,y-=o),a>0&&y>0){for(o=y%a||a,f=d.substr(0,o);o<y;o+=a)f+=l+d.substr(o,a);u>0&&(f+=l+d.slice(o)),p&&(f="-"+f)}n=h?f+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):f}return(r.prefix||"")+n+(r.suffix||"")},T.toFraction=function(t){var e,n,i,o,s,a,u,l,f,p,y,g,m=this,_=m.c;if(null!=t&&(!(u=new V(t)).isInteger()&&(u.c||1!==u.s)||u.lt(R)))throw Error(c+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+K(u));if(!_)return new V(m);for(e=new V(R),f=n=new V(R),i=l=new V(R),g=v(_),s=e.e=g.length-m.e-1,e.c[0]=d[(a=s%h)<0?h+a:a],t=!t||u.comparedTo(e)>0?s>0?e:f:u,a=L,L=1/0,u=new V(g),l.c[0]=0;p=r(u,e,0,1),1!=(o=n.plus(p.times(i))).comparedTo(t);)n=i,i=o,f=l.plus(p.times(o=f)),l=o,e=u.minus(p.times(o=e)),u=o;return o=r(t.minus(n),i,0,1),l=l.plus(o.times(f)),n=n.plus(o.times(i)),l.s=f.s=m.s,y=r(f,i,s*=2,P).minus(m).abs().comparedTo(r(l,n,s,P).minus(m).abs())<1?[f,i]:[l,n],L=a,y},T.toNumber=function(){return+K(this)},T.toPrecision=function(t,e){return null!=t&&b(t,1,g),H(this,t,e,2)},T.toString=function(t){var e,r=this,i=r.s,o=r.e;return null===o?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(null==t?e=o<=j||o>=N?E(v(r.c),o):k(v(r.c),o,"0"):10===t?e=k(v((r=$(new V(r),O+o+1,P)).c),r.e,"0"):(b(t,2,q.length,"Base"),e=n(k(v(r.c),o,"0"),10,t,i,!0)),i<0&&r.c[0]&&(e="-"+e)),e},T.valueOf=T.toJSON=function(){return K(this)},T._isBigNumber=!0,null!=e&&V.set(e),V}()).default=o.BigNumber=o,void 0===(n=function(){return o}.call(e,r,e,t))||(t.exports=n)}()},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){(function(e){const n=r(16),i=r(31),o=r(1).sign;function s(t){const r=o.keyPair.fromSeed(t);return e.from(r.publicKey)}t.exports={sha256d:function(t){return e.from(i().update(i().update(t).digest()).digest())},verify:function(t,e,r){const n=t.slice(1);return o.detached.verify(e,r,n)},sign:function(t,r){const n=s(t),i=e.concat([e.from("01","hex"),n]),a=o.keyPair.fromSeed(t);return{identityKeyPreImage:i,signature:e.from(o.detached(r,a.secretKey))}},secretToPublicKey:s,extractSecretFromIdentityKey:function(t){let r;return r="sk"===t.slice(0,2)?e.from(n.decode(t)):e.from(t,"hex"),e.from(r.slice(3,35))}}}).call(this,r(0).Buffer)},function(t,e,r){(function(e){const n=r(16),{sha256d:i}=r(11),{IDENTITY_KEY_HEX_PREFIX_MAP:o}=r(79);function s(t,r){if("string"!=typeof r)return!1;let s;if(r.slice(0,3)===t)s=e.from(n.decode(r));else{if(r.slice(0,6)!==o[t])return!1;s=e.from(r,"hex")}if(39!==s.length)return!1;return!!i(s.slice(0,35)).slice(0,4).equals(s.slice(35,39))}t.exports={isValidSk1:function(t){return s("sk1",t)},isValidSk2:function(t){return s("sk2",t)},isValidSk3:function(t){return s("sk3",t)},isValidSk4:function(t){return s("sk4",t)},isValidIdentityChainId:function(t){return"string"==typeof t&&64===t.length&&t.startsWith("888888")}}}).call(this,r(0).Buffer)},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){var n=r(124).stringify,i=r(125);t.exports=function(t){return{parse:i(t),stringify:n}},t.exports.parse=i(),t.exports.stringify=n},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){(function(t,e){(function(){var r,n,i,o;for(i=(null!==t?t.exports:void 0)||(window.Base58={}),r="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",n={},o=0;o<r.length;)n[r.charAt(o)]=o,o++;i.encode=function(t){var e,n,i;if(0===t.length)return"";for(o=void 0,i=void 0,n=[0],o=0;o<t.length;){for(i=0;i<n.length;)n[i]<<=8,i++;for(n[0]+=t[o],e=0,i=0;i<n.length;)n[i]+=e,e=n[i]/58|0,n[i]%=58,++i;for(;e;)n.push(e%58),e=e/58|0;o++}for(o=0;0===t[o]&&o<t.length-1;)n.push(0),o++;return n.reverse().map((function(t){return r[t]})).join("")},i.decode=function(t){var r,i,s,a;if(0===t.length)return new("undefined"!=typeof Uint8Array&&null!==Uint8Array?Uint8Array:e)(0);for(o=void 0,a=void 0,r=[0],o=0;o<t.length;){if(!((i=t[o])in n))throw"Base58.decode received unacceptable input. Character '"+i+"' is not in the Base58 alphabet.";for(a=0;a<r.length;)r[a]*=58,a++;for(r[0]+=n[i],s=0,a=0;a<r.length;)r[a]+=s,s=r[a]>>8,r[a]&=255,++a;for(;s;)r.push(255&s),s>>=8;o++}for(o=0;"1"===t[o]&&o<t.length-1;)r.push(0),o++;return new("undefined"!=typeof Uint8Array&&null!==Uint8Array?Uint8Array:e)(r.reverse())}}).call(this)}).call(this,r(60)(t),r(0).Buffer)},function(t,e,r){"use strict";(function(e){var n=r(2)(r(21)),i=r(25).Entry,o=r(44).Chain,s=r(16),a=r(11).sha256d,u=r(79).IDENTITY_KEY_HEX_PREFIX_MAP,c=r(11);function l(t){return Number.isInteger(t)||"object"===(0,n.default)(t)&&Number.isInteger(t.min)&&Number.isInteger(t.max)&&t.max>=t.min&&2===Object.keys(t).length}t.exports.getTokenChainId=function(t,r){return new o(i.builder().extId(e.from("token")).extId(e.from(t)).extId(e.from("issuer")).extId(e.from(r,"hex")).build()).idHex},t.exports.reduceNFIds=function(t){for(var e,r,n=[],i=0;i<t.length;i++){for(r=e=t[i];t[i+1]-t[i]==1;)r=t[i+1],i++;n.push(e===r?e:{min:e,max:r})}return n},t.exports.expandNFIds=function(t){return t.reduce((function(t,e){return"object"===(0,n.default)(e)?t=t.concat(Array(e.max-e.min+1).fill(e.min).map((function(t,e){return t+e}))):t.push(e),t}),[])},t.exports.countNFIds=function(t){return t.reduce((function(t,e){return"object"===(0,n.default)(e)?t+(e.max-e.min)+1:t+1}),0)},t.exports.validateNFIds=function(e){return Array.isArray(e)&&e.length>0&&e.every(l)&&function(e){var r=t.exports.expandNFIds(e);return new Set(r).size===r.length}(e)},t.exports.createPublicIdentityAddr=function(t,r){var n=e.concat([e.from(u[t],"hex"),e.from(r,"hex")]);if(35!==n.length)throw Error("Invalid public key provided");return s.encode(e.concat([n,c.sha256d(n).slice(0,4)]))},t.exports.extractIdentityPublicKey=function(t){if(!function(t){if(prefix="id1","string"!=typeof t)return!1;var r;if(t.slice(0,3)===prefix)r=e.from(s.decode(t));else{if(t.slice(0,6)!==u[prefix])return!1;r=e.from(t,"hex")}if(39!==r.length)return!1;if(a(r.slice(0,35)).slice(0,4).equals(r.slice(35,39)))return!0;return!1}(t))throw new Error("You must include a valid ID1 Key to map to an external signature");var r;return r="id"===t.slice(0,2)?e.from(s.decode(t)):e.from(key,"hex"),e.from(r.slice(3,35))},t.exports.sleep=function(t){return new Promise((function(e){return setTimeout(e,t)}))}}).call(this,r(0).Buffer)},function(t,e,r){(function(e){const r="000000000000000000000000000000000000000000000000000000000000000a",n=new Map([[1,"DIRECTORY_BLOCK_SIGNATURE"],[2,"REVEAL_MATRYOSHKA_HASH"],[3,"ADD_REPLACE_MATRYOSHKA_HASH"],[4,"INCREASE_SERVER_COUNT"],[5,"ADD_FEDERATED_SERVER"],[6,"ADD_AUDIT_SERVER"],[7,"REMOVE_FEDERATED_SERVER"],[8,"ADD_FEDERATED_SERVER_SIGNING_KEY"],[9,"ADD_FEDERATED_SERVER_BITCOIN_ANCHOR_KEY"],[10,"SERVER_FAULT_HANDOFF"],[11,"COINBASE_DESCRIPTOR"],[12,"COINBASE_DESCRIPTOR_CANCEL"],[13,"ADD_AUTHORITY_FACTOID_ADDRESS"],[14,"ADD_AUTHORITY_EFFICIENCY"]]);t.exports={MAX_TRANSACTION_SIZE:10240,MAX_ENTRY_PAYLOAD_SIZE:10240,MAX_ENTRY_SIZE:10275,CHAIN_CREATION_COST:10,NULL_HASH:"0000000000000000000000000000000000000000000000000000000000000000",ADMIN_BLOCKS_CHAIN_ID:r,ENTRY_CREDIT_BLOCKS_CHAIN_ID:"000000000000000000000000000000000000000000000000000000000000000c",FACTOID_BLOCKS_CHAIN_ID:"000000000000000000000000000000000000000000000000000000000000000f",RESERVED_CHAIN_IDS:new Set([r,"000000000000000000000000000000000000000000000000000000000000000c","000000000000000000000000000000000000000000000000000000000000000f"]),VALID_PREFIXES:new Set(["Fs","FA","EC","Es"]),PUBLIC_ADDRESS_VALID_PREFIXES:new Set(["FA","EC"]),PRIVATE_ADDRESS_VALID_PREFIXES:new Set(["Fs","Es"]),EC_ADDRESS_VALID_PREFIXES:new Set(["EC","Es"]),FCT_ADDRESS_VALID_PREFIXES:new Set(["FA","Fs"]),FACTOID_PUBLIC_PREFIX:e.from("5fb1","hex"),FACTOID_PRIVATE_PREFIX:e.from("6478","hex"),ENTRYCREDIT_PUBLIC_PREFIX:e.from("592a","hex"),ENTRYCREDIT_PRIVATE_PREFIX:e.from("5db6","hex"),ADMIN_ID_TO_CODE:n}}).call(this,r(0).Buffer)},function(t,e,r){t.exports=Object.assign({},r(140),r(77),r(25),r(44),r(6),r(24),r(148))},function(t,e,r){"use strict";var n=r(29),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=f;var o=r(23);o.inherits=r(15);var s=r(52),a=r(55);o.inherits(f,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=a.prototype[l])}function f(t){if(!(this instanceof f))return new f(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),f.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(e){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?t.exports=n=function(t){return r(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},n(e)}t.exports=n},function(t,e,r){(function(e,r,n){var i;i=function(){var t,i,o;return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,(function(t){var r=e[s][1][t];return i(r||t)}),l,l.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function r(t){var r=new e(t),n=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),n}t.any=function(t){return r(t)},t.prototype.any=function(){return r(this)}}},{}],2:[function(t,r,n){"use strict";var i;try{throw new Error}catch(t){i=t}var o=t("./schedule"),s=t("./queue");function a(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o}function u(t){for(;t.length()>0;)c(t)}function c(t){var e=t.shift();if("function"!=typeof e)e._settlePromises();else{var r=t.shift(),n=t.shift();e.call(r,n)}}a.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},a.prototype.hasCustomScheduler=function(){return this._customScheduler},a.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},a.prototype.fatalError=function(t,r){r?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},a.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout((function(){t(e)}),0);else try{this._schedule((function(){t(e)}))}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.prototype.invokeLater=function(t,e,r){this._lateQueue.push(t,e,r),this._queueTick()},a.prototype.invoke=function(t,e,r){this._normalQueue.push(t,e,r),this._queueTick()},a.prototype.settlePromises=function(t){this._normalQueue._pushOne(t),this._queueTick()},a.prototype._drainQueues=function(){u(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,u(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},r.exports=a,r.exports.firstLineError=i},{"./queue":26,"./schedule":29}],3:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){var i=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=n.propagateFromFunction(),t.prototype._boundValue=n.boundValueFunction());var c=r(o),l=new t(e);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(c),c instanceof t){var h={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:c};f._then(e,s,void 0,l,h),c._then(a,u,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(f);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,r){return t.resolve(r).bind(e)}}},{}],4:[function(t,e,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var i=t("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=n)}catch(t){}return i},e.exports=i},{"./promise":22}],5:[function(t,e,r){"use strict";var n=Object.create;if(n){var i=n(null),o=n(null);i[" size"]=o[" size"]=0}e.exports=function(e){var r=t("./util"),n=r.canEvaluate;function i(t){return function(t,n){var i;if(null!=t&&(i=t[n]),"function"!=typeof i){var o="Object "+r.classString(t)+" has no method '"+r.toString(n)+"'";throw new e.TypeError(o)}return i}(t,this.pop()).apply(t,this)}function o(t){return t[this]}function s(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}r.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(i,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=s;else if(n){var r=(void 0)(t);e=null!==r?r:o}else e=o;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util"),s=o.tryCatch,a=o.errorObj,u=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var r=t._cancellationParent;if(null==r||!r._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=r}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var r=0;r<t.length;++r)this._doInvokeOnCancel(t[r],e);else if(void 0!==t)if("function"==typeof t){if(!e){var n=s(t).call(this._boundValue());n===a&&(this._attachExtraTrace(n.e),u.throwLater(n.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,r){"use strict";e.exports=function(e){var r=t("./util"),n=t("./es5").keys,i=r.tryCatch,o=r.errorObj;return function(t,s,a){return function(u){var c=a._boundValue();t:for(var l=0;l<t.length;++l){var f=t[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return i(s).call(c,u)}else if("function"==typeof f){var h=i(f).call(c,u);if(h===o)return h;if(h)return i(s).call(c,u)}else if(r.isObject(u)){for(var p=n(f),d=0;d<p.length;++d){var y=p[d];if(f[y]!=u[y])continue t}return i(s).call(c,u)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,r){"use strict";e.exports=function(t){var e=!1,r=[];function n(){this._trace=new n.CapturedTrace(i())}function i(){var t=r.length-1;if(t>=0)return r[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},n.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},n.prototype._popContext=function(){if(void 0!==this._trace){var t=r.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},n.CapturedTrace=null,n.create=function(){if(e)return new n},n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var r=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,u=t.prototype._promiseCreated;n.deactivateLongStackTraces=function(){t.prototype._pushContext=r,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=u,e=!1},e=!0,t.prototype._pushContext=n.prototype._pushContext,t.prototype._popContext=n.prototype._popContext,t._peekContext=t.prototype._peekContext=i,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},n}},{}],9:[function(t,r,n){"use strict";r.exports=function(r,n,i,o){var s,a,u,c,l=r._async,f=t("./errors").Warning,h=t("./util"),p=t("./es5"),d=h.canAttachTrace,y=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,g=/\((?:timers\.js):\d+:\d+\)/,m=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,_=null,b=!1,w=!(0==h.env("BLUEBIRD_DEBUG")),E=!(0==h.env("BLUEBIRD_WARNINGS")||!w&&!h.env("BLUEBIRD_WARNINGS")),k=!(0==h.env("BLUEBIRD_LONG_STACK_TRACES")||!w&&!h.env("BLUEBIRD_LONG_STACK_TRACES")),A=0!=h.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(E||!!h.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){var t=[];function e(){for(var e=0;e<t.length;++e)t[e]._notifyUnhandledRejection();n()}function n(){t.length=0}c="object"==typeof document&&document.createElement?function(){var r;function n(){if(document.body){var t=document.createElement("iframe");document.body.appendChild(t),t.contentWindow&&t.contentWindow.setTimeout&&(r=t.contentWindow.setTimeout),document.body.removeChild(t)}}return n(),function(i){t.push(i),r?r(e,1):n()}}():function(r){t.push(r),setTimeout(e,1)},p.defineProperty(r,"_unhandledRejectionCheck",{value:e}),p.defineProperty(r,"_unhandledRejectionClear",{value:n})}(),r.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},r.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),c(this))},r.prototype._notifyUnhandledRejectionIsHandled=function(){W("rejectionHandled",s,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},r.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),W("unhandledRejection",a,t,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},r.prototype._warn=function(t,e,r){return z(t,e,r||this)},r.onPossiblyUnhandledRejection=function(t){var e=r._getContext();a=h.contextBind(e,t)},r.onUnhandledRejectionHandled=function(t){var e=r._getContext();s=h.contextBind(e,t)};var S=function(){};r.longStackTraces=function(){if(l.haveItemsQueued()&&!rt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!rt.longStackTraces&&G()){var t=r.prototype._captureStackTrace,e=r.prototype._attachExtraTrace,i=r.prototype._dereferenceTrace;rt.longStackTraces=!0,S=function(){if(l.haveItemsQueued()&&!rt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");r.prototype._captureStackTrace=t,r.prototype._attachExtraTrace=e,r.prototype._dereferenceTrace=i,n.deactivateLongStackTraces(),rt.longStackTraces=!1},r.prototype._captureStackTrace=q,r.prototype._attachExtraTrace=V,r.prototype._dereferenceTrace=H,n.activateLongStackTraces()}},r.hasLongStackTraces=function(){return rt.longStackTraces&&G()};var x={unhandledrejection:{before:function(){var t=h.global.onunhandledrejection;return h.global.onunhandledrejection=null,t},after:function(t){h.global.onunhandledrejection=t}},rejectionhandled:{before:function(){var t=h.global.onrejectionhandled;return h.global.onrejectionhandled=null,t},after:function(t){h.global.onrejectionhandled=t}}},C=function(){var t=function(t,e){if(!t)return!h.global.dispatchEvent(e);var r;try{return r=t.before(),!h.global.dispatchEvent(e)}finally{t.after(r)}};try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return h.global.dispatchEvent(e),function(e,r){e=e.toLowerCase();var n=new CustomEvent(e,{detail:r,cancelable:!0});return p.defineProperty(n,"promise",{value:r.promise}),p.defineProperty(n,"reason",{value:r.reason}),t(x[e],n)}}return"function"==typeof Event?(e=new Event("CustomEvent"),h.global.dispatchEvent(e),function(e,r){e=e.toLowerCase();var n=new Event(e,{cancelable:!0});return n.detail=r,p.defineProperty(n,"promise",{value:r.promise}),p.defineProperty(n,"reason",{value:r.reason}),t(x[e],n)}):((e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),h.global.dispatchEvent(e),function(e,r){e=e.toLowerCase();var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!0,r),t(x[e],n)})}catch(t){}return function(){return!1}}(),I=h.isNode?function(){return e.emit.apply(e,arguments)}:h.global?function(t){var e="on"+t.toLowerCase(),r=h.global[e];return!!r&&(r.apply(h.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function T(t,e){return{promise:e}}var R={promiseCreated:T,promiseFulfilled:T,promiseRejected:T,promiseResolved:T,promiseCancelled:T,promiseChained:function(t,e,r){return{promise:e,child:r}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,r){return{reason:e,promise:r}},rejectionHandled:T},O=function(t){var e=!1;try{e=I.apply(null,arguments)}catch(t){l.throwLater(t),e=!0}var r=!1;try{r=C(t,R[t].apply(null,arguments))}catch(t){l.throwLater(t),r=!0}return r||e};function P(){return!1}function j(t,e,r){var n=this;try{t(e,r,(function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+h.toString(t));n._attachCancellationCallback(t)}))}catch(t){return t}}function N(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?h.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function D(){return this._onCancelField}function L(t){this._onCancelField=t}function F(){this._cancellationParent=void 0,this._onCancelField=void 0}function B(t,e){if(0!=(1&e)){this._cancellationParent=t;var r=t._branchesRemainingToCancel;void 0===r&&(r=0),t._branchesRemainingToCancel=r+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}r.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?r.longStackTraces():!t.longStackTraces&&r.hasLongStackTraces()&&S()),"warnings"in t){var e=t.warnings;rt.warnings=!!e,A=rt.warnings,h.isObject(e)&&"wForgottenReturn"in e&&(A=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!rt.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=F,r.prototype._propagateFrom=B,r.prototype._onCancel=D,r.prototype._setOnCancel=L,r.prototype._attachCancellationCallback=N,r.prototype._execute=j,U=B,rt.cancellation=!0}if("monitoring"in t&&(t.monitoring&&!rt.monitoring?(rt.monitoring=!0,r.prototype._fireEvent=O):!t.monitoring&&rt.monitoring&&(rt.monitoring=!1,r.prototype._fireEvent=P)),"asyncHooks"in t&&h.nodeSupportsAsyncResource){var n=rt.asyncHooks,s=!!t.asyncHooks;n!==s&&(rt.asyncHooks=s,s?i():o())}return r},r.prototype._fireEvent=P,r.prototype._execute=function(t,e,r){try{t(e,r)}catch(t){return t}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(t){},r.prototype._attachCancellationCallback=function(t){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._dereferenceTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(t,e){};var U=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function M(){var t=this._boundTo;return void 0!==t&&t instanceof r?t.isFulfilled()?t.value():void 0:t}function q(){this._trace=new tt(this._peekContext())}function V(t,e){if(d(t)){var r=this._trace;if(void 0!==r&&e&&(r=r._parent),void 0!==r)r.attachExtraTrace(t);else if(!t.__stackCleaned__){var n=$(t);h.notEnumerableProp(t,"stack",n.message+"\n"+n.stack.join("\n")),h.notEnumerableProp(t,"__stackCleaned__",!0)}}}function H(){this._trace=void 0}function z(t,e,n){if(rt.warnings){var i,o=new f(t);if(e)n._attachExtraTrace(o);else if(rt.longStackTraces&&(i=r._peekContext()))i.attachExtraTrace(o);else{var s=$(o);o.stack=s.message+"\n"+s.stack.join("\n")}O("warning",o)||K(o,"",!0)}}function Y(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],i="    (No stack trace)"===n||v.test(n),o=i&&J(n);i&&!o&&(b&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function $(t){var e=t.stack,r=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),r=0;r<e.length;++r){var n=e[r];if("    (No stack trace)"===n||v.test(n))break}return r>0&&"SyntaxError"!=t.name&&(e=e.slice(r)),e}(t):["    (No stack trace)"],{message:r,stack:"SyntaxError"==t.name?e:Y(e)}}function K(t,e,r){if("undefined"!=typeof console){var n;if(h.isObject(t)){var i=t.stack;n=e+_(i,t)}else n=e+String(t);"function"==typeof u?u(n,r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}}function W(t,e,r,n){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(n):e(r,n))}catch(t){l.throwLater(t)}"unhandledRejection"===t?O(t,r,n)||i||K(r,"Unhandled rejection "):O(t,n)}function X(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t&&"function"==typeof t.toString?t.toString():h.toString(t),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){return t.length<41?t:t.substr(0,38)+"..."}(e)+">, no stack trace)"}function G(){return"function"==typeof et}var J=function(){return!1},Z=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Q(t){var e=t.match(Z);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function tt(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);et(this,tt),e>32&&this.uncycle()}h.inherits(tt,Error),n.CapturedTrace=tt,tt.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],r={},n=0,i=this;void 0!==i;++n)e.push(i),i=i._parent;for(n=(t=this._length=n)-1;n>=0;--n){var o=e[n].stack;void 0===r[o]&&(r[o]=n)}for(n=0;n<t;++n){var s=r[e[n].stack];if(void 0!==s&&s!==n){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var a=n>0?e[n-1]:this;s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var u=a._length+1,c=n-2;c>=0;--c)e[c]._length=u,u++;return}}}},tt.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=$(t),r=e.message,n=[e.stack],i=this;void 0!==i;)n.push(Y(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],r=1;r<t.length;++r){for(var n=t[r],i=e.length-1,o=e[i],s=-1,a=n.length-1;a>=0;--a)if(n[a]===o){s=a;break}for(a=s;a>=0;--a){var u=n[a];if(e[i]!==u)break;e.pop(),i--}e=n}}(n),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(n),h.notEnumerableProp(t,"stack",function(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\n");return r<e.length&&(e[r]=e[r].join("\n")),t+"\n"+e.join("\n")}(r,n)),h.notEnumerableProp(t,"__stackCleaned__",!0)}};var et=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():X(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=t,_=e;var r=Error.captureStackTrace;return J=function(t){return y.test(t)},function(t,e){Error.stackTraceLimit+=6,r(t,e),Error.stackTraceLimit-=6}}var n,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,_=e,b=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){n="stack"in t}return"stack"in i||!n||"number"!=typeof Error.stackTraceLimit?(_=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?X(e):e.toString()},null):(v=t,_=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(u=function(t){console.warn(t)},h.isNode&&e.stderr.isTTY?u=function(t,e){var r=e?"[33m":"[31m";console.warn(r+t+"[0m\n")}:h.isNode||"string"!=typeof(new Error).stack||(u=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var rt={warnings:E,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return k&&r.longStackTraces(),{asyncHooks:function(){return rt.asyncHooks},longStackTraces:function(){return rt.longStackTraces},warnings:function(){return rt.warnings},cancellation:function(){return rt.cancellation},monitoring:function(){return rt.monitoring},propagateFromFunction:function(){return U},boundValueFunction:function(){return M},checkForgottenReturns:function(t,e,r,n,i){if(void 0===t&&null!==e&&A){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&n._bitField))return;r&&(r+=" ");var o="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),u=Y(a),c=u.length-1;c>=0;--c){var l=u[c];if(!g.test(l)){var f=l.match(m);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(u.length>0){var h=u[0];for(c=0;c<a.length;++c)if(a[c]===h){c>0&&(s="\n"+a[c-1]);break}}}var p="a promise was created in a "+r+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;n._warn(p,!0,e)}},setBounds:function(t,e){if(G()){for(var r,n,i=(t.stack||"").split("\n"),o=(e.stack||"").split("\n"),s=-1,a=-1,u=0;u<i.length;++u)if(c=Q(i[u])){r=c.fileName,s=c.line;break}for(u=0;u<o.length;++u){var c;if(c=Q(o[u])){n=c.fileName,a=c.line;break}}s<0||a<0||!r||!n||r!==n||s>=a||(J=function(t){if(y.test(t))return!0;var e=Q(t);return!!(e&&e.fileName===r&&s<=e.line&&e.line<=a)})}},warn:z,deprecated:function(t,e){var r=t+" is deprecated and will be removed in a future version.";return e&&(r+=" Use "+e+" instead."),z(r)},CapturedTrace:tt,fireDomEvent:C,fireGlobalEvent:I}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,r){"use strict";e.exports=function(t){function e(){return this.value}function r(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(r){return r instanceof t&&r.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:r},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(r,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:t},void 0);var e=arguments[1],n=function(){throw e};return this.caught(t,n)},t.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof t&&r.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:r},void 0);var n=arguments[1];n instanceof t&&n.suppressUnhandledRejections();var i=function(){return n};return this.caught(r,i)}}},{}],11:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.reduce,n=t.all;function i(){return n(this)}t.prototype.each=function(t){return r(this,t,e,0)._then(i,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return r(this,t,e,e)},t.each=function(t,n){return r(t,n,e,0)._then(i,void 0,void 0,t,void 0)},t.mapSeries=function(t,n){return r(t,n,e,e)}}},{}],12:[function(t,e,r){"use strict";var n,i,o=t("./es5"),s=o.freeze,a=t("./util"),u=a.inherits,c=a.notEnumerableProp;function l(t,e){function r(n){if(!(this instanceof r))return new r(n);c(this,"message","string"==typeof n?n:e),c(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(r,Error),r}var f=l("Warning","warning"),h=l("CancellationError","cancellation error"),p=l("TimeoutError","timeout error"),d=l("AggregateError","aggregate error");try{n=TypeError,i=RangeError}catch(t){n=l("TypeError","type error"),i=l("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<y.length;++g)"function"==typeof Array.prototype[y[g]]&&(d.prototype[y[g]]=Array.prototype[y[g]]);o.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var m=0;function v(t){if(!(this instanceof v))return new v(t);c(this,"name","OperationalError"),c(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(c(this,"message",t.message),c(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}d.prototype.toString=function(){var t=Array(4*m+1).join(" "),e="\n"+t+"AggregateError of:\n";m++,t=Array(4*m+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];e+=(n=i.join("\n"))+"\n"}return m--,e},u(v,Error);var _=Error.__BluebirdErrorTypes__;_||(_=s({CancellationError:h,TimeoutError:p,OperationalError:v,RejectionError:v,AggregateError:d}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:n,RangeError:i,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(t,e,r){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:a,names:a,defineProperty:function(t,e,r){return t[e]=r.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return s}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,n){return r(this,t,n,e)},t.filter=function(t,n,i){return r(t,n,i,e)}}},{}],15:[function(t,e,r){"use strict";e.exports=function(e,r,n){var i=t("./util"),o=e.CancellationError,s=i.errorObj,a=t("./catch_filter")(n);function u(t,e,r){this.promise=t,this.type=e,this.handler=r,this.called=!1,this.cancelPromise=null}function c(t){this.finallyHandler=t}function l(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function f(){return p.call(this,this.promise._target()._settledValue())}function h(t){if(!l(this,t))return s.e=t,s}function p(t){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),t);if(u===n)return u;if(void 0!==u){i._setReturnedNonUndefined();var p=r(u,i);if(p instanceof e){if(null!=this.cancelPromise){if(p._isCancelled()){var d=new o("late cancellation observer");return i._attachExtraTrace(d),s.e=d,s}p.isPending()&&p._attachCancellationCallback(new c(this))}return p._then(f,h,void 0,this,void 0)}}}return i.isRejected()?(l(this),s.e=t,s):(l(this),t)}return u.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){l(this.finallyHandler)},e.prototype._passThrough=function(t,e,r,n){return"function"!=typeof t?this.then():this._then(r,n,void 0,new u(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,p,p)},e.prototype.tap=function(t){return this._passThrough(t,1,p)},e.prototype.tapCatch=function(t){var r=arguments.length;if(1===r)return this._passThrough(t,1,void 0,p);var n,o=new Array(r-1),s=0;for(n=0;n<r-1;++n){var u=arguments[n];if(!i.isObject(u))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(u)));o[s++]=u}o.length=s;var c=arguments[n];return this._passThrough(a(o,c,this),1,void 0,p)},u}},{"./catch_filter":7,"./util":36}],16:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,s){var a=t("./errors").TypeError,u=t("./util"),c=u.errorObj,l=u.tryCatch,f=[];function h(t,r,i,o){if(s.cancellation()){var a=new e(n),u=this._finallyPromise=new e(n);this._promise=a.lastly((function(){return u})),a._captureStackTrace(),a._setOnCancel(this)}else(this._promise=new e(n))._captureStackTrace();this._stack=o,this._generatorFunction=t,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(h,o),h.prototype._isResolved=function(){return null===this._promise},h.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},h.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=l(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},h.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=l(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=l(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},h.prototype._continue=function(t){var r=this._promise;if(t===c)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(t.e,!1);var n=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var o=i(n,this._promise);if(o instanceof e||null!==(o=function(t,r,n){for(var o=0;o<r.length;++o){n._pushContext();var s=l(r[o])(t);if(n._popContext(),s===c){n._pushContext();var a=e.reject(c.e);return n._popContext(),a}var u=i(s,n);if(u instanceof e)return u}return null}(o,this._yieldHandlers,this._promise))){var s=(o=o._target())._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&s)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(e).yieldHandler,n=h,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new n(void 0,void 0,r,i),s=o.promise();return o._generator=e,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new a("expecting a function but got "+u.classString(t));f.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new h(t,this),i=n.promise();return n._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj,e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var n=[].slice.call(arguments);t&&n.pop();var i=new r(n).promise();return void 0!==t?i.spread(t):i}}},{"./util":36}],18:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,s){var a=t("./util"),u=a.tryCatch,c=a.errorObj,l=e._async;function f(t,r,n,i){this.constructor$(t),this._promise._captureStackTrace();var s=e._getContext();if(this._callback=a.contextBind(s,r),this._preservedValues=i===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],l.invoke(this._asyncInit,this,void 0),a.isArray(t))for(var u=0;u<t.length;++u){var c=t[u];c instanceof e&&c.suppressUnhandledRejections()}}function h(t,r,i,o){if("function"!=typeof r)return n("expecting a function but got "+a.classString(r));var s=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+a.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+a.classString(i.concurrency)));s=i.concurrency}return new f(t,r,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,o).promise()}a.inherits(f,r),f.prototype._asyncInit=function(){this._init$(void 0,-2)},f.prototype._init=function(){},f.prototype._promiseFulfilled=function(t,r){var n=this._values,o=this.length(),a=this._preservedValues,l=this._limit;if(r<0){if(n[r=-1*r-1]=t,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return n[r]=t,this._queue.push(r),!1;null!==a&&(a[r]=t);var f=this._promise,h=this._callback,p=f._boundValue();f._pushContext();var d=u(h).call(p,t,r,o),y=f._popContext();if(s.checkForgottenReturns(d,y,null!==a?"Promise.filter":"Promise.map",f),d===c)return this._reject(d.e),!0;var g=i(d,this._promise);if(g instanceof e){var m=(g=g._target())._bitField;if(0==(50397184&m))return l>=1&&this._inFlight++,n[r]=g,g._proxy(this,-1*(r+1)),!1;if(0==(33554432&m))return 0!=(16777216&m)?(this._reject(g._reason()),!0):(this._cancel(),!0);d=g._value()}n[r]=d}return++this._totalResolved>=o&&(null!==a?this._filter(n,a):this._resolve(n),!0)},f.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},f.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),i=0,o=0;o<r;++o)t[o]&&(n[i++]=e[o]);n.length=i,this._resolve(n)},f.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return h(this,t,e,null)},e.map=function(t,e,r,n){return h(t,e,r,n)}}},{"./util":36}],19:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var n=new e(r);n._captureStackTrace(),n._pushContext();var i=a(t).apply(this,arguments),s=n._popContext();return o.checkForgottenReturns(i,s,"Promise.method",n),n._resolveFromSyncValue(i),n}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+s.classString(t));var n,u=new e(r);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];n=s.isArray(c)?a(t).apply(l,c):a(t).call(l,c)}else n=a(t)();var f=u._popContext();return o.checkForgottenReturns(n,f,"Promise.try",u),u._resolveFromSyncValue(n),u},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,r){"use strict";var n=t("./util"),i=n.maybeWrapAsError,o=t("./errors").OperationalError,s=t("./es5"),a=/^(?:name|message|stack|cause)$/;function u(t){var e;if(function(t){return t instanceof Error&&s.getPrototypeOf(t)===Error.prototype}(t)){(e=new o(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var r=s.keys(t),i=0;i<r.length;++i){var u=r[i];a.test(u)||(e[u]=t[u])}return e}return n.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(r,n){if(null!==t){if(r){var o=u(i(r));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(n);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,r){"use strict";e.exports=function(e){var r=t("./util"),n=e._async,i=r.tryCatch,o=r.errorObj;function s(t,e){if(!r.isArray(t))return a.call(this,t,e);var s=i(e).apply(this._boundValue(),[null].concat(t));s===o&&n.throwLater(s.e)}function a(t,e){var r=this._boundValue(),s=void 0===t?i(e).call(r,null):i(e).call(r,null,t);s===o&&n.throwLater(s.e)}function u(t,e){if(!t){var r=new Error(t+"");r.cause=t,t=r}var s=i(e).call(this._boundValue(),t);s===o&&n.throwLater(s.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var r=a;void 0!==e&&Object(e).spread&&(r=s),this._then(r,u,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,r,n){"use strict";r.exports=function(){var n=function(){return new v("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new j.PromiseInspection(this._target())},o=function(t){return j.reject(new v(t))};function s(){}var a={},u=t("./util");u.setReflectHandler(i);var c=function(){var t=e.domain;return void 0===t?null:t},l=function(){return{domain:c(),async:null}},f=u.isNode&&u.nodeSupportsAsyncResource?t("async_hooks").AsyncResource:null,h=function(){return{domain:c(),async:new f("Bluebird::Promise")}},p=u.isNode?l:function(){return null};u.notEnumerableProp(j,"_getContext",p);var d=t("./es5"),y=t("./async"),g=new y;d.defineProperty(j,"_async",{value:g});var m=t("./errors"),v=j.TypeError=m.TypeError;j.RangeError=m.RangeError;var _=j.CancellationError=m.CancellationError;j.TimeoutError=m.TimeoutError,j.OperationalError=m.OperationalError,j.RejectionError=m.OperationalError,j.AggregateError=m.AggregateError;var b=function(){},w={},E={},k=t("./thenables")(j,b),A=t("./promise_array")(j,b,k,o,s),S=t("./context")(j),x=S.create,C=t("./debuggability")(j,S,(function(){p=h,u.notEnumerableProp(j,"_getContext",h)}),(function(){p=l,u.notEnumerableProp(j,"_getContext",l)})),I=(C.CapturedTrace,t("./finally")(j,k,E)),T=t("./catch_filter")(E),R=t("./nodeback"),O=u.errorObj,P=u.tryCatch;function j(t){t!==b&&function(t,e){if(null==t||t.constructor!==j)throw new v("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new v("expecting a function but got "+u.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function N(t){this.promise._resolveCallback(t)}function D(t){this.promise._rejectCallback(t,!1)}function L(t){var e=new j(b);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return j.prototype.toString=function(){return"[object Promise]"},j.prototype.caught=j.prototype.catch=function(t){var e=arguments.length;if(e>1){var r,n=new Array(e-1),i=0;for(r=0;r<e-1;++r){var s=arguments[r];if(!u.isObject(s))return o("Catch statement predicate: expecting an object but got "+u.classString(s));n[i++]=s}if(n.length=i,"function"!=typeof(t=arguments[r]))throw new v("The last argument to .catch() must be a function, got "+u.toString(t));return this.then(void 0,T(n,t,this))}return this.then(void 0,t)},j.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},j.prototype.then=function(t,e){if(C.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var r=".then() only accepts functions but was passed: "+u.classString(t);arguments.length>1&&(r+=", "+u.classString(e)),this._warn(r)}return this._then(t,e,void 0,void 0,void 0)},j.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},j.prototype.spread=function(t){return"function"!=typeof t?o("expecting a function but got "+u.classString(t)):this.all()._then(t,void 0,void 0,w,void 0)},j.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},j.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new A(this).promise()},j.prototype.error=function(t){return this.caught(u.originatesFromRejection,t)},j.getNewLibraryCopy=r.exports,j.is=function(t){return t instanceof j},j.fromNode=j.fromCallback=function(t){var e=new j(b);e._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=P(t)(R(e,r));return n===O&&e._rejectCallback(n.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},j.all=function(t){return new A(t).promise()},j.cast=function(t){var e=k(t);return e instanceof j||((e=new j(b))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},j.resolve=j.fulfilled=j.cast,j.reject=j.rejected=function(t){var e=new j(b);return e._captureStackTrace(),e._rejectCallback(t,!0),e},j.setScheduler=function(t){if("function"!=typeof t)throw new v("expecting a function but got "+u.classString(t));return g.setScheduler(t)},j.prototype._then=function(t,e,r,n,i){var o=void 0!==i,s=o?i:new j(b),a=this._target(),c=a._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&c)?this._boundValue():a===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var l=p();if(0!=(50397184&c)){var f,h,d=a._settlePromiseCtx;0!=(33554432&c)?(h=a._rejectionHandler0,f=t):0!=(16777216&c)?(h=a._fulfillmentHandler0,f=e,a._unsetRejectionIsUnhandled()):(d=a._settlePromiseLateCancellationObserver,h=new _("late cancellation observer"),a._attachExtraTrace(h),f=e),g.invoke(d,a,{handler:u.contextBind(l,f),promise:s,receiver:n,value:h})}else a._addCallbacks(t,e,s,n,l);return s},j.prototype._length=function(){return 65535&this._bitField},j.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},j.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},j.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},j.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},j.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},j.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},j.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},j.prototype._isFinal=function(){return(4194304&this._bitField)>0},j.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},j.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},j.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},j.prototype._setAsyncGuaranteed=function(){if(!g.hasCustomScheduler()){var t=this._bitField;this._bitField=t|(536870912&t)>>2^134217728}},j.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},j.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==a)return void 0===e&&this._isBound()?this._boundValue():e},j.prototype._promiseAt=function(t){return this[4*t-4+2]},j.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},j.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},j.prototype._boundValue=function(){},j.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,r=t._rejectionHandler0,n=t._promise0,i=t._receiverAt(0);void 0===i&&(i=a),this._addCallbacks(e,r,n,i,null)},j.prototype._migrateCallbackAt=function(t,e){var r=t._fulfillmentHandlerAt(e),n=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=a),this._addCallbacks(r,n,i,o,null)},j.prototype._addCallbacks=function(t,e,r,n,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=r,this._receiver0=n,"function"==typeof t&&(this._fulfillmentHandler0=u.contextBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=u.contextBind(i,e));else{var s=4*o-4;this[s+2]=r,this[s+3]=n,"function"==typeof t&&(this[s+0]=u.contextBind(i,t)),"function"==typeof e&&(this[s+1]=u.contextBind(i,e))}return this._setLength(o+1),o},j.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},j.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(n(),!1);var r=k(t,this);if(!(r instanceof j))return this._fulfill(t);e&&this._propagateFrom(r,2);var i=r._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var s=this._length();s>0&&i._migrateCallback0(this);for(var a=1;a<s;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var u=new _("late cancellation observer");i._attachExtraTrace(u),this._reject(u)}}else this._reject(n())}},j.prototype._rejectCallback=function(t,e,r){var n=u.ensureErrorObject(t),i=n===t;if(!i&&!r&&C.warnings()){var o="a promise was rejected with a non-error: "+u.classString(t);this._warn(o,!0)}this._attachExtraTrace(n,!!e&&i),this._reject(t)},j.prototype._resolveFromExecutor=function(t){if(t!==b){var e=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(t,(function(t){e._resolveCallback(t)}),(function(t){e._rejectCallback(t,r)}));r=!1,this._popContext(),void 0!==n&&e._rejectCallback(n,!0)}},j.prototype._settlePromiseFromHandler=function(t,e,r,n){var i=n._bitField;if(0==(65536&i)){var o;n._pushContext(),e===w?r&&"number"==typeof r.length?o=P(t).apply(this._boundValue(),r):(o=O).e=new v("cannot .spread() a non-array: "+u.classString(r)):o=P(t).call(e,r);var s=n._popContext();0==(65536&(i=n._bitField))&&(o===E?n._reject(r):o===O?n._rejectCallback(o.e,!1):(C.checkForgottenReturns(o,s,"",n,this),n._resolveCallback(o)))}},j.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},j.prototype._followee=function(){return this._rejectionHandler0},j.prototype._setFollowee=function(t){this._rejectionHandler0=t},j.prototype._settlePromise=function(t,e,r,n){var o=t instanceof j,a=this._bitField,u=0!=(134217728&a);0!=(65536&a)?(o&&t._invokeInternalOnCancel(),r instanceof I&&r.isFinallyHandler()?(r.cancelPromise=t,P(e).call(r,n)===O&&t._reject(O.e)):e===i?t._fulfill(i.call(r)):r instanceof s?r._promiseCancelled(t):o||t instanceof A?t._cancel():r.cancel()):"function"==typeof e?o?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,n,t)):e.call(r,n,t):r instanceof s?r._isResolved()||(0!=(33554432&a)?r._promiseFulfilled(n,t):r._promiseRejected(n,t)):o&&(u&&t._setAsyncGuaranteed(),0!=(33554432&a)?t._fulfill(n):t._reject(n))},j.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,r=t.promise,n=t.receiver,i=t.value;"function"==typeof e?r instanceof j?this._settlePromiseFromHandler(e,n,i,r):e.call(n,i,r):r instanceof j&&r._reject(i)},j.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},j.prototype._settlePromise0=function(t,e,r){var n=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,t,i,e)},j.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},j.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var r=n();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():g.settlePromises(this),this._dereferenceTrace())}},j.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return g.fatalError(t,u.isNode);(65535&e)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled()}},j.prototype._fulfillPromises=function(t,e){for(var r=1;r<t;r++){var n=this._fulfillmentHandlerAt(r),i=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,o,e)}},j.prototype._rejectPromises=function(t,e){for(var r=1;r<t;r++){var n=this._rejectionHandlerAt(r),i=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,o,e)}},j.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,t),this._rejectPromises(e,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,t),this._fulfillPromises(e,n)}this._setLength(0)}this._clearCancellationData()},j.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&d.defineProperty(j.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),j.defer=j.pending=function(){return C.deprecated("Promise.defer","new Promise"),{promise:new j(b),resolve:N,reject:D}},u.notEnumerableProp(j,"_makeSelfResolutionError",n),t("./method")(j,b,k,o,C),t("./bind")(j,b,k,C),t("./cancel")(j,A,o,C),t("./direct_resolve")(j),t("./synchronous_inspection")(j),t("./join")(j,A,k,b,g),j.Promise=j,j.version="3.7.1",t("./call_get.js")(j),t("./generators.js")(j,o,b,k,s,C),t("./map.js")(j,A,o,k,b,C),t("./nodeify.js")(j),t("./promisify.js")(j,b),t("./props.js")(j,A,k,o),t("./race.js")(j,b,k,o),t("./reduce.js")(j,A,o,k,b,C),t("./settle.js")(j,A,C),t("./some.js")(j,A,o),t("./timers.js")(j,b,C),t("./using.js")(j,o,k,x,b,C),t("./any.js")(j),t("./each.js")(j,b),t("./filter.js")(j,b),u.toFastProperties(j),u.toFastProperties(j.prototype),L({a:1}),L({b:2}),L({c:3}),L(1),L((function(){})),L(void 0),L(!1),L(new j(b)),C.setBounds(y.firstLineError,u.lastLineError),j}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){var s=t("./util");function a(t){var n=this._promise=new e(r);t instanceof e&&(n._propagateFrom(t,3),t.suppressUnhandledRejections()),n._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.isArray,s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function t(r,o){var a=n(this._values,this._promise);if(a instanceof e){var u=(a=a._target())._bitField;if(this._values=a,0==(50397184&u))return this._promise._setAsyncGuaranteed(),a._then(t,this._reject,void 0,this,o);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var c=i("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(c,!1)}},a.prototype._iterate=function(t){var r=this.getActualLength(t.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var i=this._promise,o=!1,s=null,a=0;a<r;++a){var u=n(t[a],i);s=u instanceof e?(u=u._target())._bitField:null,o?null!==s&&u.suppressUnhandledRejections():null!==s?0==(50397184&s)?(u._proxy(this,a),this._values[a]=u):o=0!=(33554432&s)?this._promiseFulfilled(u._value(),a):0!=(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(u,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var r=0;r<t.length;++r)t[r]instanceof e&&t[r].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,r){"use strict";e.exports=function(e,r){var n={},i=t("./util"),o=t("./nodeback"),s=i.withAppended,a=i.maybeWrapAsError,u=i.canEvaluate,c=t("./errors").TypeError,l={__isPromisified__:!0},f=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),h=function(t){return i.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function p(t){return!f.test(t)}function d(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function y(t,e,r){var n=i.getDataPropertyOrDefault(t,e+r,l);return!!n&&d(n)}function g(t,e,r,n){for(var o=i.inheritedDataKeys(t),s=[],a=0;a<o.length;++a){var u=o[a],l=t[u],f=n===h||h(u,l,t);"function"!=typeof l||d(l)||y(t,u,e)||!n(u,l,t,f)||s.push(u,l)}return function(t,e,r){for(var n=0;n<t.length;n+=2){var i=t[n];if(r.test(i))for(var o=i.replace(r,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(s,e,r),s}var m=function(t){return t.replace(/([$])/,"\\$")},v=u?void 0:function(t,u,c,l,f,h){var p=function(){return this}(),d=t;function y(){var i=u;u===n&&(i=this);var c=new e(r);c._captureStackTrace();var l="string"==typeof d&&this!==p?this[d]:t,f=o(c,h);try{l.apply(i,s(arguments,f))}catch(t){c._rejectCallback(a(t),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof d&&(t=l),i.notEnumerableProp(y,"__isPromisified__",!0),y};function _(t,e,r,o,s){for(var a=new RegExp(m(e)+"$"),u=g(t,e,a,r),c=0,l=u.length;c<l;c+=2){var f=u[c],h=u[c+1],p=f+e;if(o===v)t[p]=v(f,n,f,h,e,s);else{var d=o(h,(function(){return v(f,n,f,h,e,s)}));i.notEnumerableProp(d,"__isPromisified__",!0),t[p]=d}}return i.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new c("expecting a function but got "+i.classString(t));if(d(t))return t;var r=function(t,e,r){return v(t,e,void 0,t,null,r)}(t,void 0===(e=Object(e)).context?n:e.context,!!e.multiArgs);return i.copyDescriptors(t,r,p),r},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var r=!!(e=Object(e)).multiArgs,n=e.suffix;"string"!=typeof n&&(n="Async");var o=e.filter;"function"!=typeof o&&(o=h);var s=e.promisifier;if("function"!=typeof s&&(s=v),!i.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=i.inheritedDataKeys(t),u=0;u<a.length;++u){var l=t[a[u]];"constructor"!==a[u]&&i.isClass(l)&&(_(l.prototype,n,o,s,r),_(l,n,o,s,r))}return _(t,n,o,s,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o,s=t("./util"),a=s.isObject,u=t("./es5");"function"==typeof Map&&(o=Map);var c=function(){var t=0,e=0;function r(r,n){this[t]=r,this[t+e]=n,t++}return function(n){e=n.size,t=0;var i=new Array(2*n.size);return n.forEach(r,i),i}}();function l(t){var e,r=!1;if(void 0!==o&&t instanceof o)e=c(t),r=!0;else{var n=u.keys(t),i=n.length;e=new Array(2*i);for(var s=0;s<i;++s){var a=n[s];e[s]=t[a],e[s+i]=a}}this.constructor$(e),this._isMap=r,this._init$(void 0,r?-6:-3)}function f(t){var r,o=n(t);return a(o)?(r=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new l(o).promise(),o instanceof e&&r._propagateFrom(o,2),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(l,r),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var r;if(this._isMap)r=function(t){for(var e=new o,r=t.length/2|0,n=0;n<r;++n){var i=t[r+n],s=t[n];e.set(i,s)}return e}(this._values);else{r={};for(var n=this.length(),i=0,s=this.length();i<s;++i)r[this._values[i+n]]=this._values[i]}return this._resolve(r),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return f(this)},e.props=function(t){return f(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,r){"use strict";function n(t){this._capacity=t,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(t){return this._capacity<t},n.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},n.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=r,this._length=n},n.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,r,n,i){for(var o=0;o<i;++o)r[o+n]=t[o+e],t[o+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=n},{}],27:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util"),s=function(t){return t.then((function(e){return a(e,t)}))};function a(t,a){var u=n(t);if(u instanceof e)return s(u);if(null===(t=o.asArray(t)))return i("expecting an array or an iterable object but got "+o.classString(t));var c=new e(r);void 0!==a&&c._propagateFrom(a,3);for(var l=c._fulfill,f=c._reject,h=0,p=t.length;h<p;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(l,f,void 0,c,null)}return c}e.race=function(t){return a(t,void 0)},e.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,s){var a=t("./util"),u=a.tryCatch;function c(t,r,n,i){this.constructor$(t);var s=e._getContext();this._fn=a.contextBind(s,r),void 0!==n&&(n=e.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function f(t,e,r,i){return"function"!=typeof e?n("expecting a function but got "+a.classString(e)):new c(t,e,r,i).promise()}function h(t){this.accum=t,this.array._gotAccum(t);var r=i(this.value,this.array._promise);return r instanceof e?(this.array._currentCancellable=r,r._then(p,void 0,void 0,this,void 0)):p.call(this,r)}function p(t){var r,n=this.array,i=n._promise,o=u(n._fn);i._pushContext(),(r=void 0!==n._eachValues?o.call(i._boundValue(),t,this.index,this.length):o.call(i._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(n._currentCancellable=r);var a=i._popContext();return s.checkForgottenReturns(r,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",i),r}a.inherits(c,r),c.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},c.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},c.prototype._init=function(){},c.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},c.prototype.shouldCopyValues=function(){return!1},c.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},c.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},c.prototype._iterate=function(t){var r,n;this._values=t;var i=t.length;void 0!==this._initialValue?(r=this._initialValue,n=0):(r=e.resolve(t[0]),n=1),this._currentCancellable=r;for(var o=n;o<i;++o){var s=t[o];s instanceof e&&s.suppressUnhandledRejections()}if(!r.isRejected())for(;n<i;++n){var a={accum:null,value:t[n],index:n,length:i,array:this};r=r._then(h,void 0,void 0,a,void 0),0==(127&n)&&r._setNoAsyncGuarantee()}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(l,l,void 0,r,this)},e.prototype.reduce=function(t,e){return f(this,t,e,null)},e.reduce=function(t,e,r,n){return f(t,e,r,n)}}},{"./util":36}],29:[function(t,i,o){"use strict";var s,a,u,c,l,f=t("./util"),h=f.getNativePromise();if(f.isNode&&"undefined"==typeof MutationObserver){var p=r.setImmediate,d=e.nextTick;s=f.isRecentNode?function(t){p.call(r,t)}:function(t){d.call(e,t)}}else if("function"==typeof h&&"function"==typeof h.resolve){var y=h.resolve();s=function(t){y.then(t)}}else s="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?(a=document.createElement("div"),u={attributes:!0},c=!1,l=document.createElement("div"),new MutationObserver((function(){a.classList.toggle("foo"),c=!1})).observe(l,u),function(t){var e=new MutationObserver((function(){e.disconnect(),t()}));e.observe(a,u),c||(c=!0,l.classList.toggle("foo"))}):void 0!==n?function(t){n(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};i.exports=s},{"./util":36}],30:[function(t,e,r){"use strict";e.exports=function(e,r,n){var i=e.PromiseInspection;function o(t){this.constructor$(t)}t("./util").inherits(o,r),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var r=new i;return r._bitField=33554432,r._settledValueField=t,this._promiseResolved(e,r)},o.prototype._promiseRejected=function(t,e){var r=new i;return r._bitField=16777216,r._settledValueField=t,this._promiseResolved(e,r)},e.settle=function(t){return n.deprecated(".settle()",".reflect()"),new o(t).promise()},e.allSettled=function(t){return new o(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,r){"use strict";e.exports=function(e,r,n){var i=t("./util"),o=t("./errors").RangeError,s=t("./errors").AggregateError,a=i.isArray,u={};function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(t,e){if((0|e)!==e||e<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new c(t),i=r.promise();return r.setHowMany(e),r.init(),i}i.inherits(c,r),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=a(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new s,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return l(t,e)},e.prototype.some=function(t){return l(this,t)},e._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var r=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return r.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),n.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,r){"use strict";e.exports=function(e,r){var n=t("./util"),i=n.errorObj,o=n.isObject,s={}.hasOwnProperty;return function(t,a){if(o(t)){if(t instanceof e)return t;var u=function(t){try{return function(t){return t.then}(t)}catch(t){return i.e=t,i}}(t);if(u===i){a&&a._pushContext();var c=e.reject(u.e);return a&&a._popContext(),c}if("function"==typeof u)return function(t){try{return s.call(t,"_promise0")}catch(t){return!1}}(t)?(c=new e(r),t._then(c._fulfill,c._reject,void 0,c,null),c):function(t,o,s){var a=new e(r),u=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var c=!0,l=n.tryCatch(o).call(t,(function(t){a&&(a._resolveCallback(t),a=null)}),(function(t){a&&(a._rejectCallback(t,c,!0),a=null)}));return c=!1,a&&l===i&&(a._rejectCallback(l.e,!0,!0),a=null),u}(t,u,a)}return t}}},{"./util":36}],34:[function(t,e,r){"use strict";e.exports=function(e,r,n){var i=t("./util"),o=e.TimeoutError;function s(t){this.handle=t}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,i){var o,u;return void 0!==i?(o=e.resolve(i)._then(a,null,null,t,void 0),n.cancellation()&&i instanceof e&&o._setOnCancel(i)):(o=new e(r),u=setTimeout((function(){o._fulfill()}),+t),n.cancellation()&&o._setOnCancel(new s(u)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function c(t){return clearTimeout(this.handle),t}function l(t){throw clearTimeout(this.handle),t}e.prototype.delay=function(t){return u(t,this)},e.prototype.timeout=function(t,e){var r,a;t=+t;var u=new s(setTimeout((function(){r.isPending()&&function(t,e,r){var n;n="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),i.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._reject(n),null!=r&&r.cancel()}(r,e,a)}),t));return n.cancellation()?(a=this.then(),(r=a._then(c,l,void 0,u,void 0))._setOnCancel(u)):r=this._then(c,l,void 0,u,void 0),r}}},{"./util":36}],35:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o,s){var a=t("./util"),u=t("./errors").TypeError,c=t("./util").inherits,l=a.errorObj,f=a.tryCatch,h={};function p(t){setTimeout((function(){throw t}),0)}function d(t,r){var i=0,s=t.length,a=new e(o);return function o(){if(i>=s)return a._fulfill();var u=function(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[i++]);if(u instanceof e&&u._isDisposable()){try{u=n(u._getDisposer().tryDispose(r),t.promise)}catch(t){return p(t)}if(u instanceof e)return u._then(o,p,null,null,null)}o()}(),a}function y(t,e,r){this._data=t,this._promise=e,this._context=r}function g(t,e,r){this.constructor$(t,e,r)}function m(t){return y.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function v(t){this.length=t,this.promise=null,this[t-1]=null}y.prototype.data=function(){return this._data},y.prototype.promise=function(){return this._promise},y.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():h},y.prototype.tryDispose=function(t){var e=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=e!==h?this.doDispose(e,t):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},y.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},c(g,y),g.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},v.prototype._resultCancelled=function(){for(var t=this.length,r=0;r<t;++r){var n=this[r];n instanceof e&&n.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return r("you must pass at least 2 arguments to Promise.using");var i,o=arguments[t-1];if("function"!=typeof o)return r("expecting a function but got "+a.classString(o));var u=!0;2===t&&Array.isArray(arguments[0])?(t=(i=arguments[0]).length,u=!1):(i=arguments,t--);for(var c=new v(t),h=0;h<t;++h){var p=i[h];if(y.isDisposer(p)){var g=p;(p=p.promise())._setDisposable(g)}else{var _=n(p);_ instanceof e&&(p=_._then(m,null,null,{resources:c,index:h},void 0))}c[h]=p}var b=new Array(c.length);for(h=0;h<b.length;++h)b[h]=e.resolve(c[h]).reflect();var w=e.all(b).then((function(t){for(var e=0;e<t.length;++e){var r=t[e];if(r.isRejected())return l.e=r.error(),l;if(!r.isFulfilled())return void w.cancel();t[e]=r.value()}E._pushContext(),o=f(o);var n=u?o.apply(void 0,t):o(t),i=E._popContext();return s.checkForgottenReturns(n,i,"Promise.using",E),n})),E=w.lastly((function(){var t=new e.PromiseInspection(w);return d(c,t)}));return c.promise=E,E._setOnCancel(c),E},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new g(t,this,i());throw new u}}},{"./errors":12,"./util":36}],36:[function(t,n,i){"use strict";var o=t("./es5"),s="undefined"==typeof navigator,a={e:{}},u,c="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:void 0!==this?this:null;function l(){try{var t=u;return u=null,t.apply(this,arguments)}catch(t){return a.e=t,a}}function f(t){return u=t,l}var h=function(t,e){var r={}.hasOwnProperty;function n(){for(var n in this.constructor=t,this.constructor$=e,e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}return n.prototype=e.prototype,t.prototype=new n,t.prototype};function p(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function d(t){return"function"==typeof t||"object"==typeof t&&null!==t}function y(t){return p(t)?new Error(C(t)):t}function g(t,e){var r,n=t.length,i=new Array(n+1);for(r=0;r<n;++r)i[r]=t[r];return i[r]=e,i}function m(t,e,r){if(!o.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function v(t,e,r){if(p(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(t,e,n),t}function _(t){throw t}var b=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var r=0;r<t.length;++r)if(t[r]===e)return!0;return!1};if(o.isES5){var r=Object.getOwnPropertyNames;return function(t){for(var n=[],i=Object.create(null);null!=t&&!e(t);){var s;try{s=r(t)}catch(t){return n}for(var a=0;a<s.length;++a){var u=s[a];if(!i[u]){i[u]=!0;var c=Object.getOwnPropertyDescriptor(t,u);null!=c&&null==c.get&&null==c.set&&n.push(u)}}t=o.getPrototypeOf(t)}return n}}var n={}.hasOwnProperty;return function(r){if(e(r))return[];var i=[];t:for(var o in r)if(n.call(r,o))i.push(o);else{for(var s=0;s<t.length;++s)if(n.call(t[s],o))continue t;i.push(o)}return i}}(),w=/this\s*\.\s*\S+\s*=/;function E(t){try{if("function"==typeof t){var e=o.names(t.prototype),r=o.isES5&&e.length>1,n=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=w.test(t+"")&&o.names(t).length>0;if(r||n||i)return!0}return!1}catch(t){return!1}}function k(t){function e(){}e.prototype=t;var r=new e;function n(){return typeof r.foo}return n(),n(),t}var A=/^[a-z$_][a-z$_0-9]*$/i;function S(t){return A.test(t)}function x(t,e,r){for(var n=new Array(t),i=0;i<t;++i)n[i]=e+i+r;return n}function C(t){try{return t+""}catch(t){return"[no string representation]"}}function I(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function T(t){try{v(t,"isOperational",!0)}catch(t){}}function R(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function O(t){return I(t)&&o.propertyIsWritable(t,"stack")}var P="stack"in new Error?function(t){return O(t)?t:new Error(C(t))}:function(t){if(O(t))return t;try{throw new Error(C(t))}catch(t){return t}};function j(t){return{}.toString.call(t)}function N(t,e,r){for(var n=o.names(t),i=0;i<n.length;++i){var s=n[i];if(r(s))try{o.defineProperty(e,s,o.getDescriptor(t,s))}catch(t){}}}var D=function(t){return o.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var L="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,r=[],n=t[Symbol.iterator]();!(e=n.next()).done;)r.push(e.value);return r};D=function(t){return o.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?L(t):null}}var F=void 0!==e&&"[object process]"===j(e).toLowerCase(),B=void 0!==e&&void 0!==e.env,U;function M(t){return B?e.env[t]:void 0}function q(){if("function"==typeof Promise)try{if("[object Promise]"===j(new Promise((function(){}))))return Promise}catch(t){}}function V(t,e){if(null===t||"function"!=typeof e||e===U)return e;null!==t.domain&&(e=t.domain.bind(e));var r=t.async;if(null!==r){var n=e;e=function(){var t=new Array(2).concat([].slice.call(arguments));return t[0]=n,t[1]=this,r.runInAsyncScope.apply(r,t)}}return e}var H={setReflectHandler:function(t){U=t},isClass:E,isIdentifier:S,inheritedDataKeys:b,getDataPropertyOrDefault:m,thrower:_,isArray:o.isArray,asArray:D,notEnumerableProp:v,isPrimitive:p,isObject:d,isError:I,canEvaluate:s,errorObj:a,tryCatch:f,inherits:h,withAppended:g,maybeWrapAsError:y,toFastProperties:k,filledRange:x,toString:C,canAttachTrace:O,ensureErrorObject:P,originatesFromRejection:R,markAsOriginatingFromRejection:T,classString:j,copyDescriptors:N,isNode:F,hasEnvVariables:B,env:M,global:c,getNativePromise:q,contextBind:V},z;H.isRecentNode=H.isNode&&(e.versions&&e.versions.node?z=e.versions.node.split(".").map(Number):e.version&&(z=e.version.split(".").map(Number)),0===z[0]&&z[1]>10||z[0]>0),H.nodeSupportsAsyncResource=H.isNode&&function(){var e=!1;try{e="function"==typeof t("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(t){e=!1}return e}(),H.isNode&&H.toFastProperties(e);try{throw new Error}catch(t){H.lastLineError=t}n.exports=H},{"./es5":13,async_hooks:void 0}]},{},[4])(4)},t.exports=i(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,r(13),r(10),r(56).setImmediate)},function(t,e,r){(function(t){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,r(0).Buffer)},function(t,e,r){(function(e){const n=r(1).sign,i=r(16),{RCD_TYPE_1:o,encodeVarInt:s,sha256:a,sha256d:u,flatMap:c}=r(7),{MAX_TRANSACTION_SIZE:l}=r(18),{isValidFctAddress:f,isValidPublicAddress:h,getPublicAddress:p,addressToKey:d,addressToRcdHash:y}=r(6);class g{constructor(t,e){if(!h(t))throw new TypeError("Address must be a valid Factoid or EntryCredit public address.");!function(t){if(!Number.isSafeInteger(t))throw new Error("Amount must be a safe integer (less than 2^53 - 1).");if(t<0)throw new Error("Amount must be a positive number.")}(e),this.address=t,this.amount=e,Object.freeze(this)}marshalBinary(){return e.concat([s(this.amount),e.from(i.decode(this.address).slice(2,34))])}}class m{constructor(t,r){if(t instanceof v)this.timestamp=t._timestamp||Date.now(),this.inputs=t._inputs,this.factoidOutputs=t._factoidOutputs,this.entryCreditOutputs=t._entryCreditOutputs,this.blockContext=r,this.marshalBinarySig=function(t,r,n,i){const o=e.alloc(10);o.writeInt8(2),o.writeIntBE(t,1,6),o.writeInt8(r.length,7),o.writeInt8(n.length,8),o.writeInt8(i.length,9);const s=r.map(t=>t.marshalBinary()),a=n.map(t=>t.marshalBinary()),u=i.map(t=>t.marshalBinary());return e.concat([o,...s,...a,...u])}(this.timestamp,this.inputs,this.factoidOutputs,this.entryCreditOutputs),this.id=a(this.marshalBinarySig).toString("hex"),0!==t._keys.length?(this.rcds=t._keys.map(t=>e.concat([o,e.from(t.publicKey)])),this.signatures=t._keys.map(t=>e.from(n.detached(this.marshalBinarySig,t.secretKey)))):(this.rcds=t._rcds,this.signatures=t._signatures,0!==this.rcds.length&&0!==this.signatures.length&&(function(t,e){if(e.length!==t.length)throw new Error(`The number of RCDs (${e.length}) does not equal the number of inputs (${t.length}).`);for(let r=0;r<e.length;++r)_(t[r],e[r])}(this.inputs,this.rcds),function(t,e,r){if(e.length!==r.length)throw new Error(`The number of RCDs (${e.length}) does not equal the number of signatures (${r.length})`);for(let n=0;n<r.length;++n)b(t,e[n],r[n])}(this.marshalBinarySig,this.rcds,this.signatures)));else{if("object"!=typeof t)throw new Error("Use `Transaction.builder()` syntax to create a new Transaction.");this.id=t.txid,this.timestamp=t.millitimestamp,this.inputs=t.inputs.map(t=>new g(t.useraddress,t.amount)),this.factoidOutputs=t.outputs.map(t=>new g(t.useraddress,t.amount)),this.entryCreditOutputs=t.outecs.map(t=>new g(t.useraddress,t.amount)),this.rcds=t.rcds.map(t=>e.from(t,"hex")),this.signatures=c(t.sigblocks,t=>t.signatures).map(t=>e.from(t,"hex")),this.blockContext=r}if(0!==this.signatures.length&&this.inputs.length!==this.signatures.length)throw new Error("All inputs must be signed or none of them.");this.totalInputs=this.inputs.reduce((t,e)=>t+e.amount,0),this.totalFactoidOutputs=this.factoidOutputs.reduce((t,e)=>t+e.amount,0),this.totalEntryCreditOutputs=this.entryCreditOutputs.reduce((t,e)=>t+e.amount,0);const i=this.totalFactoidOutputs+this.totalEntryCreditOutputs;if(!Number.isSafeInteger(this.totalInputs)||!Number.isSafeInteger(i))throw new Error("Total inputs/outputs are not safe integers (too big to be handled by the library).");if(0===this.totalInputs)this.feesPaid=0;else{if(!(this.totalInputs>=i))throw new Error(`Sum of Transaction outputs (${i}) is greater than the sum of inputs (${this.totalInputs})`);this.feesPaid=this.totalInputs-i}Object.freeze(this)}isSigned(){return 0!==this.signatures.length}validateFees(t){return this.computeRequiredFees(t)<=this.feesPaid}computeRequiredFees(t,e){return this.computeEcRequiredFees(e)*t}computeEcRequiredFees(t){const e=t||{};let r,n;if(this.isSigned())r=this.marshalBinary().length,n=this.signatures.length;else if("number"==typeof e.rcdSignatureLength&&"number"==typeof e.numberOfSignatures)r=this.marshalBinarySig.length+e.rcdSignatureLength,n=e.numberOfSignatures;else{if(1!==e.rcdType)throw new Error("Missing parameters to compute fees of unsigned transaction.");r=this.marshalBinarySig.length+97*this.inputs.length,n=this.inputs.length}if(r>l)throw new Error(`Transaction size is bigger than the maximum (${l} bytes).`);let i=Math.floor((r+1023)/1024);return i+=10*(this.factoidOutputs.length+this.entryCreditOutputs.length),i+=n}marshalBinary(){if(!this.isSigned())throw new Error("Cannot marshal an unsigned Transaction.");const t=[this.marshalBinarySig];for(let e=0;e<this.rcds.length;++e)t.push(this.rcds[e]),t.push(this.signatures[e]);return e.concat(t)}static builder(t){return new v(t)}}class v{constructor(t){this._timestamp,this._inputs=[],this._factoidOutputs=[],this._entryCreditOutputs=[],this._keys=[],this._rcds=[],this._signatures=[],t instanceof m&&(this._timestamp=t.timestamp,this._inputs=t.inputs,this._factoidOutputs=t.factoidOutputs,this._entryCreditOutputs=t.entryCreditOutputs)}input(t,e){if(!f(t))throw new TypeError("First argument must be a valid Factoid address.");if(this._inputs.push(new g(p(t),e)),"s"===t[1]){const e=d(t),r=n.keyPair.fromSeed(e);this._keys.push(r)}return this}output(t,e){const r=new g(t,e);return"F"===t[0]?this._factoidOutputs.push(r):this._entryCreditOutputs.push(r),this}rcdSignature(t,r){return this._rcds.push(e.from(t,"hex")),this._signatures.push(e.from(r,"hex")),this}timestamp(t){return this._timestamp=t,this}build(){return new m(this)}}function _(t,e){if(!u(e).equals(y(t.address)))throw new Error(`RCD does not match the RCD hash from input address ${t.address}.`)}function b(t,r,i){if(1!==r[0])throw new Error(`Only RCD type 1 is currently supported. Invalid RCD: ${r}.`);const o=e.from(r,1).slice(1);if(!n.detached.verify(t,i,o))throw new Error("Signature of Transaction is invalid.")}t.exports={Transaction:m}}).call(this,r(0).Buffer)},function(t,e,r){(function(e){const n=r(1).sign,{addressToKey:i,isValidPrivateEcAddress:o,isValidPublicEcAddress:s}=r(6),{MAX_ENTRY_PAYLOAD_SIZE:a}=r(18),{sha256:u,sha512:c}=r(7);class l{constructor(t){if(!(t instanceof f))throw new Error("Use `Entry.builder()` syntax to create a new Entry");this.chainId=t._chainId,this.content=t._content,this.timestamp=t._timestamp,this.extIds=Object.freeze(t._extIds),this.blockContext=Object.freeze(t._blockContext),Object.freeze(this)}get chainIdHex(){return this.chainId.toString("hex")}get contentHex(){return this.content.toString("hex")}get extIdsHex(){return this.extIds.map(t=>t.toString("hex"))}size(){return 35+this.payloadSize()}payloadSize(){return this.rawDataSize()+2*this.extIds.length}rawDataSize(){return this.content.length+this.extIds.reduce((t,e)=>t+e.length,0)}remainingFreeBytes(){const t=this.payloadSize();if(0===t)return 1024;const e=t%1024;return e?1024-e:0}remainingMaxBytes(){const t=a-this.payloadSize();if(t<0)throw new Error("Entry cannot be larger than 10Kb");return t}hash(){const t=this.marshalBinary();return u(e.concat([c(t),t]))}hashHex(){return this.hash().toString("hex")}marshalBinary(){if(0===this.chainId.length)throw new Error("ChainId is missing to marshal the entry");const t=function(t){const r=[];for(let n of t){const t=e.alloc(2);t.writeInt16BE(n.length),r.push(t),r.push(n)}return e.concat(r)}(this.extIds),r=function(t,r){const n=e.alloc(35);return n.writeInt8(0),t.copy(n,1),n.writeInt16BE(r,33),n}(this.chainId,t.length);return e.concat([r,t,this.content])}marshalBinaryHex(){return this.marshalBinary().toString("hex")}ecCost(){const t=this.payloadSize();if(t>a)throw new Error("Entry cannot be larger than 10Kb");return Math.ceil(t/1024)}toObject(){const t={chainId:this.chainIdHex,extIds:this.extIdsHex,content:this.contentHex};return this.timestamp&&(t.timestamp=this.timestamp),t}static builder(t){return new f(t)}}class f{constructor(t){t instanceof Object?(this._chainId=t.chainId?e.from(t.chainId,"hex"):e.from(""),this._extIds=Array.isArray(t.extIds)?t.extIds.map(t=>e.from(t,"hex")):[],this._content=t.content?e.from(t.content,"hex"):e.from(""),this._timestamp=t.timestamp):(this._extIds=[],this._content=e.from(""),this._chainId=e.from(""))}content(t,r){return t&&(this._content=e.from(t,r||"hex")),this}chainId(t,r){return t&&(this._chainId=e.from(t,r||"hex")),this}extIds(t,r){return Array.isArray(t)&&(this._extIds=t.map(t=>e.from(t,r||"hex"))),this}extId(t,r){return t&&this._extIds.push(e.from(t,r||"hex")),this}timestamp(t){return this._timestamp=t,this}blockContext(t){return this._blockContext=t,this}build(){return new l(this)}}function h(t,r,a){g(t);const u=d(t);let c,l;if(o(r)){const t=i(r),o=n.keyPair.fromSeed(t);c=e.from(o.publicKey),l=e.from(n.detached(u,o.secretKey))}else{if(!s(r))throw new Error(`${r} is not a valid EC address`);if(!a)throw new Error("Signature of the commit missing.");if(console.warn("composeEntryCommit with signature is deprecated. Use composeEntryCommitDelegateSig."),c=i(r),l=e.from(a,"hex"),!n.detached.verify(u,l,c))throw new Error("Invalid signature manually provided for the entry commit. (entry timestamp not fixed?)")}return e.concat([u,c,l])}async function p(t,r,o){if(g(t),!s(r))throw new Error(`${r} is not a valid public EC address`);if("function"!=typeof o)throw new Error("sign must be a function");const a=d(t),u=e.from(await o(a,r),"hex"),c=i(r);if(!n.detached.verify(a,u,c))throw new Error("Invalid signature returned by the signing function for the entry commit.");return e.concat([a,c,u])}function d(t){g(t);const r=e.alloc(40);return r.writeInt8(0),r.writeIntBE(t.timestamp||Date.now(),1,6),t.hash().copy(r,7),r.writeInt8(t.ecCost(),39),r}function y(t){return g(t),t.marshalBinary()}function g(t){if(!(t instanceof l))throw new Error("Argument must be an instance of Entry")}t.exports={Entry:l,computeEntryTxId:function(t){return g(t),u(d(t))},validateEntryInstance:g,composeEntryCommit:h,composeEntryCommitDelegateSig:p,composeEntryReveal:y,composeEntry:function(t,e,r){return{commit:h(t,e,r),reveal:y(t)}},composeEntryDelegateSig:async function(t,e,r){return{commit:await p(t,e,r),reveal:y(t)}},composeEntryLedger:d}}).call(this,r(0).Buffer)},function(t,e,r){"use strict";var n=r(2),i=n(r(27)),o=n(r(28)),s=n(r(3)),a=n(r(4)),u=r(48),c=r(5),l=r(61),f=r(14)({strict:!0}),h=r(9),p=r(71).extend(r(72)),d=r(6),y=r(134),g=["get-daemon-properties","get-daemon-tokens","get-sync-status"],m=function(){function t(){(0,s.default)(this,t),this._protocol="http"}return(0,a.default)(t,[{key:"host",value:function(t){if("string"!=typeof t||0===t.length)throw new Error("Host must be a string with length >=1 and contain no special characters");return this._host=t,this}},{key:"port",value:function(t){if(isNaN(t)||!Number.isInteger(t)||t<0)throw new Error("Port must be an integer >= 0");return this._port=t,this}},{key:"timeout",value:function(t){return this._timeout=t,this}},{key:"secure",value:function(t){if("boolean"!=typeof t)throw new Error("Argument must be a boolean");return this._secure=t,this}},{key:"protocol",value:function(t){if("http"!==t&&"https"!==t)throw new Error("Invalid protocol string");return this._protocol=t,this}},{key:"username",value:function(t){if("string"!=typeof t)throw new Error("Username must be a string");if(0===t.length)throw new Error("Username must be at least one character long");return this._username=t,this}},{key:"password",value:function(t){if("string"!=typeof t)throw new Error("Password must be a string");if(0===t.length)throw new Error("Password must be at least one character long");return this._password=t,this}},{key:"pending",value:function(t){if("boolean"!=typeof t)throw new Error("Argument pending must be a boolean");return this._pending=t,this}},{key:"build",value:function(){if(this._username&&!this._password||this._password&&!this._username)throw new Error("You must specify both a username and password for basic authentication");return new v(this)}}]),t}(),v=function(){function t(e){if((0,s.default)(this,t),!(e instanceof m))throw new Error("Must include an cli builder");this._host=e._host||"localhost",this._port=e._port||8078,this._username=e._username,this._password=e._password,this._secure=e._secure,this._protocol=e._protocol,this._timeout=e._timeout||5e3,this._pending=e._pending,this._axios=l.create({baseURL:this._protocol+"://"+this._host+":"+this._port+"/v1",timeout:this._timeout,auth:this._username&&this._password?{username:this._username,password:this._password}:void 0,httpsAgent:this._secure?void 0:new u.Agent({rejectUnauthorized:!1})})}var e,r,n,p;return(0,a.default)(t,[{key:"call",value:(p=(0,o.default)(i.default.mark((function t(e,r){var n,o;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._pending&&!g.includes(e)&&(r.includepending=!0),t.next=3,this._axios.post("/",{jsonrpc:"2.0",id:Math.floor(1e4*Math.random()),method:e,params:r},{transformResponse:[function(t){try{return f.parse(t)}catch(e){return console.error("Invalid Non-JSON API Response: ",t),{}}}]});case 3:if(n=t.sent,void 0===(o=n.data).error){t.next=7;break}throw new Error(JSON.stringify(o.error));case 7:return t.abrupt("return",o.result);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return p.apply(this,arguments)})},{key:"getTokenCLI",value:(n=(0,o.default)(i.default.mark((function t(e,r){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r,t.next=t.t0===c.FAT0?3:t.t0===c.FAT1?4:5;break;case 3:return t.abrupt("return",new E(this,e));case 4:return t.abrupt("return",new k(this,e));case 5:return t.next=7,new b(this,e).getIssuance();case 7:return n=t.sent,t.abrupt("return",this.getTokenCLI(e,n.issuance.type));case 9:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"getTokenCLISync",value:function(t,e){switch(e){case c.FAT0:return new E(this,t);case c.FAT1:return new k(this,t);default:throw new Error("Invalid FAT type string: "+e)}}},{key:"getTrackedTokens",value:function(){return this.call("get-daemon-tokens")}},{key:"getDaemonProperties",value:function(){return this.call("get-daemon-properties")}},{key:"getSyncStatus",value:function(){return this.call("get-sync-status")}},{key:"getBalances",value:(r=(0,o.default)(i.default.mark((function t(e){var r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d.isValidPublicFctAddress(e)){t.next=2;break}throw new Error("Invalid public Factoid address");case 2:return t.next=4,this.call("get-balances",{address:e});case 4:return r=t.sent,Object.keys(r).forEach((function(t){return r[t]=new h(r[t])})),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"getCompatibility",value:(e=(0,o.default)(i.default.mark((function t(){var e,r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._axios.post("/",{jsonrpc:"2.0",id:Math.floor(1e4*Math.random()),method:"get-daemon-properties"});case 2:if(e=t.sent,void 0===(r=e.data).error){t.next=6;break}throw new Error(JSON.stringify(r.error));case 6:return t.abrupt("return",y.getVersionCompatibility(e.headers["fatd-version"]));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),_=p.object().keys({entryhash:p.string().length(64),addresses:p.array().items(p.factom().factoidAddress("public")),page:p.number().integer().min(0),limit:p.number().integer().min(0),order:p.string().valid(["asc","desc"])}),b=function(){function t(e,r){if((0,s.default)(this,t),!(e instanceof v))throw new Error("Must include an RPc object of type CLI");if(this._cli=e,!r||64!==r.length)throw new Error("You must include a valid token chain ID to construct BaseTokenCLI");this._tokenChainId=r}var e,r;return(0,a.default)(t,[{key:"getCLI",value:function(){return this._cli}},{key:"getChainId",value:function(){return this._tokenChainId}},{key:"getIssuance",value:function(){return this._cli.call("get-issuance",w(this))}},{key:"getTransaction",value:function(t){if(64!==t.length)throw new Error("You must include a valid 32 Byte tx ID (entryhash)");return this._cli.call("get-transaction",w(this,{entryhash:t}))}},{key:"getTransactions",value:function(t){var e=p.validate(t,_);if(e.error)throw new Error("Params validation error - "+e.error.details[0].message);if(t&&t.addresses&&!t.addresses.every(d.isValidPublicFctAddress))throw new Error("At least one of the Factoid addresses is invalid.");return this._cli.call("get-transactions",w(this,t))}},{key:"getBalance",value:(r=(0,o.default)(i.default.mark((function t(e){var r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d.isValidPublicFctAddress(e)){t.next=2;break}throw new Error("You must include a valid public Factoid address");case 2:return t.next=4,this._cli.call("get-balance",w(this,{address:e}));case 4:return r=t.sent,t.abrupt("return",new h(r));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"getStats",value:(e=(0,o.default)(i.default.mark((function t(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._cli.call("get-stats",w(this));case 2:return(e=t.sent).circulating=new h(e.circulating),e.burned=new h(e.burned),e.transactions=new h(e.transactions),e.nonzerobalances=new h(e.nonzerobalances),t.abrupt("return",e);case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"sendTransaction",value:function(t){var e=t.getEntry(),r={chainid:this._tokenChainId,extids:e.extIdsHex,content:e.content.toString("hex")};return this._cli.call("send-transaction",w(this,r))}}]),t}();function w(t,e){return Object.assign({chainid:t._tokenChainId},e)}t.exports={CLIBuilder:m,BaseTokenCLI:b};var E=r(136).CLI,k=r(149).CLI;r(150).CLI},function(t,e,r){t.exports=r(87)},function(t,e){function r(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function a(t){r(s,i,o,a,u,"next",t)}function u(t){r(s,i,o,a,u,"throw",t)}a(void 0)}))}}},function(t,e,r){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,r(13))},function(t,e,r){var n=r(0),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),o(i,s),s.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){"use strict";var n=r(32),i=r(74),o=r(129),s=r(33),a=n.sum32,u=n.sum32_4,c=n.sum32_5,l=o.ch32,f=o.maj32,h=o.s0_256,p=o.s1_256,d=o.g0_256,y=o.g1_256,g=i.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}n.inherits(v,g),t.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=u(y(r[n-2]),r[n-7],d(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],g=this.h[2],m=this.h[3],v=this.h[4],_=this.h[5],b=this.h[6],w=this.h[7];for(s(this.k.length===r.length),n=0;n<r.length;n++){var E=c(w,p(v),l(v,_,b),this.k[n],r[n]),k=a(h(i),f(i,o,g));w=b,b=_,_=v,v=a(m,E),m=g,g=o,o=i,i=a(E,k)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],m),this.h[4]=a(this.h[4],v),this.h[5]=a(this.h[5],_),this.h[6]=a(this.h[6],b),this.h[7]=a(this.h[7],w)},v.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(33),i=r(15);function o(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function s(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function u(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):o(t,i)?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},e.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=a(t[r].toString(16));return e},e.htonl=s,e.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=s(i)),r+=u(i.toString(16))}return r},e.zero2=a,e.zero8=u,e.join32=function(t,e,r,i){var o=r-e;n(o%4==0);for(var s=new Array(o/4),a=0,u=e;a<s.length;a++,u+=4){var c;c="big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],s[a]=c>>>0}return s},e.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,r){return t+e+r>>>0},e.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},e.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},e.sum64=function(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,s=(o<n?1:0)+r+i;t[e]=s>>>0,t[e+1]=o},e.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},e.sum64_lo=function(t,e,r,n){return e+n>>>0},e.sum64_4_hi=function(t,e,r,n,i,o,s,a){var u=0,c=e;return u+=(c=c+n>>>0)<e?1:0,u+=(c=c+o>>>0)<o?1:0,t+r+i+s+(u+=(c=c+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,r,n,i,o,s,a){return e+n+o+a>>>0},e.sum64_5_hi=function(t,e,r,n,i,o,s,a,u,c){var l=0,f=e;return l+=(f=f+n>>>0)<e?1:0,l+=(f=f+o>>>0)<o?1:0,l+=(f=f+a>>>0)<a?1:0,t+r+i+s+u+(l+=(f=f+c>>>0)<c?1:0)>>>0},e.sum64_5_lo=function(t,e,r,n,i,o,s,a,u,c){return e+n+o+a+c>>>0},e.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},e.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},e.shr64_hi=function(t,e,r){return t>>>r},e.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0}},function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=r,r.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(e)}t.exports=r},function(t,e,r){"use strict";(function(e){var n=r(2),i=n(r(3)),o=n(r(4)),s=r(5),a=r(1).sign,u=r(19).Entry,c=r(7),l=r(11),f=r(78),h=r(14)({strict:!0}),p=r(9),d=function(){function t(r){var n=this;if((0,i.default)(this,t),r instanceof f){this._inputs=r._inputs,this._outputs=r._outputs,this._metadata=r._metadata,this._content=h.stringify({inputs:this._inputs,outputs:this._outputs,metadata:this._metadata});var o=Math.round((new Date).getTime()/1e3);if(this._timestamp=o,this._extIds=[o.toString()],this._tokenChainId=r._tokenChainId,void 0!==r._signatures){if(Object.keys(this._inputs).find((function(t){return t===s.COINBASE_ADDRESS_PUBLIC}))?this._rcds=[e.concat([s.RCD_TYPE_1,e.from(r._id1)])]:this._rcds=r._keys.map((function(t){return e.concat([s.RCD_TYPE_1,e.from(t.publicKey)])})),this._rcds.length!==r._signatures.length)throw new Error("Missmatch between public keys and the number of signatures provided");this._timestamp=r._timestamp,this._signatures=r._signatures,this._extIds=[this._timestamp.toString()];for(var u=0;u<this._rcds.length;u++)this._extIds.push(this._rcds[u]),this._extIds.push(this._signatures[u])}else if(Object.keys(this._inputs).find((function(t){return t===s.COINBASE_ADDRESS_PUBLIC})))if(void 0!==r._sk1){var d=e.from("0"),y=e.from(o.toString()),g=e.from(r._tokenChainId,"hex"),m=e.from(this._content),v=a.keyPair.fromSeed(l.extractSecretFromIdentityKey(r._sk1));this._rcds=[e.concat([s.RCD_TYPE_1,e.from(v.publicKey)])],this._signatures=[a.detached(c.sha512(e.concat([d,y,g,m])),v.secretKey)],this._extIds.push(this._rcds[0]),this._extIds.push(this._signatures[0])}else{if(void 0===r._id1)throw new Error("You must include a valid SK1 Key to sign a coinbase transaction, or an ID1 Key to externally sign coinbase transaction.");this._id1=r._id1,this._signatures=[void 0]}else{var _=0,b=!0;if(this._signatures=r._keys.map((function(t){var i=e.from(_.toString()),s=e.from(o.toString()),u=e.from(r._tokenChainId,"hex"),l=e.from(n._content);if(_++,void 0!==t.secretKey)return a.detached(c.sha512(e.concat([i,s,u,l])),t.secretKey);b=!1})),b){this._rcds=r._keys.map((function(t){return e.concat([s.RCD_TYPE_1,e.from(t.publicKey)])}));for(var w=0;w<this._rcds.length;w++)this._extIds.push(this._rcds[w]),this._extIds.push(this._signatures[w])}else this._keys=r._keys}}else{if(!r.data.inputs)throw new Error("Valid FAT-0 transactions must include inputs");if(Object.keys(r.data.inputs).forEach((function(t){r.data.inputs[t]=new p(r.data.inputs[t])})),this._inputs=r.data.inputs,!r.data.outputs)throw new Error("Valid FAT-0 transactions must include outputs");Object.keys(r.data.outputs).forEach((function(t){r.data.outputs[t]=new p(r.data.outputs[t])})),this._outputs=r.data.outputs,this._metadata=r.data.metadata,this._entryhash=r.entryhash,this._timestamp=r.timestamp,this._pending=r.pending}Object.freeze(this)}return(0,o.default)(t,[{key:"getInputs",value:function(){return this._inputs}},{key:"getOutputs",value:function(){return this._outputs}},{key:"getMetadata",value:function(){return this._metadata}},{key:"isCoinbase",value:function(){return void 0!==Object.keys(this._inputs).find((function(t){return t===s.COINBASE_ADDRESS_PUBLIC}))}},{key:"getEntry",value:function(){if(!this._tokenChainId)throw new Error("Can only get a valid Factom entry for a transaction built using TransactionBuilder");return u.builder().chainId(this._tokenChainId).extIds(this._extIds,"utf8").content(this._content,"utf8").build()}},{key:"getChainId",value:function(){return this._tokenChainId}},{key:"getEntryhash",value:function(){return this._entryhash}},{key:"getTimestamp",value:function(){return this._timestamp}},{key:"getPending",value:function(){return this._pending||!1}},{key:"getMarshalDataSig",value:function(t){return function(t,r){var n=e.from(r.toString()),i=e.from(t._timestamp.toString()),o=e.from(t._tokenChainId,"hex"),s=e.from(t._content);return e.concat([n,i,o,s])}(this,t)}},{key:"validateSignatures",value:function(){if(this._signatures.length!==this._rcds.length)throw new Error("Invalid number of signatures to inputs");for(var t=0;t<this._rcds.length;++t)if(!a.detached.verify(c.sha512(this.getMarshalDataSig(t)),this._signatures[t],e.from(this._rcds[t],1).slice(1)))throw new Error("Invalid Transaction Signature for input "+t.toString());return!0}}]),t}();t.exports=d}).call(this,r(0).Buffer)},function(t,e,r){"use strict";(function(e){var n=r(2),i=n(r(3)),o=n(r(4)),s=r(5),a=r(1).sign,u=r(19).Entry,c=r(7),l=r(11),f=r(81),h=function(){function t(r){var n=this;if((0,i.default)(this,t),r instanceof f){this._inputs=r._inputs,this._outputs=r._outputs,this._metadata=r._metadata,this._tokenMetadata=r._tokenMetadata,this._content=JSON.stringify({inputs:this._inputs,outputs:this._outputs,metadata:this._metadata,tokenmetadata:this._tokenMetadata});var o=Math.round((new Date).getTime()/1e3);if(this._timestamp=o,this._extIds=[o.toString()],this._tokenChainId=r._tokenChainId,void 0!==r._signatures){if(Object.keys(this._inputs).find((function(t){return t===s.COINBASE_ADDRESS_PUBLIC}))?this._rcds=[e.concat([s.RCD_TYPE_1,e.from(r._id1)])]:this._rcds=r._keys.map((function(t){return e.concat([s.RCD_TYPE_1,e.from(t.publicKey)])})),this._rcds.length!==r._signatures.length)throw new Error("Missmatch between public keys and the number of signatures provided");this._timestamp=r._timestamp,this._signatures=r._signatures,this._extIds=[this._timestamp.toString()];for(var u=0;u<this._rcds.length;u++)this._extIds.push(this._rcds[u]),this._extIds.push(this._signatures[u])}else if(Object.keys(this._inputs).find((function(t){return t===s.COINBASE_ADDRESS_PUBLIC})))if(void 0!==r._sk1){var h=e.from("0"),p=e.from(o.toString()),d=e.from(r._tokenChainId,"hex"),y=e.from(this._content),g=a.keyPair.fromSeed(l.extractSecretFromIdentityKey(r._sk1));this._rcds=[e.concat([s.RCD_TYPE_1,e.from(g.publicKey)])],this._signatures=[a.detached(c.sha512(e.concat([h,p,d,y])),g.secretKey)],this._extIds.push(this._rcds[0]),this._extIds.push(this._signatures[0])}else{if(void 0===r._id1)throw new Error("You must include a valid SK1 Key to sign a coinbase transaction, or an ID1 Key to externally sign coinbase transaction.");this._id1=r._id1,this._signatures=[void 0]}else{var m=0,v=!0;if(this._signatures=r._keys.map((function(t){var i=e.from(m.toString()),s=e.from(o.toString()),u=e.from(r._tokenChainId,"hex"),l=e.from(n._content);if(m++,void 0!==t.secretKey)return a.detached(c.sha512(e.concat([i,s,u,l])),t.secretKey);v=!1})),v){this._rcds=r._keys.map((function(t){return e.concat([s.RCD_TYPE_1,e.from(t.publicKey)])}));for(var _=0;_<this._rcds.length;_++)this._extIds.push(this._rcds[_]),this._extIds.push(this._signatures[_])}else this._keys=r._keys}}else{if(!r.data.inputs)throw new Error("Valid FAT-1 transactions must include inputs");if(this._inputs=r.data.inputs,!r.data.outputs)throw new Error("Valid FAT-1 transactions must include outputs");this._outputs=r.data.outputs,this._metadata=r.data.metadata,this._entryhash=r.entryhash,this._timestamp=r.timestamp,this._pending=r.pending}Object.freeze(this)}return(0,o.default)(t,[{key:"getInputs",value:function(){return this._inputs}},{key:"getOutputs",value:function(){return this._outputs}},{key:"getMetadata",value:function(){return this._metadata}},{key:"getTokenMetadata",value:function(){return this._tokenMetadata}},{key:"isCoinbase",value:function(){return void 0!==Object.keys(this._inputs).find((function(t){return t===s.COINBASE_ADDRESS_PUBLIC}))}},{key:"getEntry",value:function(){if(!this._tokenChainId)throw new Error("Can only get a valid Factom entry for a transaction built using TransactionBuilder");return u.builder().chainId(this._tokenChainId).extIds(this._extIds,"utf8").content(this._content,"utf8").build()}},{key:"getChainId",value:function(){return this._tokenChainId}},{key:"getEntryhash",value:function(){return this._entryhash}},{key:"getTimestamp",value:function(){return this._timestamp}},{key:"getPending",value:function(){return this._pending||!1}},{key:"getMarshalDataSig",value:function(t){return function(t,r){var n=e.from(r.toString()),i=e.from(t._timestamp.toString()),o=e.from(t._tokenChainId,"hex"),s=e.from(t._content);return e.concat([n,i,o,s])}(this,t)}},{key:"validateSignatures",value:function(){if(this._signatures.length!==this._rcds.length)throw new Error("Invalid number of signatures to inputs");for(var t=0;t<this._rcds.length;++t)if(!a.detached.verify(c.sha512(this.getMarshalDataSig(t)),this._signatures[t],e.from(this._rcds[t],1).slice(1)))throw new Error("Invalid Transaction Signature for input "+t.toString());return!0}}]),t}();t.exports=h}).call(this,r(0).Buffer)},function(t,e,r){"use strict";(function(e){var n=r(2),i=n(r(3)),o=n(r(4)),s=r(5),a=r(1).sign,u=(r(19).Entry,r(7),r(11),r(83)),c=(r(14)({strict:!0}),r(9),function(){function t(r){if((0,i.default)(this,t),r instanceof u)this._content={},this._content.input=r._input,void 0!==r._conversion&&(this._content.conversion=r._conversion),r._transfers.length>0&&(this._content.transfers=r._transfers),void 0!==r._metadata&&(this._content.metadata=r._metadata),void 0!==this._key&&(this._key=r._key,this._rcd=e.concat([s.RCD_TYPE_1,e.from(r._key.publicKey)]));else{if(!r.data.input)throw new Error("Valid FAT-2 transactions must include input");if(!r.data.conversion)throw new Error("Valid FAT-2 transactions must include conversion");if(!r.data.transfers)throw new Error("Valid FAT-2 transactions must include transaction");this._content.input=r.data.input,this._content.transfers=r.data.transfers,this._content.conversion=r.data.conversion,this._content.metadata=r.data.metadata,this._entryhash=r.entryhash,this._timestamp=r.timestamp,this._pending=r.pending}Object.freeze(this)}return(0,o.default)(t,[{key:"getContent",value:function(){return this._content}},{key:"getInput",value:function(){return this._content.input}},{key:"getConversion",value:function(){return this._content.conversion}},{key:"getRCD",value:function(){return this._rcd}},{key:"getTransfers",value:function(){return this._content.transfers}},{key:"getMetadata",value:function(){return this._content.metadata}},{key:"sign",value:function(t){var e=void 0;return void 0!==this._key&&void 0!==this._key.secretKey&&(e=a.detached(t,this._key.secretKey)),e}},{key:"validateSignature",value:function(t,r,n){if(void 0===r||void 0===n)throw new Error("Transaction not signed");return!!a.detached.verify(t,r,e.from(n,1).slice(1))}}]),t}());t.exports=c}).call(this,r(0).Buffer)},function(t,e,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function l(t,e,r,n){var i,o,s,a;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),void 0===s)s=o[e]=r,++t._eventsCount;else if("function"==typeof s?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=c(t))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return t}function f(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,t))}function h(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function p(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):y(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,l=y(u,c);for(r=0;r<c;++r)o(l[r],this,e)}return!0},a.prototype.addListener=function(t,e){return l(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return l(this,t,e,!0)},a.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,h(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,h(this,t,e)),this},a.prototype.removeListener=function(t,e){var r,n,i,o,s;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,r){var n=r(21),i=r(137);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?i(t):e}},function(t,e,r){var n=r(138);function i(e,r,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,r){var i=n(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(r):o.value}},i(e,r,o||e)}t.exports=i},function(t,e,r){var n=r(139);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e,r){const n=r(22),{Transaction:i}=r(24),{NULL_HASH:o}=r(18),{Entry:s}=r(25),{DirectoryBlock:a,AdminBlock:u,EntryBlock:c,FactoidBlock:l,EntryCreditBlock:f}=r(145),{getPublicAddress:h}=r(6),{toHex:p}=r(7);function d(t,e){return t.call("chain-head",{chainid:p(e)}).then(t=>({keyMR:t.chainhead,chainInProcessList:t.chaininprocesslist}))}async function y(t,e,r){return t.call("entry",{hash:p(e)}).then(t=>(function(t,e){return s.builder().chainId(t.chainid,"hex").extIds(t.extids,"hex").content(t.content,"hex").blockContext(e).timestamp(e?1e3*e.entryTimestamp:void 0).build()})(t,r))}async function g(t,e){const r=await t.call("entry-block",{keymr:e});return{entries:await n.map(r.entrylist,n=>y(t,n.entryhash,m(e,r,n.timestamp))),previousKeyMR:r.header.prevkeymr}}function m(t,e,r){return{entryTimestamp:r,directoryBlockHeight:e.header.dbheight,entryBlockTimestamp:e.header.timestamp,entryBlockSequenceNumber:e.header.blocksequencenumber,entryBlockKeyMR:t}}function v(t,e){let r;switch(typeof e){case"number":if(e<0)throw new RangeError("Directory Block height out of range");r=t.call("dblock-by-height",{height:e});break;case"string":r=t.call("directory-block",{keymr:e});break;default:throw Error(`Invalid argument: ${e}`)}return r.then(t=>new a(t,e))}t.exports={getEntry:y,getEntryWithBlockContext:async function(t,e){const r=await t.call("receipt",{hash:p(e)}).then(t=>t.receipt.entryblockkeymr),n=await t.call("entry-block",{keymr:r}),i=n.entrylist.find(t=>t.entryhash===e).timestamp;return y(t,e,m(r,n,i))},getAllEntriesOfChain:async function(t,e){const r=[],i=await d(t,e);if(""===i.keyMR&&i.chainInProcessList)throw new Error("Chain not yet included in a Directory Block");let s=i.keyMR;for(;s!==o;){const{entries:e,previousKeyMR:n}=await g(t,s);r.push(...e.reverse()),s=n}return n.resolve(r.reverse())},getFirstEntry:async function(t,e){const r=await d(t,e);if(""===r.keyMR&&r.chainInProcessList)throw new Error("Chain not yet included in a Directory Block");let n,i,s=r.keyMR;for(;s!==o;)i=s,s=(n=await t.call("entry-block",{keymr:s})).header.prevkeymr;const a=n.entrylist[0];return y(t,a.entryhash,m(i,n,a.timestamp))},getChainHead:d,chainExists:function(t,e){return t.call("chain-head",{chainid:p(e)}).then(()=>!0).catch((function(t){if(-32009===t.code)return!1;throw t}))},getEntryCreditRate:function(t){return t.call("entry-credit-rate").then(t=>t.rate)},getTransaction:async function(t,e){if("string"!=typeof e)throw new Error(`Argument is not a transaction ID: ${e}`);const r=await t.call("transaction",{hash:e});if(r.factoidtransaction)return new i(r.factoidtransaction,{factoidBlockKeyMR:r.includedintransactionblock,directoryBlockKeyMR:r.includedindirectoryblock,directoryBlockHeight:r.includedindirectoryblockheight});throw new Error(`No Transaction with ID [${e}] found.`)},getBalance:function(t,e){const r=h(e);return("E"===r[0]?t.call.bind(t,"entry-credit-balance"):t.call.bind(t,"factoid-balance"))({address:r}).then(t=>t.balance)},getHeights:async function(t){const e=await t.call("heights");return{directoryBlockHeight:e.directoryblockheight,leaderHeight:e.leaderheight,entryBlockHeight:e.entryblockheight,entryHeight:e.entryheight}},getDirectoryBlockHead:function(t){return t.call("directory-block-head").then(e=>v(t,e.keymr))},getDirectoryBlock:v,getEntryBlock:function(t,e){if("string"!=typeof e)throw new Error("Argument should be the KeyMR of the Entry Block");return t.call("entry-block",{keymr:e}).then(t=>new c(t,e))},getAdminBlock:function(t,e){let r;switch(typeof e){case"number":if(e<0)throw new RangeError("Admin Block height out of range");r=t.call("ablock-by-height",{height:e});break;case"string":r=t.call("admin-block",{keymr:e});break;default:throw Error(`Invalid argument: ${e}`)}return r.then(t=>new u(t))},getFactoidBlock:function(t,e){let r;switch(typeof e){case"number":if(e<0)throw new RangeError("Factoid Block height out of range");r=t.call("fblock-by-height",{height:e});break;case"string":r=t.call("factoid-block",{keymr:e});break;default:throw Error(`Invalid argument: ${e}`)}return r.then(t=>new l(t))},getEntryCreditBlock:function(t,e){let r;switch(typeof e){case"number":if(e<0)throw new RangeError("Entry Credit Block height out of range");r=t.call("ecblock-by-height",{height:e});break;case"string":r=t.call("entrycredit-block",{keymr:e});break;default:throw Error(`Invalid argument: ${e}`)}return r.then(t=>new f(t))},rewindChainWhile:async function(t,e,r,n){if("function"!=typeof r)throw new Error(`${r} is not a function`);if("function"!=typeof n)throw new Error(`${n} is not a function`);const i=await d(t,e);if(""===i.keyMR&&i.chainInProcessList)throw new Error("Chain not yet included in a Directory Block");let s=i.keyMR;for(;s!==o;){const{entries:e,previousKeyMR:i}=await g(t,s);let o=e.length-1;for(;o>=0&&await r(e[o]);)await n(e[o]),o--;if(o>=0)break;s=i}}}},function(t,e,r){const n=r(22),{toHex:i}=r(7);function o(t,e,r,i,o,a){if(!e||!r)return n.reject(new s("Invalid argument: hash or chain ID is missing",a,e));const u=o||60,c=Date.now();return new n((n,o)=>{const l=setInterval((async function(){try{let f;const h=await t.call("ack",{hash:e,chainid:r}).catch((function(t){clearInterval(l),f=t}));if(f)return o(new s(f,a,e));const p=i?h[i].status:h.status;if("Unknown"!==p&&"NotConfirmed"!==p)return clearInterval(l),n(p);if(Date.now()-c>1e3*u)return clearInterval(l),o(new s("Timeout",a,e))}catch(t){return clearInterval(l),o(new s("Unexpected error: "+t.message,a,e))}}),500)})}class s extends Error{constructor(t,e,r){super(`Acknowledgement of type [${e}] failed for [${r}]: ${t}`),this.ackType=e,this.hash=r,Error.captureStackTrace&&Error.captureStackTrace(this,s)}}t.exports={waitOnCommitAck:function(t,e,r){return o(t,e,"c","commitdata",r,"entry-commit")},waitOnRevealAck:function(t,e,r,n){return o(t,e,i(r),"entrydata",n,"entry-reveal")},waitOnFactoidTransactionAck:function(t,e,r){return o(t,e,"f",null,r,"factoid-transaction")}}},function(t,e,r){(function(e){const n=r(1).sign,{addressToKey:i,isValidPrivateEcAddress:o,isValidPublicEcAddress:s}=r(6),{Entry:a}=r(25),{sha256:u,sha256d:c}=r(7),{CHAIN_CREATION_COST:l}=r(18);class f{constructor(t){if(t instanceof a){const e=m(t);this.firstEntry=a.builder(t).chainId(e).build(),this.id=e}else{if(!(t.firstEntry instanceof a))throw new Error("Argument of Chain constructor must be an instance of Entry or Chain.");{const e=m(t.firstEntry);this.firstEntry=a.builder(t.firstEntry).chainId(e).build(),this.id=e}}Object.freeze(this)}get idHex(){return this.id.toString("hex")}ecCost(){return l+this.firstEntry.ecCost()}toObject(){return{firstEntry:this.firstEntry.toObject(),id:this.idHex}}}function h(t,r,a){g(t);const u=d(t);let c,l;if(o(r)){const t=i(r),o=n.keyPair.fromSeed(t);c=e.from(o.publicKey),l=e.from(n.detached(u,o.secretKey))}else{if(!s(r))throw new Error(`${r} is not a valid EC address`);if(!a)throw new Error("Signature of the commit missing.");if(console.warn("composeChainCommit with signature is deprecated. Use composeEntryCommitDelegateSig."),c=i(r),l=e.from(a,"hex"),!n.detached.verify(u,l,c))throw new Error("Invalid signature manually provided for the chain commit. (first entry timestamp not fixed?)")}return e.concat([u,c,l])}async function p(t,r,o){if(g(t),!s(r))throw new Error(`${r} is not a valid public EC address`);if("function"!=typeof o)throw new Error("sign must be a function");const a=d(t),u=e.from(await o(a,r),"hex"),c=i(r);if(!n.detached.verify(a,u,c))throw new Error("Invalid signature manually returned by the signing function for the chain commit.");return e.concat([a,c,u])}function d(t){g(t);const r=t.firstEntry,n=r.hash(),i=e.alloc(104);return i.writeInt8(0),i.writeIntBE(r.timestamp||Date.now(),1,6),c(t.id).copy(i,7),c(e.concat([n,t.id])).copy(i,39),n.copy(i,71),i.writeInt8(t.ecCost(),103),i}function y(t){return g(t),t.firstEntry.marshalBinary()}function g(t){if(!(t instanceof f))throw new Error("Argument must be an instance of Chain")}function m(t){const r=t.extIds.map(u),n=e.concat(r);return u(n)}t.exports={Chain:f,computeChainTxId:function(t){return g(t),u(d(t))},computeChainId:m,composeChainCommit:h,composeChainCommitDelegateSig:p,composeChainReveal:y,composeChain:function(t,e,r){return{commit:h(t,e,r),reveal:y(t)}},composeChainDelegateSig:async function(t,e,r){return{commit:await p(t,e,r),reveal:y(t)}},composeChainLedger:d,validateChainInstance:g}}).call(this,r(0).Buffer)},function(t,e,r){"use strict";(function(e){var n=r(2),i=n(r(21)),o=n(r(3)),s=n(r(4)),a=r(1).sign,u=r(19),c=u.Entry,l=u.Chain,f=r(17),h=r(5),p=r(11),d=r(7),y=r(9),g=r(14)({strict:!0}),m=r(80),v=function(){function t(r){if((0,o.default)(this,t),r instanceof m){this._type=r._type,this._symbol=r._symbol,this._supply=r._supply,this._precision=r._precision,this._metadata=r._metadata,this._content=g.stringify({type:this._type,symbol:this._symbol,supply:this._supply,precision:this._precision,metadata:this._metadata}),this._tokenId=r._tokenId,this._rootChainId=r._rootChainId,this._tokenChainId=f.getTokenChainId(r._tokenId,r._rootChainId);var n=e.from("0"),s=Math.round((new Date).getTime()/1e3).toString();this._timestamp=s;var u=e.from(s),c=e.from(this._tokenChainId,"hex"),l=e.from(this._content),v=a.keyPair.fromSeed(p.extractSecretFromIdentityKey(r._sk1)),_=e.concat([h.RCD_TYPE_1,e.from(v.publicKey)]),b=a.detached(d.sha512(e.concat([n,u,c,l])),v.secretKey);this._extIds=[u,_,b]}else"object"===(0,i.default)(r)&&(this._type=r.issuance.type,this._symbol=r.issuance.symbol,this._supply=new y(r.issuance.supply),this._precision=r.issuance.precision,this._metadata=r.issuance.metadata,this._tokenId=r.tokenid,this._rootChainId=r.issuerid,this._tokenChainId=f.getTokenChainId(this._tokenId,this._rootChainId),this._entryhash=r.entryhash,this._timestamp=r.timestamp);Object.freeze(this)}return(0,s.default)(t,[{key:"getChainId",value:function(){return this._tokenChainId}},{key:"getTokenId",value:function(){return this._tokenId}},{key:"getIssuerChainId",value:function(){return this._rootChainId}},{key:"getEntryhash",value:function(){return this._entryhash}},{key:"getTimestamp",value:function(){return this._timestamp}},{key:"getType",value:function(){return this._type}},{key:"getSymbol",value:function(){return this._symbol}},{key:"getSupply",value:function(){return this._supply}},{key:"getPrecision",value:function(){return this._precision}},{key:"getMetadata",value:function(){return this._metadata}},{key:"getChain",value:function(){return new l(c.builder().extId(e.from("token")).extId(e.from(this._tokenId)).extId(e.from("issuer")).extId(e.from(this._rootChainId,"hex")).build())}},{key:"getEntry",value:function(){return c.builder().chainId(this._tokenChainId).extIds(this._extIds,"utf8").content(this._content,"utf8").build()}}]),t}();t.exports=v}).call(this,r(0).Buffer)},function(t,e,r){"use strict";(function(e){var n=r(2),i=n(r(21)),o=n(r(3)),s=n(r(4)),a=r(1).sign,u=r(19),c=u.Entry,l=u.Chain,f=r(17),h=r(5),p=r(11),d=r(7),y=r(9),g=r(14)({strict:!0}),m=r(82),v=function(){function t(r){if((0,o.default)(this,t),r instanceof m){this._type=r._type,this._symbol=r._symbol,this._supply=r._supply,this._metadata=r._metadata,this._content=g.stringify({type:this._type,symbol:this._symbol,supply:this._supply,metadata:this._metadata}),this._tokenId=r._tokenId,this._rootChainId=r._rootChainId,this._tokenChainId=f.getTokenChainId(r._tokenId,r._rootChainId);var n=e.from("0"),s=e.from(Math.round((new Date).getTime()/1e3).toString()),u=e.from(this._tokenChainId,"hex"),c=e.from(this._content),l=a.keyPair.fromSeed(p.extractSecretFromIdentityKey(r._sk1)),v=e.concat([h.RCD_TYPE_1,e.from(l.publicKey)]),_=a.detached(d.sha512(e.concat([n,s,u,c])),l.secretKey);this._extIds=[s,v,_]}else"object"===(0,i.default)(r)&&(this._type=r.issuance.type,this._symbol=r.issuance.symbol,this._supply=new y(r.issuance.supply),this._metadata=r.issuance.metadata,this._tokenId=r.tokenid,this._rootChainId=r.issuerid,this._tokenChainId=f.getTokenChainId(this._tokenId,this._rootChainId),this._entryhash=r.entryhash,this._timestamp=r.timestamp);Object.freeze(this)}return(0,s.default)(t,[{key:"getChainId",value:function(){return this._tokenChainId}},{key:"getTokenId",value:function(){return this._tokenId}},{key:"getIssuerChainId",value:function(){return this._rootChainId}},{key:"getEntryhash",value:function(){return this._entryhash}},{key:"getTimestamp",value:function(){return this._timestamp}},{key:"getType",value:function(){return this._type}},{key:"getSymbol",value:function(){return this._symbol}},{key:"getSupply",value:function(){return this._supply}},{key:"getMetadata",value:function(){return this._metadata}},{key:"getChain",value:function(){return new l(c.builder().extId(e.from("token")).extId(e.from(this._tokenId)).extId(e.from("issuer")).extId(e.from(this._rootChainId,"hex")).build())}},{key:"getEntry",value:function(){return c.builder().chainId(this._tokenChainId).extIds(this._extIds,"utf8").content(this._content,"utf8").build()}}]),t}();t.exports=v}).call(this,r(0).Buffer)},function(t,e,r){"use strict";(function(e){var n=r(2),i=n(r(3)),o=n(r(4)),s=r(5),a=(r(1).sign,r(19).Entry),u=r(7),c=(r(11),r(85)),l=r(14)({strict:!0}),f=(r(9),function(){function t(r){var n=this;if((0,i.default)(this,t),r instanceof c){this._transactions=r._transactions,this._tokenChainId=r._tokenChainId;var o=Math.round((new Date).getTime()/1e3);if(this._timestamp=o,this._extIds=[o.toString()],void 0!==r._signatures){if(this._rcds=[],r._transactions.forEach((function(t,i){if(void 0!==t.getRCD())n._rcds.push(t.getRCD());else{if(void 0===r._keys[i])throw new Error("Public key not specified with signature");n._rcds.push(e.concat([s.RCD_TYPE_1,e.from(r._keys[i])]))}})),this._rcds.length!==r._signatures.length)throw new Error("Missmatch between rcds and the number of signatures provided");this._content=r._content,this._timestamp=r._timestamp,this._signatures=r._signatures,this._extIds=[this._timestamp.toString()];for(var a=0;a<this._rcds.length;a++)this._extIds.push(this._rcds[a]),this._extIds.push(this._signatures[a])}else{var f={version:1,transactions:[]};this._transactions.forEach((function(t){f.transactions.push(t.getContent())})),this._content=l.stringify(f);var h=!0;if(this._signatures=[],r._transactions.forEach((function(t,r){var i=e.from(r.toString()),o=e.from(n._timestamp.toString()),s=e.from(n._tokenChainId,"hex"),a=e.from(n._content),c=t.sign(u.sha512(e.concat([i,o,s,a])));void 0===c&&(h=!1),n._signatures.push(c)})),h){this._rcds=[],r._transactions.forEach((function(t){n._rcds.push(t.getRCD())}));for(var p=0;p<this._rcds.length;p++)this._extIds.push(this._rcds[p]),this._extIds.push(this._signatures[p])}}}else{if(!r.data.transactions)throw new Error("Valid FAT-2 transactions must be included");this._entryhash=r.entryhash,this._timestamp=r.timestamp,this._pending=r.pending}Object.freeze(this)}return(0,o.default)(t,[{key:"getTransaction",value:function(t){return this._content.transactions[t]}},{key:"getEntry",value:function(){if(!this._tokenChainId)throw new Error("Can only get a valid Factom entry for a transaction built using TransactionBuilder");return a.builder().chainId(this._tokenChainId).extIds(this._extIds,"utf8").content(this._content,"utf8").build()}},{key:"getChainId",value:function(){return this._tokenChainId}},{key:"getEntryhash",value:function(){return this._entryhash}},{key:"getTimestamp",value:function(){return this._timestamp}},{key:"getPending",value:function(){return this._pending||!1}},{key:"getMarshalDataSig",value:function(t){return function(t,r){var n=e.from(r.toString()),i=e.from(t._timestamp.toString()),o=e.from(t._tokenChainId,"hex"),s=e.from(t._content);return e.concat([n,i,o,s])}(this,t)}},{key:"validateSignatures",value:function(){var t=this;if(void 0===this._signature||void 0===this._rcd)throw new Error("Transaction not signed");return this._transactions.forEach((function(e,r){if(!e.validateSignature(u.sha512(t.getMarshalDataSig(r)),t._signature[r],t._rcd[r]))throw new Error("Invalid Transaction Signature for input "+r.toString())})),!0}}]),t}());t.exports=f}).call(this,r(0).Buffer)},function(t,e,r){var n=r(88),i=r(59),o=t.exports;for(var s in n)n.hasOwnProperty(s)&&(o[s]=n[s]);function a(t){if("string"==typeof t&&(t=i.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}o.request=function(t,e){return t=a(t),n.request.call(this,t,e)},o.get=function(t,e){return t=a(t),n.get.call(this,t,e)}},function(t,e,r){(function(t){e.fetch=a(t.fetch)&&a(t.ReadableStream),e.writableStream=a(t.WritableStream),e.abortController=a(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var r;function n(){if(void 0!==r)return r;if(t.XMLHttpRequest){r=new t.XMLHttpRequest;try{r.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){r=null}}else r=null;return r}function i(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var o=void 0!==t.ArrayBuffer,s=o&&a(t.ArrayBuffer.prototype.slice);function a(t){return"function"==typeof t}e.arraybuffer=e.fetch||o&&i("arraybuffer"),e.msstream=!e.fetch&&s&&i("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&o&&i("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!n()&&a(n().overrideMimeType),e.vbArray=a(t.VBArray),r=null}).call(this,r(10))},function(t,e,r){(function(t,n,i){var o=r(49),s=r(15),a=r(51),u=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=e.IncomingMessage=function(e,r,s,u){var c=this;if(a.Readable.call(c),c._mode=s,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",(function(){t.nextTick((function(){c.emit("close")}))})),"fetch"===s){if(c._fetchResponse=r,c.url=r.url,c.statusCode=r.status,c.statusMessage=r.statusText,r.headers.forEach((function(t,e){c.headers[e.toLowerCase()]=t,c.rawHeaders.push(e,t)})),o.writableStream){var l=new WritableStream({write:function(t){return new Promise((function(e,r){c._destroyed?r():c.push(new n(t))?e():c._resumeFetch=e}))},close:function(){i.clearTimeout(u),c._destroyed||c.push(null)},abort:function(t){c._destroyed||c.emit("error",t)}});try{return void r.body.pipeTo(l).catch((function(t){i.clearTimeout(u),c._destroyed||c.emit("error",t)}))}catch(t){}}var f=r.body.getReader();!function t(){f.read().then((function(e){if(!c._destroyed){if(e.done)return i.clearTimeout(u),void c.push(null);c.push(new n(e.value)),t()}})).catch((function(t){i.clearTimeout(u),c._destroyed||c.emit("error",t)}))}()}else{if(c._xhr=e,c._pos=0,c.url=e.responseURL,c.statusCode=e.status,c.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var r=e[1].toLowerCase();"set-cookie"===r?(void 0===c.headers[r]&&(c.headers[r]=[]),c.headers[r].push(e[2])):void 0!==c.headers[r]?c.headers[r]+=", "+e[2]:c.headers[r]=e[2],c.rawHeaders.push(e[1],e[2])}})),c._charset="x-user-defined",!o.overrideMimeType){var h=c.rawHeaders["mime-type"];if(h){var p=h.match(/;\s*charset=([^;])(;|$)/);p&&(c._charset=p[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};s(c,a.Readable),c.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},c.prototype._onXHRProgress=function(){var t=this,e=t._xhr,r=null;switch(t._mode){case"text:vbarray":if(e.readyState!==u.DONE)break;try{r=new i.VBArray(e.responseBody).toArray()}catch(t){}if(null!==r){t.push(new n(r));break}case"text":try{r=e.responseText}catch(e){t._mode="text:vbarray";break}if(r.length>t._pos){var o=r.substr(t._pos);if("x-user-defined"===t._charset){for(var s=new n(o.length),a=0;a<o.length;a++)s[a]=255&o.charCodeAt(a);t.push(s)}else t.push(o,t._charset);t._pos=r.length}break;case"arraybuffer":if(e.readyState!==u.DONE||!e.response)break;r=e.response,t.push(new n(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=e.response,e.readyState!==u.LOADING||!r)break;t.push(new n(new Uint8Array(r)));break;case"ms-stream":if(r=e.response,e.readyState!==u.LOADING)break;var c=new i.MSStreamReader;c.onprogress=function(){c.result.byteLength>t._pos&&(t.push(new n(new Uint8Array(c.result.slice(t._pos)))),t._pos=c.result.byteLength)},c.onload=function(){t.push(null)},c.readAsArrayBuffer(r)}t._xhr.readyState===u.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,r(13),r(0).Buffer,r(10))},function(t,e,r){(e=t.exports=r(52)).Stream=e,e.Readable=e,e.Writable=r(55),e.Duplex=r(20),e.Transform=r(58),e.PassThrough=r(99)},function(t,e,r){"use strict";(function(e,n){var i=r(29);t.exports=_;var o,s=r(93);_.ReadableState=v;r(38).EventEmitter;var a=function(t,e){return t.listeners(e).length},u=r(53),c=r(30).Buffer,l=e.Uint8Array||function(){};var f=r(23);f.inherits=r(15);var h=r(94),p=void 0;p=h&&h.debuglog?h.debuglog("stream"):function(){};var d,y=r(95),g=r(54);f.inherits(_,u);var m=["error","close","destroy","pause","resume"];function v(t,e){t=t||{};var n=e instanceof(o=o||r(20));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=r(57).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function _(t){if(o=o||r(20),!(this instanceof _))return new _(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,r,n,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,A(t)}(t,s)):(i||(o=function(t,e){var r;n=e,c.isBuffer(n)||n instanceof l||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?w(t,s,e,!1):x(t,s)):w(t,s,e,!1))):n||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function w(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&A(t)),x(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=g.destroy,_.prototype._undestroy=g.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=c.from(t,e),e=""),r=!0),b(this,t,e,!1,r)},_.prototype.unshift=function(t){return b(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return d||(d=r(57).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var E=8388608;function k(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=E?t=E:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function A(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(S,t):S(t))}function S(t){p("emit readable"),t.emit("readable"),R(t)}function x(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(C,t,e))}function C(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function I(t){p("readable nexttick read 0"),t.read(0)}function T(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),R(t),e.flowing&&!e.reading&&t.read(0)}function R(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function O(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}(t,e):function(t,e){var r=c.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),0===(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r}function P(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(j,e,t))}function j(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function N(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}_.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?P(this):A(this),null;if(0===(t=k(t,e))&&e.ended)return 0===e.length&&P(this),null;var n,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=k(r,e))),null===(n=t>0?O(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&P(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,e);var u=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?l:_;function c(e,n){p("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,p("cleanup"),t.removeListener("close",m),t.removeListener("finish",v),t.removeListener("drain",f),t.removeListener("error",g),t.removeListener("unpipe",c),r.removeListener("end",l),r.removeListener("end",_),r.removeListener("data",y),h=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||f())}function l(){p("onend"),t.end()}o.endEmitted?i.nextTick(u):r.once("end",u),t.on("unpipe",c);var f=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,R(t))}}(r);t.on("drain",f);var h=!1;var d=!1;function y(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==N(o.pipes,t))&&!h&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,d=!0),r.pause())}function g(e){p("onerror",e),_(),t.removeListener("error",g),0===a(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",v),_()}function v(){p("onfinish"),t.removeListener("close",m),_()}function _(){p("unpipe"),r.unpipe(t)}return r.on("data",y),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",g),t.once("close",m),t.once("finish",v),t.emit("pipe",r),o.flowing||(p("pipe resume"),r.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=N(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)},_.prototype.on=function(t,e){var r=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&A(this):i.nextTick(I,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(T,t,e))}(this,t)),this},_.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(p("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(p("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<m.length;o++)t.on(m[o],this.emit.bind(this,m[o]));return this._read=function(e){p("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=O}).call(this,r(10),r(13))},function(t,e,r){t.exports=r(38).EventEmitter},function(t,e,r){"use strict";var n=r(29);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(n.nextTick(i,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,r){"use strict";(function(e,n,i){var o=r(29);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var a,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:o.nextTick;v.WritableState=m;var c=r(23);c.inherits=r(15);var l={deprecate:r(98)},f=r(53),h=r(30).Buffer,p=i.Uint8Array||function(){};var d,y=r(54);function g(){}function m(t,e){a=a||r(20),t=t||{};var n=e instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,c=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===t.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(o.nextTick(i,n),o.nextTick(A,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),A(t,e))}(t,r,n,e,i);else{var s=E(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||w(t,r),n?u(b,t,r,s,i):b(t,r,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(t){if(a=a||r(20),!(d.call(v,this)||this instanceof a))return new v(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),f.call(this)}function _(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),A(t,e)}function w(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,_(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(_(t,e,!1,e.objectMode?1:c.length,c,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function E(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function k(t,e){t._final((function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),A(t,e)}))}function A(t,e){var r=E(e);return r&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(k,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}c.inherits(v,f),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===v&&(t&&t._writableState instanceof m)}})):d=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,r){var n,i=this._writableState,s=!1,a=!i.objectMode&&(n=t,h.isBuffer(n)||n instanceof p);return a&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof e&&(r=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=g),i.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),o.nextTick(e,r)}(this,r):(a||function(t,e,r,n){var i=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(n,s),i=!1),i}(this,i,t,r))&&(i.pendingcb++,s=function(t,e,r,n,i,o){if(!r){var s=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,r));return e}(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,a,n,i,o);return u}(this,i,a,t,e,r)),s},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,A(t,e),r&&(e.finished?o.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=y.destroy,v.prototype._undestroy=y.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,r(13),r(56).setImmediate,r(10))},function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(97),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(10))},function(t,e,r){"use strict";var n=r(30).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=l,this.end=f,e=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function l(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function h(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=s(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=s(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=s(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,r){"use strict";t.exports=s;var n=r(20),i=r(23);function o(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);n.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush((function(e,r){u(t,e,r)})):u(this,null,null)}function u(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=r(15),i.inherits(s,n),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,(function(t){e(t),r.emit("close")}))}},function(t,e,r){"use strict";var n=r(103),i=r(104);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=_(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(105);function _(t,e,r){if(t&&i.isObject(t)&&t instanceof o)return t;var n=new o;return n.parse(t,e,r),n}o.prototype.parse=function(t,e,r){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var _=t=c.join(a);if(_=_.trim(),!r&&1===t.split("#").length){var b=u.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=s.exec(_);if(w){var E=(w=w[0]).toLowerCase();this.protocol=E,_=_.substr(w.length)}if(r||w||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===_.substr(0,2);!k||w&&g[w]||(_=_.substr(2),this.slashes=!0)}if(!g[w]&&(k||w&&!m[w])){for(var A,S,x=-1,C=0;C<h.length;C++){-1!==(I=_.indexOf(h[C]))&&(-1===x||I<x)&&(x=I)}-1!==(S=-1===x?_.lastIndexOf("@"):_.lastIndexOf("@",x))&&(A=_.slice(0,S),_=_.slice(S+1),this.auth=decodeURIComponent(A)),x=-1;for(C=0;C<f.length;C++){var I;-1!==(I=_.indexOf(f[C]))&&(-1===x||I<x)&&(x=I)}-1===x&&(x=_.length),this.host=_.slice(0,x),_=_.slice(x),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var R=this.hostname.split(/\./),O=(C=0,R.length);C<O;C++){var P=R[C];if(P&&!P.match(p)){for(var j="",N=0,D=P.length;N<D;N++)P.charCodeAt(N)>127?j+="x":j+=P[N];if(!j.match(p)){var L=R.slice(0,C),F=R.slice(C+1),B=P.match(d);B&&(L.push(B[1]),F.unshift(B[2])),F.length&&(_="/"+F.join(".")+_),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+U,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!y[E])for(C=0,O=l.length;C<O;C++){var q=l[C];if(-1!==_.indexOf(q)){var V=encodeURIComponent(q);V===q&&(V=escape(q)),_=_.split(q).join(V)}}var H=_.indexOf("#");-1!==H&&(this.hash=_.substr(H),_=_.slice(0,H));var z=_.indexOf("?");if(-1!==z?(this.search=_.substr(z),this.query=_.substr(z+1),e&&(this.query=v.parse(this.query)),_=_.slice(0,z)):e&&(this.search="",this.query={}),_&&(this.pathname=_),m[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var Y=this.search||"";this.path=U+Y}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var r=new o,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(r[l]=t[l])}return m[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!m[t.protocol]){for(var f=Object.keys(t),h=0;h<f.length;h++){var p=f[h];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||g[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var y=r.pathname||"",v=r.search||"";r.path=y+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var _=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||_||r.host&&t.pathname,E=w,k=r.pathname&&r.pathname.split("/")||[],A=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!m[r.protocol]);if(A&&(r.hostname="",r.port=null,r.host&&(""===k[0]?k[0]=r.host:k.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===k[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,k=d;else if(d.length)k||(k=[]),k.pop(),k=k.concat(d),r.search=t.search,r.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(A)r.hostname=r.host=k.shift(),(T=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift());return r.search=t.search,r.query=t.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!k.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=k.slice(-1)[0],x=(r.host||t.host||k.length>1)&&("."===S||".."===S)||""===S,C=0,I=k.length;I>=0;I--)"."===(S=k[I])?k.splice(I,1):".."===S?(k.splice(I,1),C++):C&&(k.splice(I,1),C--);if(!w&&!E)for(;C--;C)k.unshift("..");!w||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),x&&"/"!==k.join("/").substr(-1)&&k.push("");var T,R=""===k[0]||k[0]&&"/"===k[0].charAt(0);A&&(r.hostname=r.host=R?"":k.length?k.shift():"",(T=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift()));return(w=w||r.host&&k.length)&&!R&&k.unshift(""),k.length?r.pathname=k.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){t.exports=r(108)},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},function(t,e,r){"use strict";var n=r(8);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var o;if(r)o=r(e);else if(n.isURLSearchParams(e))o=e.toString();else{var s=[];n.forEach(e,(function(t,e){null!=t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,(function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))})))})),o=s.join("&")}if(o){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";(function(e){var n=r(8),i=r(114),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,u={adapter:(void 0!==e&&"[object process]"===Object.prototype.toString.call(e)?a=r(66):"undefined"!=typeof XMLHttpRequest&&(a=r(66)),a),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),n.forEach(["post","put","patch"],(function(t){u.headers[t]=n.merge(o)})),t.exports=u}).call(this,r(13))},function(t,e,r){"use strict";var n=r(8),i=r(115),o=r(63),s=r(117),a=r(118),u=r(67);t.exports=function(t){return new Promise((function(e,c){var l=t.data,f=t.headers;n.isFormData(l)&&delete f["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",d=t.auth.password||"";f.Authorization="Basic "+btoa(p+":"+d)}if(h.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?s(h.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:t,request:h};i(e,c,n),h=null}},h.onabort=function(){h&&(c(u("Request aborted",t,"ECONNABORTED",h)),h=null)},h.onerror=function(){c(u("Network Error",t,null,h)),h=null},h.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},n.isStandardBrowserEnv()){var y=r(119),g=(t.withCredentials||a(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;g&&(f[t.xsrfHeaderName]=g)}if("setRequestHeader"in h&&n.forEach(f,(function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete f[e]:h.setRequestHeader(e,t)})),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){h&&(h.abort(),c(t),h=null)})),void 0===l&&(l=null),h.send(l)}))}},function(t,e,r){"use strict";var n=r(116);t.exports=function(t,e,r,i,o){var s=new Error(t);return n(s,e,r,i,o)}},function(t,e,r){"use strict";var n=r(8);t.exports=function(t,e){e=e||{};var r={};return n.forEach(["url","method","params","data"],(function(t){void 0!==e[t]&&(r[t]=e[t])})),n.forEach(["headers","auth","proxy"],(function(i){n.isObject(e[i])?r[i]=n.deepMerge(t[i],e[i]):void 0!==e[i]?r[i]=e[i]:n.isObject(t[i])?r[i]=n.deepMerge(t[i]):void 0!==t[i]&&(r[i]=t[i])})),n.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(n){void 0!==e[n]?r[n]=e[n]:void 0!==t[n]&&(r[n]=t[n])})),r}},function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,r){var n;!function(i){"use strict";var o,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,u=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",f=1e14,h=14,p=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],y=1e7,g=1e9;function m(t){var e=0|t;return t>0||t===e?e:e-1}function v(t){for(var e,r,n=1,i=t.length,o=t[0]+"";n<i;){for(e=t[n++]+"",r=h-e.length;r--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function _(t,e){var r,n,i=t.c,o=e.c,s=t.s,a=e.s,u=t.e,c=e.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=u==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=i.length)<(c=o.length)?u:c,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return u==c?0:u>c^r?1:-1}function b(t,e,r,n){if(t<e||t>r||t!==(t<0?a(t):u(t)))throw Error(c+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+t)}function w(t){return"[object Array]"==Object.prototype.toString.call(t)}function E(t){var e=t.c.length-1;return m(t.e/h)==e&&t.c[e]%2!=0}function k(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function A(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(++e>(n=t.length)){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}(o=function t(e){var r,n,i,o,S,x,C,I,T,R=H.prototype={constructor:H,toString:null,valueOf:null},O=new H(1),P=20,j=4,N=-7,D=21,L=-1e7,F=1e7,B=!1,U=1,M=0,q={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0},V="0123456789abcdefghijklmnopqrstuvwxyz";function H(t,e){var r,o,a,c,f,d,y,g,m=this;if(!(m instanceof H))return new H(t,e);if(null==e){if(t instanceof H)return m.s=t.s,m.e=t.e,void(m.c=(t=t.c)?t.slice():t);if((d="number"==typeof t)&&0*t==0){if(m.s=1/t<0?(t=-t,-1):1,t===~~t){for(c=0,f=t;f>=10;f/=10,c++);return m.e=c,void(m.c=[t])}g=t+""}else{if(!s.test(g=t+""))return i(m,g,d);m.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(c=g.indexOf("."))>-1&&(g=g.replace(".","")),(f=g.search(/e/i))>0?(c<0&&(c=f),c+=+g.slice(f+1),g=g.substring(0,f)):c<0&&(c=g.length)}else{if(b(e,2,V.length,"Base"),g=t+"",10==e)return K(m=new H(t instanceof H?t:g),P+m.e+1,j);if(d="number"==typeof t){if(0*t!=0)return i(m,g,d,e);if(m.s=1/t<0?(g=g.slice(1),-1):1,H.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(l+t);d=!1}else m.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(r=V.slice(0,e),c=f=0,y=g.length;f<y;f++)if(r.indexOf(o=g.charAt(f))<0){if("."==o){if(f>c){c=y;continue}}else if(!a&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){a=!0,f=-1,c=0;continue}return i(m,t+"",d,e)}(c=(g=n(g,e,10,m.s)).indexOf("."))>-1?g=g.replace(".",""):c=g.length}for(f=0;48===g.charCodeAt(f);f++);for(y=g.length;48===g.charCodeAt(--y););if(g=g.slice(f,++y)){if(y-=f,d&&H.DEBUG&&y>15&&(t>p||t!==u(t)))throw Error(l+m.s*t);if((c=c-f-1)>F)m.c=m.e=null;else if(c<L)m.c=[m.e=0];else{if(m.e=c,m.c=[],f=(c+1)%h,c<0&&(f+=h),f<y){for(f&&m.c.push(+g.slice(0,f)),y-=h;f<y;)m.c.push(+g.slice(f,f+=h));g=g.slice(f),f=h-g.length}else f-=y;for(;f--;g+="0");m.c.push(+g)}}else m.c=[m.e=0]}function z(t,e,r,n){var i,o,s,a,u;if(null==r?r=j:b(r,0,8),!t.c)return t.toString();if(i=t.c[0],s=t.e,null==e)u=v(t.c),u=1==n||2==n&&s<=N?k(u,s):A(u,s,"0");else if(o=(t=K(new H(t),e,r)).e,a=(u=v(t.c)).length,1==n||2==n&&(e<=o||o<=N)){for(;a<e;u+="0",a++);u=k(u,o)}else if(e-=s,u=A(u,o,"0"),o+1>a){if(--e>0)for(u+=".";e--;u+="0");}else if((e+=o-a)>0)for(o+1==a&&(u+=".");e--;u+="0");return t.s<0&&i?"-"+u:u}function Y(t,e){var r,n,i=0;for(w(t[0])&&(t=t[0]),r=new H(t[0]);++i<t.length;){if(!(n=new H(t[i])).s){r=n;break}e.call(r,n)&&(r=n)}return r}function $(t,e,r){for(var n=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,n++);return(r=n+r*h-1)>F?t.c=t.e=null:r<L?t.c=[t.e=0]:(t.e=r,t.c=e),t}function K(t,e,r,n){var i,o,s,c,l,p,y,g=t.c,m=d;if(g){t:{for(i=1,c=g[0];c>=10;c/=10,i++);if((o=e-i)<0)o+=h,s=e,y=(l=g[p=0])/m[i-s-1]%10|0;else if((p=a((o+1)/h))>=g.length){if(!n)break t;for(;g.length<=p;g.push(0));l=y=0,i=1,s=(o%=h)-h+1}else{for(l=c=g[p],i=1;c>=10;c/=10,i++);y=(s=(o%=h)-h+i)<0?0:l/m[i-s-1]%10|0}if(n=n||e<0||null!=g[p+1]||(s<0?l:l%m[i-s-1]),n=r<4?(y||n)&&(0==r||r==(t.s<0?3:2)):y>5||5==y&&(4==r||n||6==r&&(o>0?s>0?l/m[i-s]:0:g[p-1])%10&1||r==(t.s<0?8:7)),e<1||!g[0])return g.length=0,n?(e-=t.e+1,g[0]=m[(h-e%h)%h],t.e=-e||0):g[0]=t.e=0,t;if(0==o?(g.length=p,c=1,p--):(g.length=p+1,c=m[h-o],g[p]=s>0?u(l/m[i-s]%m[s])*c:0),n)for(;;){if(0==p){for(o=1,s=g[0];s>=10;s/=10,o++);for(s=g[0]+=c,c=1;s>=10;s/=10,c++);o!=c&&(t.e++,g[0]==f&&(g[0]=1));break}if(g[p]+=c,g[p]!=f)break;g[p--]=0,c=1}for(o=g.length;0===g[--o];g.pop());}t.e>F?t.c=t.e=null:t.e<L&&(t.c=[t.e=0])}return t}return H.clone=t,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(c+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(b(r=t[e],0,g,e),P=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(b(r=t[e],0,8,e),j=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&(w(r=t[e])?(b(r[0],-g,0,e),b(r[1],0,g,e),N=r[0],D=r[1]):(b(r,-g,g,e),N=-(D=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if(w(r=t[e]))b(r[0],-g,-1,e),b(r[1],1,g,e),L=r[0],F=r[1];else{if(b(r,-g,g,e),!r)throw Error(c+e+" cannot be zero: "+r);L=-(F=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if((r=t[e])!==!!r)throw Error(c+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw B=!r,Error(c+"crypto unavailable");B=r}else B=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(b(r=t[e],0,9,e),U=r),t.hasOwnProperty(e="POW_PRECISION")&&(b(r=t[e],0,g,e),M=r),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(r=t[e]))throw Error(c+e+" not an object: "+r);q=r}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.$|\.|(.).*\1/.test(r))throw Error(c+e+" invalid: "+r);V=r}}return{DECIMAL_PLACES:P,ROUNDING_MODE:j,EXPONENTIAL_AT:[N,D],RANGE:[L,F],CRYPTO:B,MODULO_MODE:U,POW_PRECISION:M,FORMAT:q,ALPHABET:V}},H.isBigNumber=function(t){return t instanceof H||t&&!0===t._isBigNumber||!1},H.maximum=H.max=function(){return Y(arguments,R.lt)},H.minimum=H.min=function(){return Y(arguments,R.gt)},H.random=(o=9007199254740992*Math.random()&2097151?function(){return u(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,r,n,i,s,l=0,f=[],p=new H(O);if(null==t?t=P:b(t,0,g),i=a(t/h),B)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(i*=2));l<i;)(s=131072*e[l]+(e[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),e[l]=r[0],e[l+1]=r[1]):(f.push(s%1e14),l+=2);l=i/2}else{if(!crypto.randomBytes)throw B=!1,Error(c+"crypto unavailable");for(e=crypto.randomBytes(i*=7);l<i;)(s=281474976710656*(31&e[l])+1099511627776*e[l+1]+4294967296*e[l+2]+16777216*e[l+3]+(e[l+4]<<16)+(e[l+5]<<8)+e[l+6])>=9e15?crypto.randomBytes(7).copy(e,l):(f.push(s%1e14),l+=7);l=i/7}if(!B)for(;l<i;)(s=o())<9e15&&(f[l++]=s%1e14);for(i=f[--l],t%=h,i&&t&&(s=d[h-t],f[l]=u(i/s)*s);0===f[l];f.pop(),l--);if(l<0)f=[n=0];else{for(n=-1;0===f[0];f.splice(0,1),n-=h);for(l=1,s=f[0];s>=10;s/=10,l++);l<h&&(n-=h-l)}return p.e=n,p.c=f,p}),n=function(){function t(t,e,r,n){for(var i,o,s=[0],a=0,u=t.length;a<u;){for(o=s.length;o--;s[o]*=e);for(s[0]+=n.indexOf(t.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(e,n,i,o,s){var a,u,c,l,f,h,p,d,y=e.indexOf("."),g=P,m=j;for(y>=0&&(l=M,M=0,e=e.replace(".",""),h=(d=new H(n)).pow(e.length-y),M=l,d.c=t(A(v(h.c),h.e,"0"),10,i,"0123456789"),d.e=d.c.length),c=l=(p=t(e,n,i,s?(a=V,"0123456789"):(a="0123456789",V))).length;0==p[--l];p.pop());if(!p[0])return a.charAt(0);if(y<0?--c:(h.c=p,h.e=c,h.s=o,p=(h=r(h,d,g,m,i)).c,f=h.r,c=h.e),y=p[u=c+g+1],l=i/2,f=f||u<0||null!=p[u+1],f=m<4?(null!=y||f)&&(0==m||m==(h.s<0?3:2)):y>l||y==l&&(4==m||f||6==m&&1&p[u-1]||m==(h.s<0?8:7)),u<1||!p[0])e=f?A(a.charAt(1),-g,a.charAt(0)):a.charAt(0);else{if(p.length=u,f)for(--i;++p[--u]>i;)p[u]=0,u||(++c,p=[1].concat(p));for(l=p.length;!p[--l];);for(y=0,e="";y<=l;e+=a.charAt(p[y++]));e=A(e,c,a.charAt(0))}return e}}(),r=function(){function t(t,e,r){var n,i,o,s,a=0,u=t.length,c=e%y,l=e/y|0;for(t=t.slice();u--;)a=((i=c*(o=t[u]%y)+(n=l*o+(s=t[u]/y|0)*c)%y*y+a)/r|0)+(n/y|0)+l*s,t[u]=i%r;return a&&(t=[a].concat(t)),t}function e(t,e,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,i,o,s,a){var c,l,p,d,y,g,v,_,b,w,E,k,A,S,x,C,I,T=n.s==i.s?1:-1,R=n.c,O=i.c;if(!(R&&R[0]&&O&&O[0]))return new H(n.s&&i.s&&(R?!O||R[0]!=O[0]:O)?R&&0==R[0]||!O?0*T:T/0:NaN);for(b=(_=new H(T)).c=[],T=o+(l=n.e-i.e)+1,a||(a=f,l=m(n.e/h)-m(i.e/h),T=T/h|0),p=0;O[p]==(R[p]||0);p++);if(O[p]>(R[p]||0)&&l--,T<0)b.push(1),d=!0;else{for(S=R.length,C=O.length,p=0,T+=2,(y=u(a/(O[0]+1)))>1&&(O=t(O,y,a),R=t(R,y,a),C=O.length,S=R.length),A=C,E=(w=R.slice(0,C)).length;E<C;w[E++]=0);I=O.slice(),I=[0].concat(I),x=O[0],O[1]>=a/2&&x++;do{if(y=0,(c=e(O,w,C,E))<0){if(k=w[0],C!=E&&(k=k*a+(w[1]||0)),(y=u(k/x))>1)for(y>=a&&(y=a-1),v=(g=t(O,y,a)).length,E=w.length;1==e(g,w,v,E);)y--,r(g,C<v?I:O,v,a),v=g.length,c=1;else 0==y&&(c=y=1),v=(g=O.slice()).length;if(v<E&&(g=[0].concat(g)),r(w,g,E,a),E=w.length,-1==c)for(;e(O,w,C,E)<1;)y++,r(w,C<E?I:O,E,a),E=w.length}else 0===c&&(y++,w=[0]);b[p++]=y,w[0]?w[E++]=R[A]||0:(w=[R[A]],E=1)}while((A++<S||null!=w[0])&&T--);d=null!=w[0],b[0]||b.splice(0,1)}if(a==f){for(p=1,T=b[0];T>=10;T/=10,p++);K(_,o+(_.e=p+l*h-1)+1,s,d)}else _.e=l,_.r=+d;return _}}(),S=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,C=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,T=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(t,e,r,n){var i,o=r?e:e.replace(T,"");if(I.test(o))t.s=isNaN(o)?null:o<0?-1:1,t.c=t.e=null;else{if(!r&&(o=o.replace(S,(function(t,e,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?t:e})),n&&(i=n,o=o.replace(x,"$1").replace(C,"0.$1")),e!=o))return new H(o,i);if(H.DEBUG)throw Error(c+"Not a"+(n?" base "+n:"")+" number: "+e);t.c=t.e=t.s=null}},R.absoluteValue=R.abs=function(){var t=new H(this);return t.s<0&&(t.s=1),t},R.comparedTo=function(t,e){return _(this,new H(t,e))},R.decimalPlaces=R.dp=function(t,e){var r,n,i,o=this;if(null!=t)return b(t,0,g),null==e?e=j:b(e,0,8),K(new H(o),t+o.e+1,e);if(!(r=o.c))return null;if(n=((i=r.length-1)-m(this.e/h))*h,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},R.dividedBy=R.div=function(t,e){return r(this,new H(t,e),P,j)},R.dividedToIntegerBy=R.idiv=function(t,e){return r(this,new H(t,e),0,1)},R.exponentiatedBy=R.pow=function(t,e){var r,n,i,o,s,l,f,p=this;if((t=new H(t)).c&&!t.isInteger())throw Error(c+"Exponent not an integer: "+t);if(null!=e&&(e=new H(e)),o=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return f=new H(Math.pow(+p.valueOf(),o?2-E(t):+t)),e?f.mod(e):f;if(s=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new H(NaN);(n=!s&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||o&&p.c[1]>=24e7:p.c[0]<8e13||o&&p.c[0]<=9999975e7)))return i=p.s<0&&E(t)?-0:0,p.e>-1&&(i=1/i),new H(s?1/i:i);M&&(i=a(M/h+2))}for(o?(r=new H(.5),l=E(t)):l=t%2,s&&(t.s=1),f=new H(O);;){if(l){if(!(f=f.times(p)).c)break;i?f.c.length>i&&(f.c.length=i):n&&(f=f.mod(e))}if(o){if(K(t=t.times(r),t.e+1,1),!t.c[0])break;o=t.e>14,l=E(t)}else{if(!(t=u(t/2)))break;l=t%2}p=p.times(p),i?p.c&&p.c.length>i&&(p.c.length=i):n&&(p=p.mod(e))}return n?f:(s&&(f=O.div(f)),e?f.mod(e):i?K(f,M,j,void 0):f)},R.integerValue=function(t){var e=new H(this);return null==t?t=j:b(t,0,8),K(e,e.e+1,t)},R.isEqualTo=R.eq=function(t,e){return 0===_(this,new H(t,e))},R.isFinite=function(){return!!this.c},R.isGreaterThan=R.gt=function(t,e){return _(this,new H(t,e))>0},R.isGreaterThanOrEqualTo=R.gte=function(t,e){return 1===(e=_(this,new H(t,e)))||0===e},R.isInteger=function(){return!!this.c&&m(this.e/h)>this.c.length-2},R.isLessThan=R.lt=function(t,e){return _(this,new H(t,e))<0},R.isLessThanOrEqualTo=R.lte=function(t,e){return-1===(e=_(this,new H(t,e)))||0===e},R.isNaN=function(){return!this.s},R.isNegative=function(){return this.s<0},R.isPositive=function(){return this.s>0},R.isZero=function(){return!!this.c&&0==this.c[0]},R.minus=function(t,e){var r,n,i,o,s=this,a=s.s;if(e=(t=new H(t,e)).s,!a||!e)return new H(NaN);if(a!=e)return t.s=-e,s.plus(t);var u=s.e/h,c=t.e/h,l=s.c,p=t.c;if(!u||!c){if(!l||!p)return l?(t.s=-e,t):new H(p?s:NaN);if(!l[0]||!p[0])return p[0]?(t.s=-e,t):new H(l[0]?s:3==j?-0:0)}if(u=m(u),c=m(c),l=l.slice(),a=u-c){for((o=a<0)?(a=-a,i=l):(c=u,i=p),i.reverse(),e=a;e--;i.push(0));i.reverse()}else for(n=(o=(a=l.length)<(e=p.length))?a:e,a=e=0;e<n;e++)if(l[e]!=p[e]){o=l[e]<p[e];break}if(o&&(i=l,l=p,p=i,t.s=-t.s),(e=(n=p.length)-(r=l.length))>0)for(;e--;l[r++]=0);for(e=f-1;n>a;){if(l[--n]<p[n]){for(r=n;r&&!l[--r];l[r]=e);--l[r],l[n]+=f}l[n]-=p[n]}for(;0==l[0];l.splice(0,1),--c);return l[0]?$(t,l,c):(t.s=3==j?-1:1,t.c=[t.e=0],t)},R.modulo=R.mod=function(t,e){var n,i,o=this;return t=new H(t,e),!o.c||!t.s||t.c&&!t.c[0]?new H(NaN):!t.c||o.c&&!o.c[0]?new H(o):(9==U?(i=t.s,t.s=1,n=r(o,t,0,3),t.s=i,n.s*=i):n=r(o,t,0,U),(t=o.minus(n.times(t))).c[0]||1!=U||(t.s=o.s),t)},R.multipliedBy=R.times=function(t,e){var r,n,i,o,s,a,u,c,l,p,d,g,v,_,b,w=this,E=w.c,k=(t=new H(t,e)).c;if(!(E&&k&&E[0]&&k[0]))return!w.s||!t.s||E&&!E[0]&&!k||k&&!k[0]&&!E?t.c=t.e=t.s=null:(t.s*=w.s,E&&k?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=m(w.e/h)+m(t.e/h),t.s*=w.s,(u=E.length)<(p=k.length)&&(v=E,E=k,k=v,i=u,u=p,p=i),i=u+p,v=[];i--;v.push(0));for(_=f,b=y,i=p;--i>=0;){for(r=0,d=k[i]%b,g=k[i]/b|0,o=i+(s=u);o>i;)r=((c=d*(c=E[--s]%b)+(a=g*c+(l=E[s]/b|0)*d)%b*b+v[o]+r)/_|0)+(a/b|0)+g*l,v[o--]=c%_;v[o]=r}return r?++n:v.splice(0,1),$(t,v,n)},R.negated=function(){var t=new H(this);return t.s=-t.s||null,t},R.plus=function(t,e){var r,n=this,i=n.s;if(e=(t=new H(t,e)).s,!i||!e)return new H(NaN);if(i!=e)return t.s=-e,n.minus(t);var o=n.e/h,s=t.e/h,a=n.c,u=t.c;if(!o||!s){if(!a||!u)return new H(i/0);if(!a[0]||!u[0])return u[0]?t:new H(a[0]?n:0*i)}if(o=m(o),s=m(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=u):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(e=u.length)<0&&(r=u,u=a,a=r,e=i),i=0;e;)i=(a[--e]=a[e]+u[e]+i)/f|0,a[e]=f===a[e]?0:a[e]%f;return i&&(a=[i].concat(a),++s),$(t,a,s)},R.precision=R.sd=function(t,e){var r,n,i,o=this;if(null!=t&&t!==!!t)return b(t,1,g),null==e?e=j:b(e,0,8),K(new H(o),t,e);if(!(r=o.c))return null;if(n=(i=r.length-1)*h+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return t&&o.e+1>n&&(n=o.e+1),n},R.shiftedBy=function(t){return b(t,-p,p),this.times("1e"+t)},R.squareRoot=R.sqrt=function(){var t,e,n,i,o,s=this,a=s.c,u=s.s,c=s.e,l=P+4,f=new H("0.5");if(1!==u||!a||!a[0])return new H(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(u=Math.sqrt(+s))||u==1/0?(((e=v(a)).length+c)%2==0&&(e+="0"),u=Math.sqrt(e),c=m((c+1)/2)-(c<0||c%2),n=new H(e=u==1/0?"1e"+c:(e=u.toExponential()).slice(0,e.indexOf("e")+1)+c)):n=new H(u+""),n.c[0])for((u=(c=n.e)+l)<3&&(u=0);;)if(o=n,n=f.times(o.plus(r(s,o,l,1))),v(o.c).slice(0,u)===(e=v(n.c)).slice(0,u)){if(n.e<c&&--u,"9999"!=(e=e.slice(u-3,u+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(K(n,n.e+P+2,1),t=!n.times(n).eq(s));break}if(!i&&(K(o,o.e+P+2,0),o.times(o).eq(s))){n=o;break}l+=4,u+=4,i=1}return K(n,n.e+P+1,j,t)},R.toExponential=function(t,e){return null!=t&&(b(t,0,g),t++),z(this,t,e,1)},R.toFixed=function(t,e){return null!=t&&(b(t,0,g),t=t+this.e+1),z(this,t,e)},R.toFormat=function(t,e){var r=this.toFixed(t,e);if(this.c){var n,i=r.split("."),o=+q.groupSize,s=+q.secondaryGroupSize,a=q.groupSeparator,u=i[0],c=i[1],l=this.s<0,f=l?u.slice(1):u,h=f.length;if(s&&(n=o,o=s,s=n,h-=n),o>0&&h>0){for(n=h%o||o,u=f.substr(0,n);n<h;n+=o)u+=a+f.substr(n,o);s>0&&(u+=a+f.slice(n)),l&&(u="-"+u)}r=c?u+q.decimalSeparator+((s=+q.fractionGroupSize)?c.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"+q.fractionGroupSeparator):c):u}return r},R.toFraction=function(t){var e,n,i,o,s,a,u,l,f,p,y,g,m=this,_=m.c;if(null!=t&&(!(l=new H(t)).isInteger()&&(l.c||1!==l.s)||l.lt(O)))throw Error(c+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+t);if(!_)return m.toString();for(n=new H(O),p=i=new H(O),o=f=new H(O),g=v(_),a=n.e=g.length-m.e-1,n.c[0]=d[(u=a%h)<0?h+u:u],t=!t||l.comparedTo(n)>0?a>0?n:p:l,u=F,F=1/0,l=new H(g),f.c[0]=0;y=r(l,n,0,1),1!=(s=i.plus(y.times(o))).comparedTo(t);)i=o,o=s,p=f.plus(y.times(s=p)),f=s,n=l.minus(y.times(s=n)),l=s;return s=r(t.minus(i),o,0,1),f=f.plus(s.times(p)),i=i.plus(s.times(o)),f.s=p.s=m.s,e=r(p,o,a*=2,j).minus(m).abs().comparedTo(r(f,i,a,j).minus(m).abs())<1?[p.toString(),o.toString()]:[f.toString(),i.toString()],F=u,e},R.toNumber=function(){return+this},R.toPrecision=function(t,e){return null!=t&&b(t,1,g),z(this,t,e,2)},R.toString=function(t){var e,r=this,i=r.s,o=r.e;return null===o?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(e=v(r.c),null==t?e=o<=N||o>=D?k(e,o):A(e,o,"0"):(b(t,2,V.length,"Base"),e=n(A(e,o,"0"),10,t,i,!0)),i<0&&r.c[0]&&(e="-"+e)),e},R.valueOf=R.toJSON=function(){var t,e=this,r=e.e;return null===r?e.toString():(t=v(e.c),t=r<=N||r>=D?k(t,r):A(t,r,"0"),e.s<0?"-"+t:t)},R._isBigNumber=!0,null!=e&&H.set(e),H}()).default=o.BigNumber=o,void 0===(n=function(){return o}.call(e,r,e,t))||(t.exports=n)}()},function(t,e,r){var n;n=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=32)}([function(t,e,r){"use strict";(function(t,n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=r(17),s=r(15),a=r(37),u=r(16),c=r(18),l={};e.clone=function(r,n){if("object"!==(void 0===r?"undefined":i(r))||null===r)return r;var o=(n=n||new Map).get(r);if(o)return o;var s=void 0,a=!1;if(Array.isArray(r))s=[],a=!0;else if(t.isBuffer(r))s=t.from(r);else if(r instanceof Date)s=new Date(r.getTime());else if(r instanceof RegExp)s=new RegExp(r);else{var u=Object.getPrototypeOf(r);u&&u.isImmutable?s=r:(s=Object.create(u),a=!0)}if(n.set(r,s),a)for(var c=Object.getOwnPropertyNames(r),l=0;l<c.length;++l){var f=c[l],h=Object.getOwnPropertyDescriptor(r,f);h&&(h.get||h.set)?Object.defineProperty(s,f,h):s[f]=e.clone(r[f],n)}return s},e.merge=function(r,n,o,s){if(e.assert(r&&"object"===(void 0===r?"undefined":i(r)),"Invalid target value: must be an object"),e.assert(null==n||"object"===(void 0===n?"undefined":i(n)),"Invalid source value: must be null, undefined, or an object"),!n)return r;if(Array.isArray(n)){e.assert(Array.isArray(r),"Cannot merge array onto an object"),!1===s&&(r.length=0);for(var a=0;a<n.length;++a)r.push(e.clone(n[a]));return r}for(var u=Object.keys(n),c=0;c<u.length;++c){var l=u[c];if("__proto__"!==l){var f=n[l];f&&"object"===(void 0===f?"undefined":i(f))?!r[l]||"object"!==i(r[l])||Array.isArray(r[l])!==Array.isArray(f)||f instanceof Date||t.isBuffer(f)||f instanceof RegExp?r[l]=e.clone(f):e.merge(r[l],f,o,s):null!=f?r[l]=f:!1!==o&&(r[l]=f)}}return r},e.applyToDefaults=function(t,r,n){if(e.assert(t&&"object"===(void 0===t?"undefined":i(t)),"Invalid defaults value: must be an object"),e.assert(!r||!0===r||"object"===(void 0===r?"undefined":i(r)),"Invalid options value: must be true, falsy or an object"),!r)return null;var o=e.clone(t);return!0===r?o:e.merge(o,r,!0===n,!1)},e.cloneWithShallow=function(t,r){if(!t||"object"!==(void 0===t?"undefined":i(t)))return t;var n=l.store(t,r),o=e.clone(t);return l.restore(o,t,n),o},l.store=function(t,r){for(var n={},i=0;i<r.length;++i){var o=r[i],s=e.reach(t,o);void 0!==s&&(n[o]=s,l.reachSet(t,o,void 0))}return n},l.restore=function(t,e,r){for(var n=Object.keys(r),i=0;i<n.length;++i){var o=n[i];l.reachSet(t,o,r[o]),l.reachSet(e,o,r[o])}},l.reachSet=function(t,e,r){for(var n=e.split("."),i=t,o=0;o<n.length;++o){var s=n[o];o+1===n.length&&(i[s]=r),i=i[s]}},e.applyToDefaultsWithShallow=function(t,r,n){if(e.assert(t&&"object"===(void 0===t?"undefined":i(t)),"Invalid defaults value: must be an object"),e.assert(!r||!0===r||"object"===(void 0===r?"undefined":i(r)),"Invalid options value: must be true, falsy or an object"),e.assert(n&&Array.isArray(n),"Invalid keys"),!r)return null;var o=e.cloneWithShallow(t,n);if(!0===r)return o;var s=l.store(r,n);return e.merge(o,r,!1,!1),l.restore(o,r,s),o},e.deepEqual=function(r,n,o,s){o=o||{prototype:!0};var a=void 0===r?"undefined":i(r);if(a!==(void 0===n?"undefined":i(n)))return!1;if("object"!==a||null===r||null===n)return r===n?0!==r||1/r==1/n:r!=r&&n!=n;if(-1!==(s=s||[]).indexOf(r))return!0;if(s.push(r),Array.isArray(r)){if(!Array.isArray(n))return!1;if(!o.part&&r.length!==n.length)return!1;for(var u=0;u<r.length;++u){if(o.part){for(var c=!1,l=0;l<n.length;++l)if(e.deepEqual(r[u],n[l],o)){c=!0;break}return c}if(!e.deepEqual(r[u],n[u],o))return!1}return!0}if(t.isBuffer(r)){if(!t.isBuffer(n))return!1;if(r.length!==n.length)return!1;for(var f=0;f<r.length;++f)if(r[f]!==n[f])return!1;return!0}if(r instanceof Date)return n instanceof Date&&r.getTime()===n.getTime();if(r instanceof RegExp)return n instanceof RegExp&&r.toString()===n.toString();if(o.prototype&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(n))return!1;var h=Object.getOwnPropertyNames(r);if(!o.part&&h.length!==Object.getOwnPropertyNames(n).length)return!1;for(var p=0;p<h.length;++p){var d=h[p],y=Object.getOwnPropertyDescriptor(r,d);if(y.get){if(!e.deepEqual(y,Object.getOwnPropertyDescriptor(n,d),o,s))return!1}else if(!e.deepEqual(r[d],n[d],o,s))return!1}return!0},e.unique=function(t,e){var r=void 0;if(e){r=[];var n=new Set;t.forEach((function(t){var i=t[e];n.has(i)||(n.add(i),r.push(t))}))}else r=Array.from(new Set(t));return r},e.mapToObject=function(t,e){if(!t)return null;for(var r={},n=0;n<t.length;++n)e?t[n][e]&&(r[t[n][e]]=!0):r[t[n]]=!0;return r},e.intersect=function(t,r,n){if(!t||!r)return[];for(var i=[],o=Array.isArray(t)?e.mapToObject(t):t,s={},a=0;a<r.length;++a)if(o[r[a]]&&!s[r[a]]){if(n)return r[a];i.push(r[a]),s[r[a]]=!0}return n?null:i},e.contain=function(t,r,n){var o=null;"object"!==(void 0===t?"undefined":i(t))||"object"!==(void 0===r?"undefined":i(r))||Array.isArray(t)||Array.isArray(r)?r=[].concat(r):(o=r,r=Object.keys(r)),n=n||{},e.assert("string"==typeof t||"object"===(void 0===t?"undefined":i(t)),"Reference must be string or an object"),e.assert(r.length,"Values array cannot be empty");var s=void 0,a=void 0;if(n.deep){s=e.deepEqual;var u=n.hasOwnProperty("only"),c=n.hasOwnProperty("part");a={prototype:u?n.only:!!c&&!n.part,part:u?!n.only:!c||n.part}}else s=function(t,e){return t===e};for(var l=!1,f=new Array(r.length),h=0;h<f.length;++h)f[h]=0;if("string"==typeof t){for(var p="(",d=0;d<r.length;++d){var y=r[d];e.assert("string"==typeof y,"Cannot compare string reference to non-string value"),p+=(d?"|":"")+e.escapeRegex(y)}var g=new RegExp(p+")","g");l=!!t.replace(g,(function(t,e){var n=r.indexOf(e);return++f[n],""}))}else if(Array.isArray(t))for(var m=0;m<t.length;++m){for(var v=!1,_=0;_<r.length&&!1===v;++_)v=s(r[_],t[m],a)&&_;!1!==v?++f[v]:l=!0}else for(var b=Object.getOwnPropertyNames(t),w=0;w<b.length;++w){var E=b[w],k=r.indexOf(E);if(-1!==k){if(o&&!s(o[E],t[E],a))return!1;++f[k]}else l=!0}for(var A=!1,S=0;S<f.length;++S)if(A=A||!!f[S],n.once&&f[S]>1||!n.part&&!f[S])return!1;return(!n.only||!l)&&A},e.flatten=function(t,r){for(var n=r||[],i=0;i<t.length;++i)Array.isArray(t[i])?e.flatten(t[i],n):n.push(t[i]);return n},e.reach=function(t,r,n){if(!1===r||null==r)return t;"string"==typeof(n=n||{})&&(n={separator:n});for(var o=r.split(n.separator||"."),s=t,a=0;a<o.length;++a){var u=o[a];if("-"===u[0]&&Array.isArray(s)&&(u=u.slice(1,u.length),u=s.length-u),!s||"object"!==(void 0===s?"undefined":i(s))&&"function"!=typeof s||!(u in s)||"object"!==(void 0===s?"undefined":i(s))&&!1===n.functions){e.assert(!n.strict||a+1===o.length,"Missing segment",u,"in reach path ",r),e.assert("object"===(void 0===s?"undefined":i(s))||!0===n.functions||"function"!=typeof s,"Invalid segment",u,"in reach path ",r),s=n.default;break}s=s[u]}return s},e.reachTemplate=function(t,r,n){return r.replace(/{([^}]+)}/g,(function(r,i){var o=e.reach(t,i,n);return null==o?"":o}))},e.formatStack=function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push([n.getFileName(),n.getLineNumber(),n.getColumnNumber(),n.getFunctionName(),n.isConstructor()])}return e},e.formatTrace=function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push((n[4]?"new ":"")+n[3]+" ("+n[0]+":"+n[1]+":"+n[2]+")")}return e},e.callStack=function(t){var r=Error.prepareStackTrace;Error.prepareStackTrace=function(t,e){return e};var n={};Error.captureStackTrace(n,this);var i=n.stack;return Error.prepareStackTrace=r,e.formatStack(i).slice(1+t)},e.displayStack=function(t){var r=e.callStack(void 0===t?1:t+1);return e.formatTrace(r)},e.abortThrow=!1,e.abort=function(t,r){if("test"===n.env.NODE_ENV||!0===e.abortThrow)throw new Error(t||"Unknown error");var i="";r||(i=e.displayStack(1).join("\n\t")),console.log("ABORT: "+t+"\n\t"+i),n.exit(1)},e.assert=function(t){if(!t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(1===n.length&&n[0]instanceof Error)throw n[0];var s=n.filter((function(t){return""!==t})).map((function(t){return"string"==typeof t?t:t instanceof Error?t.message:e.stringify(t)}));throw new o.AssertionError({message:s.join(" ")||"Unknown error",actual:!1,expected:!0,operator:"==",stackStartFunction:e.assert})}},e.Bench=function(){this.ts=0,this.reset()},e.Bench.prototype.reset=function(){this.ts=e.Bench.now()},e.Bench.prototype.elapsed=function(){return e.Bench.now()-this.ts},e.Bench.now=function(){var t=n.hrtime();return 1e3*t[0]+t[1]/1e6},e.escapeRegex=function(t){return t.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},e.base64urlEncode=function(r,n){return e.assert("string"==typeof r||t.isBuffer(r),"value must be string or buffer"),(t.isBuffer(r)?r:t.from(r,n||"binary")).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")},e.base64urlDecode=function(e,r){if("string"!=typeof e)throw new Error("Value not a string");if(!/^[\w\-]*$/.test(e))throw new Error("Invalid character");var n=t.from(e,"base64");return"buffer"===r?n:n.toString(r||"binary")},e.escapeHeaderAttribute=function(t){return e.assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(t),"Bad attribute value ("+t+")"),t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},e.escapeHtml=function(t){return c.escapeHtml(t)},e.escapeJavaScript=function(t){return c.escapeJavaScript(t)},e.escapeJson=function(t){return c.escapeJson(t)},e.once=function(t){if(t._hoekOnce)return t;var e=!1,r=function(){if(!e){e=!0;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(null,n)}};return r._hoekOnce=!0,r},e.isInteger=Number.isSafeInteger,e.ignore=function(){},e.inherits=u.inherits,e.format=u.format,e.transform=function(t,r,n){e.assert(null==t||"object"===(void 0===t?"undefined":i(t))||Array.isArray(t),"Invalid source object: must be null, undefined, an object, or an array");var o="object"===(void 0===n?"undefined":i(n))&&null!==n&&n.separator||".";if(Array.isArray(t)){for(var s=[],a=0;a<t.length;++a)s.push(e.transform(t[a],r,n));return s}for(var u={},c=Object.keys(r),l=0;l<c.length;++l){var f=c[l],h=f.split(o),p=r[f];e.assert("string"==typeof p,'All mappings must be "." delineated strings');for(var d=void 0,y=u;h.length>1;)y[d=h.shift()]||(y[d]={}),y=y[d];y[d=h.shift()]=e.reach(t,p,n)}return u},e.uniqueFilename=function(t,e){e=e?"."!==e[0]?"."+e:e:"",t=a.resolve(t);var r=[Date.now(),n.pid,s.randomBytes(8).toString("hex")].join("-")+e;return a.join(t,r)},e.stringify=function(){try{for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return JSON.stringify.apply(null,e)}catch(t){return"[Cannot display object: "+t.message+"]"}},e.shallow=function(t){for(var e={},r=Object.keys(t),n=0;n<r.length;++n){var i=r[n];e[i]=t[i]}return e},e.wait=function(t){return new Promise((function(e){return setTimeout(e,t)}))},e.block=function(){return new Promise(e.ignore)}}).call(e,r(3).Buffer,r(7))},function(t,e,r){"use strict";var n=r(0);e.create=function(t,e){n.assert("string"==typeof t,"Invalid reference key:",t);var r=n.clone(e),i=function t(e,i){return n.reach(t.isContext?i.context:e,t.key,r)};return i.isContext=t[0]===(r&&r.contextPrefix||"$"),i.key=i.isContext?t.slice(1):t,i.path=i.key.split(r&&r.separator||"."),i.depth=i.path.length,i.root=i.path[0],i.isJoi=!0,i.toString=function(){return(i.isContext?"context:":"ref:")+i.key},i},e.isRef=function(t){return"function"==typeof t&&t.isJoi},e.push=function(t,r){e.isRef(r)&&!r.isContext&&t.push(r.root)}},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),s=r(11),a=r(1),u=r(6),c=null,l=null,f={Set:r(9),defaults:{abortEarly:!0,convert:!0,allowUnknown:!1,skipFunctions:!1,stripUnknown:!1,language:{},presence:"optional",strip:!1,noDefaults:!1,escapeHtml:!1}};t.exports=f.Any=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l=l||r(4),this.isJoi=!0,this._type="any",this._settings=null,this._valids=new f.Set,this._invalids=new f.Set,this._tests=[],this._refs=[],this._flags={},this._description=null,this._unit=null,this._notes=[],this._tags=[],this._examples=[],this._meta=[],this._inner={}}return t.prototype._init=function(){return this},t.prototype.createError=function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._flags;return u.create(t,e,r,n,i)},t.prototype.createOverrideError=function(t,e,r,n,i,o){return u.create(t,e,r,n,this._flags,i,o)},t.prototype.checkOptions=function(t){var e=r(21).options.validate(t);if(e.error)throw new Error(e.error.details[0].message)},t.prototype.clone=function(){var t=Object.create(Object.getPrototypeOf(this));t.isJoi=!0,t._currentJoi=this._currentJoi,t._type=this._type,t._settings=this._settings,t._baseType=this._baseType,t._valids=this._valids.slice(),t._invalids=this._invalids.slice(),t._tests=this._tests.slice(),t._refs=this._refs.slice(),t._flags=o.clone(this._flags),t._description=this._description,t._unit=this._unit,t._notes=this._notes.slice(),t._tags=this._tags.slice(),t._examples=this._examples.slice(),t._meta=this._meta.slice(),t._inner={};for(var e=Object.keys(this._inner),r=0;r<e.length;++r){var n=e[r];t._inner[n]=this._inner[n]?this._inner[n].slice():null}return t},t.prototype.concat=function(t){o.assert(t instanceof f.Any,"Invalid schema object"),o.assert("any"===this._type||"any"===t._type||t._type===this._type,"Cannot merge type",this._type,"with another type:",t._type);var e=this.clone();if("any"===this._type&&"any"!==t._type){for(var r=t.clone(),n=["_settings","_valids","_invalids","_tests","_refs","_flags","_description","_unit","_notes","_tags","_examples","_meta","_inner"],i=0;i<n.length;++i)r[n[i]]=e[n[i]];e=r}e._settings=e._settings?s.concat(e._settings,t._settings):t._settings,e._valids.merge(t._valids,t._invalids),e._invalids.merge(t._invalids,t._valids),e._tests=e._tests.concat(t._tests),e._refs=e._refs.concat(t._refs),o.merge(e._flags,t._flags),e._description=t._description||e._description,e._unit=t._unit||e._unit,e._notes=e._notes.concat(t._notes),e._tags=e._tags.concat(t._tags),e._examples=e._examples.concat(t._examples),e._meta=e._meta.concat(t._meta);for(var a=Object.keys(t._inner),u="object"===e._type,c=0;c<a.length;++c){var l=a[c],h=t._inner[l];if(h){var p=e._inner[l];if(p)if(u&&"children"===l){for(var d={},y=0;y<p.length;++y)d[p[y].key]=y;for(var g=0;g<h.length;++g){var m=h[g].key;d[m]>=0?p[d[m]]={key:m,schema:p[d[m]].schema.concat(h[g].schema)}:p.push(h[g])}}else e._inner[l]=e._inner[l].concat(h);else e._inner[l]=h.slice()}}return e},t.prototype._test=function(t,e,r,n){var i=this.clone();return i._tests.push({func:r,name:t,arg:e,options:n}),i},t.prototype.options=function(t){o.assert(!t.context,"Cannot override context"),this.checkOptions(t);var e=this.clone();return e._settings=s.concat(e._settings,t),e},t.prototype.strict=function(t){var e=this.clone(),r=void 0!==t&&!t;return e._settings=s.concat(e._settings,{convert:r}),e},t.prototype.raw=function(t){var e=void 0===t||t;if(this._flags.raw===e)return this;var r=this.clone();return r._flags.raw=e,r},t.prototype.error=function(t){o.assert(t&&(t instanceof Error||"function"==typeof t),"Must provide a valid Error object or a function");var e=this.clone();return e._flags.error=t,e},t.prototype.allow=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=this.clone();e=o.flatten(e);for(var i=0;i<e.length;++i){var s=e[i];o.assert(void 0!==s,"Cannot call allow/valid/invalid with undefined"),n._invalids.remove(s),n._valids.add(s,n._refs)}return n},t.prototype.valid=function(){var t=this.allow.apply(this,arguments);return t._flags.allowOnly=!0,t},t.prototype.invalid=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=this.clone();e=o.flatten(e);for(var i=0;i<e.length;++i){var s=e[i];o.assert(void 0!==s,"Cannot call allow/valid/invalid with undefined"),n._valids.remove(s),n._invalids.add(s,n._refs)}return n},t.prototype.required=function(){if("required"===this._flags.presence)return this;var t=this.clone();return t._flags.presence="required",t},t.prototype.optional=function(){if("optional"===this._flags.presence)return this;var t=this.clone();return t._flags.presence="optional",t},t.prototype.forbidden=function(){if("forbidden"===this._flags.presence)return this;var t=this.clone();return t._flags.presence="forbidden",t},t.prototype.strip=function(){if(this._flags.strip)return this;var t=this.clone();return t._flags.strip=!0,t},t.prototype.applyFunctionToChildren=function(t,e,r,n){if(1!==(t=[].concat(t)).length||""!==t[0]){n=n?n+".":"";var i=(""===t[0]?t.slice(1):t).map((function(t){return n+t}));throw new Error("unknown key(s) "+i.join(", "))}return this[e].apply(this,r)},t.prototype.default=function(t,e){"function"!=typeof t||a.isRef(t)||(!t.description&&e&&(t.description=e),this._flags.func||o.assert("string"==typeof t.description&&t.description.length>0,"description must be provided when default value is a function"));var r=this.clone();return r._flags.default=t,a.push(r._refs,t),r},t.prototype.empty=function(t){var e=this.clone();return void 0===t?delete e._flags.empty:e._flags.empty=l.schema(this._currentJoi,t),e},t.prototype.when=function(t,e){o.assert(e&&"object"===(void 0===e?"undefined":n(e)),"Invalid options"),o.assert(void 0!==e.then||void 0!==e.otherwise,'options must have at least one of "then" or "otherwise"');var i=e.hasOwnProperty("then")?this.concat(l.schema(this._currentJoi,e.then)):void 0,s=e.hasOwnProperty("otherwise")?this.concat(l.schema(this._currentJoi,e.otherwise)):void 0;c=c||r(10);var a={then:i,otherwise:s};Object.prototype.hasOwnProperty.call(e,"is")&&(a.is=e.is);var u=c.when(t,a);return u._flags.presence="ignore",u._baseType=this,u},t.prototype.description=function(t){o.assert(t&&"string"==typeof t,"Description must be a non-empty string");var e=this.clone();return e._description=t,e},t.prototype.notes=function(t){o.assert(t&&("string"==typeof t||Array.isArray(t)),"Notes must be a non-empty string or array");var e=this.clone();return e._notes=e._notes.concat(t),e},t.prototype.tags=function(t){o.assert(t&&("string"==typeof t||Array.isArray(t)),"Tags must be a non-empty string or array");var e=this.clone();return e._tags=e._tags.concat(t),e},t.prototype.meta=function(t){o.assert(void 0!==t,"Meta cannot be undefined");var e=this.clone();return e._meta=e._meta.concat(t),e},t.prototype.example=function(){o.assert(1===arguments.length,"Missing example");var t=arguments.length<=0?void 0:arguments[0],e=this.clone();return e._examples.push(t),e},t.prototype.unit=function(t){o.assert(t&&"string"==typeof t,"Unit name must be a non-empty string");var e=this.clone();return e._unit=t,e},t.prototype._prepareEmptyValue=function(t){return"string"==typeof t&&this._flags.trim?t.trim():t},t.prototype._validate=function(t,e,r,n){var i=this,c=t;e=e||{key:"",path:[],parent:null,reference:n},this._settings&&(r=s.concat(r,this._settings));var l=[],h=function(){var n=void 0;if(void 0!==t)n=i._flags.raw?c:t;else if(r.noDefaults)n=t;else if(a.isRef(i._flags.default))n=i._flags.default(e.parent,r);else if("function"!=typeof i._flags.default||i._flags.func&&!i._flags.default.description)n=o.clone(i._flags.default);else{var s=void 0;null!==e.parent&&i._flags.default.length>0&&(s=[o.clone(e.parent),r]);var u=f._try(i._flags.default,s);n=u.value,u.error&&l.push(i.createError("any.default",{error:u.error},e,r))}if(l.length&&"function"==typeof i._flags.error){var h=i._flags.error.call(i,l);l="string"==typeof h?[i.createOverrideError("override",{reason:l},e,r,h)]:[].concat(h).map((function(t){return t instanceof Error?t:i.createOverrideError(t.type||"override",t.context,e,r,t.message,t.template)}))}return{value:i._flags.strip?void 0:n,finalValue:n,errors:l.length?l:null}};if(this._coerce){var p=this._coerce.call(this,t,e,r);if(p.errors)return t=p.value,l=l.concat(p.errors),h();t=p.value}this._flags.empty&&!this._flags.empty._validate(this._prepareEmptyValue(t),null,f.defaults).errors&&(t=void 0);var d=this._flags.presence||r.presence;if("optional"===d){if(void 0===t){if(!this._flags.hasOwnProperty("default")||void 0!==this._flags.default||"object"!==this._type)return h();t={}}}else{if("required"===d&&void 0===t)return l.push(this.createError("any.required",null,e,r)),h();if("forbidden"===d)return void 0===t?h():(l.push(this.createError("any.unknown",null,e,r)),h())}if(this._valids.has(t,e,r,this._flags.insensitive))return h();if(this._invalids.has(t,e,r,this._flags.insensitive)&&(l.push(this.createError(""===t?"any.empty":"any.invalid",{value:t,invalids:this._invalids.values({stripUndefined:!0})},e,r)),r.abortEarly||void 0===t))return h();if(this._base){var y=this._base.call(this,t,e,r);if(y.errors)return t=y.value,l=l.concat(y.errors),h();if(y.value!==t){if(t=y.value,this._valids.has(t,e,r,this._flags.insensitive))return h();if(this._invalids.has(t,e,r,this._flags.insensitive)&&(l.push(this.createError(""===t?"any.empty":"any.invalid",{value:t,invalids:this._invalids.values({stripUndefined:!0})},e,r)),r.abortEarly))return h()}}if(this._flags.allowOnly&&(l.push(this.createError("any.allowOnly",{value:t,valids:this._valids.values({stripUndefined:!0})},e,r)),r.abortEarly))return h();for(var g=0;g<this._tests.length;++g){var m=this._tests[g].func.call(this,t,e,r);if(m instanceof u.Err){if(l.push(m),r.abortEarly)return h()}else t=m}return h()},t.prototype._validateWithOptions=function(t,e,r){e&&this.checkOptions(e);var n=s.concat(f.defaults,e),i=this._validate(t,null,n),o=u.process(i.errors,t);return r?r(o,i.value):{error:o,value:i.value,then:function(t,e){return o?Promise.reject(o).catch(e):Promise.resolve(i.value).then(t)},catch:function(t){return o?Promise.reject(o).catch(t):Promise.resolve(i.value)}}},t.prototype.validate=function(t,e,r){return"function"==typeof e?this._validateWithOptions(t,null,e):this._validateWithOptions(t,e,r)},t.prototype.describe=function(){var t=this,e={type:this._type},r=Object.keys(this._flags);if(r.length)if(["empty","default","lazy","label"].some((function(e){return t._flags.hasOwnProperty(e)}))){e.flags={};for(var n=0;n<r.length;++n){var i=r[n];"empty"===i?e.flags[i]=this._flags[i].describe():"default"===i?a.isRef(this._flags[i])?e.flags[i]=this._flags[i].toString():"function"==typeof this._flags[i]?e.flags[i]={description:this._flags[i].description,function:this._flags[i]}:e.flags[i]=this._flags[i]:"lazy"===i||"label"===i||(e.flags[i]=this._flags[i])}}else e.flags=this._flags;this._settings&&(e.options=o.clone(this._settings)),this._baseType&&(e.base=this._baseType.describe()),this._description&&(e.description=this._description),this._notes.length&&(e.notes=this._notes),this._tags.length&&(e.tags=this._tags),this._meta.length&&(e.meta=this._meta),this._examples.length&&(e.examples=this._examples),this._unit&&(e.unit=this._unit);var s=this._valids.values();s.length&&(e.valids=s.map((function(t){return a.isRef(t)?t.toString():t})));var u=this._invalids.values();u.length&&(e.invalids=u.map((function(t){return a.isRef(t)?t.toString():t}))),e.rules=[];for(var c=0;c<this._tests.length;++c){var l=this._tests[c],f={name:l.name};void 0!==l.arg&&(f.arg=a.isRef(l.arg)?l.arg.toString():l.arg);var h=l.options;if(h){if(h.hasRef){f.arg={};for(var p=Object.keys(l.arg),d=0;d<p.length;++d){var y=p[d],g=l.arg[y];f.arg[y]=a.isRef(g)?g.toString():g}}"string"==typeof h.description?f.description=h.description:"function"==typeof h.description&&(f.description=h.description(f.arg))}e.rules.push(f)}e.rules.length||delete e.rules;var m=this._getLabel();return m&&(e.label=m),e},t.prototype.label=function(t){o.assert(t&&"string"==typeof t,"Label name must be a non-empty string");var e=this.clone();return e._flags.label=t,e},t.prototype._getLabel=function(t){return this._flags.label||t},i(t,[{key:"schemaType",get:function(){return this._type}}]),t}(),f.Any.prototype.isImmutable=!0,f.Any.prototype.only=f.Any.prototype.equal=f.Any.prototype.valid,f.Any.prototype.disallow=f.Any.prototype.not=f.Any.prototype.invalid,f.Any.prototype.exist=f.Any.prototype.required,f._try=function(t,e){var r=void 0,n=void 0;try{n=t.apply(null,e)}catch(t){r=t}return{value:n,error:r}}},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(33),i=r(34),o=r(35);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,r)}function c(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e),t}(t,e,r,n):"string"==typeof e?function(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=a(t,n)).write(e,r);return i!==n&&(t=t.slice(0,i)),t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=a(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function h(t,e){var r=e.length<0?0:0|p(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(t).length;default:if(n)return M(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,r);case"utf8":case"utf-8":return x(this,e,r);case"ascii":return I(this,e,r);case"latin1":case"binary":return T(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function _(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function b(t,e,r,n){return V(M(e,t.length-r),t,r,n)}function w(t,e,r,n){return V(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function E(t,e,r,n){return w(t,e,r,n)}function k(t,e,r,n){return V(q(e),t,r,n)}function A(t,e,r,n){return V(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function x(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=C));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return c(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return l(e),e<=0?a(t,e):void 0!==r?"string"==typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?x(this,0,t):y.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(n,i),l=t.slice(e,r),f=0;f<a;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return E(this,t,e,r);case"base64":return k(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function R(t,e,r){var n,i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var o="",s=e;s<r;++s)o+=(n=t[s])<16?"0"+n.toString(16):n.toString(16);return o}function O(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function D(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function L(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(t,e,r,n,o){return o||L(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function B(t,e,r,n,o){return o||L(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||P(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||P(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||j(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||j(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);j(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);j(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return B(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return B(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=u.isBuffer(t)?t:M(new u(t,n).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function M(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(e,r(5))},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(0),o=r(1);e.schema=function(t,e){return null!=e&&"object"===(void 0===e?"undefined":n(e))?e.isJoi?e:Array.isArray(e)?t.alternatives().try(e):e instanceof RegExp?t.string().regex(e):e instanceof Date?t.date().valid(e):t.object().keys(e):"string"==typeof e?t.string().valid(e):"number"==typeof e?t.number().valid(e):"boolean"==typeof e?t.boolean().valid(e):o.isRef(e)?t.valid(e):(i.assert(null===e,"Invalid schema content:",e),t.valid(null))},e.ref=function(t){return o.isRef(t)?t:o.create(t)}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(0),o=r(20),s={annotations:Symbol("joi-annotations"),stringify:function(t,r){var i=void 0===t?"undefined":n(t);if(null===t)return"null";if("string"===i)return t;if(t instanceof e.Err||"function"===i||"symbol"===i)return t.toString();if("object"===i){if(Array.isArray(t)){for(var o="",a=0;a<t.length;++a)o=o+(o.length?", ":"")+s.stringify(t[a],r);return r?"["+o+"]":o}return t.toString()}return JSON.stringify(t)}};e.Err=function(){function t(e,r,n,i,s,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isJoi=!0,this.type=e,this.context=r||{},this.context.key=n.path[n.path.length-1],this.context.label=n.key,this.path=n.path,this.options=i,this.flags=s,this.message=a,this.template=u;var c=this.options.language;this.flags.label?this.context.label=this.flags.label:!c||""!==this.context.label&&null!==this.context.label||(this.context.label=c.root||o.errors.root)}return t.prototype.toString=function(){var t=this;if(this.message)return this.message;var e=void 0;this.template&&(e=this.template);var r=this.options.language;if(void 0===(e=e||i.reach(r,this.type)||i.reach(o.errors,this.type)))return'Error code "'+this.type+'" is not defined, your custom type is missing the correct language definition';var n=i.reach(r,"messages.wrapArrays");if("boolean"!=typeof n&&(n=o.errors.messages.wrapArrays),null===e){var a=s.stringify(this.context.reason,n);return n?a.slice(1,-1):a}var u=/\{\{\!?label\}\}/.test(e),c=e.length>2&&"!"===e[0]&&"!"===e[1];if(c&&(e=e.slice(2)),!u&&!c){var l=i.reach(r,"key");e="string"==typeof l?l+e:i.reach(o.errors,"key")+e}return e.replace(/\{\{(\!?)([^}]+)\}\}/g,(function(e,r,o){var a=i.reach(t.context,o),u=s.stringify(a,n);return r&&t.options.escapeHtml?i.escapeHtml(u):u}))},t}(),e.create=function(t,r,n,i,o,s,a){return new e.Err(t,r,n,i,o,s,a)},e.process=function(t,e){if(!t||!t.length)return null;var r="",n=[],i=function t(e,i){for(var o=0;o<e.length;++o){var s=e[o];if(s instanceof Error)return s;if(s.flags.error&&"function"!=typeof s.flags.error)return s.flags.error;var a=void 0;if(void 0===i&&(a=s.toString(),r=r+(r?". ":"")+a),s.context.reason&&s.context.reason.length){var u=t(s.context.reason,s.path);if(u)return u}else n.push({message:a||s.toString(),path:s.path,type:s.type,context:s.context})}}(t);if(i)return i;var o=new Error(r);return o.isJoi=!0,o.name="ValidationError",o.details=n,o._object=e,o.annotate=s.annotate,o},s.safeStringify=function(t,e){return JSON.stringify(t,s.serializer(),e)},s.serializer=function(){var t=[],e=[],r=function(r,n){return e[0]===n?"[Circular ~]":"[Circular ~."+t.slice(0,e.indexOf(n)).join(".")+"]"};return function(i,o){if(e.length>0){var a=e.indexOf(this);~a?(e.length=a+1,t.length=a+1,t[a]=i):(e.push(this),t.push(i)),~e.indexOf(o)&&(o=r.call(this,i,o))}else e.push(o);if(o){var u=o[s.annotations];if(u){if(Array.isArray(o)){for(var c=[],l=0;l<o.length;++l)u.errors[l]&&c.push("_$idx$_"+u.errors[l].sort().join(", ")+"_$end$_"),c.push(o[l]);o=c}else{for(var f=Object.keys(u.errors),h=0;h<f.length;++h){var p=f[h];o[p+"_$key$_"+u.errors[p].sort().join(", ")+"_$end$_"]=o[p],o[p]=void 0}for(var d=Object.keys(u.missing),y=0;y<d.length;++y){var g=d[y];o["_$miss$_"+g+"|"+u.missing[g]+"_$end$_"]="__missing__"}}return o}}return o===1/0||o===-1/0||Number.isNaN(o)||"function"==typeof o||"symbol"===(void 0===o?"undefined":n(o))?"["+o.toString()+"]":o}},s.annotate=function(t){var e=t?"":"[31m",r=t?"":"[41m",o=t?"":"[0m";if("object"!==n(this._object))return this.details[0].message;for(var a=i.clone(this._object||{}),u=this.details.length-1;u>=0;--u)for(var c=u+1,l=this.details[u],f=l.path,h=a,p=0;;++p){var d=f[p];if(h.isImmutable&&(h=h.clone()),!(p+1<f.length&&h[d]&&"string"!=typeof h[d])){var y=h[s.annotations]=h[s.annotations]||{errors:{},missing:{}},g=h[d],m=d||l.context.label;void 0!==g?(y.errors[m]=y.errors[m]||[],y.errors[m].push(c)):y.missing[m]=c;break}h=h[d]}var v=/_\$key\$_([, \d]+)_\$end\$_\"/g,_=/\"_\$miss\$_([^\|]+)\|(\d+)_\$end\$_\"\: \"__missing__\"/g,b=/\s*\"_\$idx\$_([, \d]+)_\$end\$_\",?\n(.*)/g,w=/"\[(NaN|Symbol.*|-?Infinity|function.*|\(.*)\]"/g,E=s.safeStringify(a,2).replace(v,(function(t,r){return'" '+e+"["+r+"]"+o})).replace(_,(function(t,n,i){return r+'"'+n+'"'+o+e+" ["+i+"]: -- missing --"+o})).replace(b,(function(t,r,n){return"\n"+n+" "+e+"["+r+"]"+o})).replace(w,(function(t,e){return e}));E=E+"\n"+e;for(var k=0;k<this.details.length;++k)E=E+"\n["+(k+1)+"] "+this.details[k].message;return E+=o}},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var u=r(0),c=r(2),l=r(4),f=r(6),h=r(26),p=r(1),d=r(11),y={alternatives:r(10),array:r(22),boolean:r(24),binary:r(23),date:r(12),func:r(25),number:r(27),object:r(13),string:r(28),callWithDefaults:function(t,e){var r;return u.assert(this,"Must be invoked on a Joi instance."),this._defaults&&(t=this._defaults(t)),t._currentJoi=this,(r=t)._init.apply(r,function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(e))},root:function(){var t=new c,e=t.clone();return c.prototype._currentJoi=e,e._currentJoi=e,e.any=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return u.assert(0===r.length,"Joi.any() does not allow arguments."),y.callWithDefaults.call(this,t,r)},e.alternatives=e.alt=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return y.callWithDefaults.call(this,y.alternatives,e)},e.array=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return u.assert(0===e.length,"Joi.array() does not allow arguments."),y.callWithDefaults.call(this,y.array,e)},e.boolean=e.bool=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return u.assert(0===e.length,"Joi.boolean() does not allow arguments."),y.callWithDefaults.call(this,y.boolean,e)},e.binary=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return u.assert(0===e.length,"Joi.binary() does not allow arguments."),y.callWithDefaults.call(this,y.binary,e)},e.date=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return u.assert(0===e.length,"Joi.date() does not allow arguments."),y.callWithDefaults.call(this,y.date,e)},e.func=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return u.assert(0===e.length,"Joi.func() does not allow arguments."),y.callWithDefaults.call(this,y.func,e)},e.number=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return u.assert(0===e.length,"Joi.number() does not allow arguments."),y.callWithDefaults.call(this,y.number,e)},e.object=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return y.callWithDefaults.call(this,y.object,e)},e.string=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return u.assert(0===e.length,"Joi.string() does not allow arguments."),y.callWithDefaults.call(this,y.string,e)},e.ref=function(){return p.create.apply(p,arguments)},e.isRef=function(t){return p.isRef(t)},e.validate=function(r){var n,i=(n=(arguments.length<=1?0:arguments.length-1)-1+1,arguments.length<=n?void 0:arguments[n]),o="function"==typeof i?i:null,s=(arguments.length<=1?0:arguments.length-1)-(o?1:0);if(0===s)return t.validate(r,o);var a=2===s?arguments.length<=2?void 0:arguments[2]:{},u=e.compile(arguments.length<=1?void 0:arguments[1]);return u._validateWithOptions(r,a,o)},e.describe=function(){var r=arguments.length?e.compile(arguments.length<=0?void 0:arguments[0]):t;return r.describe()},e.compile=function(t){try{return l.schema(this,t)}catch(t){throw t.hasOwnProperty("path")&&(t.message=t.message+"("+t.path+")"),t}},e.assert=function(t,r,n){e.attempt(t,r,n)},e.attempt=function(t,r,n){var i=e.validate(t,r),o=i.error;if(o){if(!n)throw"function"==typeof o.annotate&&(o.message=o.annotate()),o;if(!(n instanceof Error))throw"function"==typeof o.annotate&&(o.message=n+" "+o.annotate()),o;throw n}return i.value},e.reach=function(t,e){return u.assert(t&&t instanceof c,"you must provide a joi schema"),u.assert(Array.isArray(e)||"string"==typeof e,"path must be a string or an array of strings"),function t(e,r){if(!r.length)return e;var n=e._inner.children;if(n)for(var i=r.shift(),o=0;o<n.length;++o){var s=n[o];if(s.key===i)return t(s.schema,r)}}(t,"string"==typeof e?e?e.split("."):[]:e.slice())},e.lazy=function(t){return h.set(t)},e.defaults=function(t){var e=this;u.assert("function"==typeof t,"Defaults must be a function");var r=Object.create(this.any());return r=t(r),u.assert(r&&r instanceof this.constructor,"defaults() must return a schema"),n(r,this,r.clone()),r._defaults=function(r){return e._defaults&&(r=e._defaults(r),u.assert(r instanceof e.constructor,"defaults() must return a schema")),r=t(r),u.assert(r instanceof e.constructor,"defaults() must return a schema"),r},r},e.extend=function(){for(var t=this,r=arguments.length,h=Array(r),g=0;g<r;g++)h[g]=arguments[g];var m=u.flatten(h);u.assert(m.length>0,"You need to provide at least one extension"),this.assert(m,e.extensionsSchema);var v=Object.create(this.any());n(v,this);for(var _=function(r){var h=m[r];"function"==typeof h&&(h=h(v)),t.assert(h,e.extensionSchema);var g=(h.base||t.any()).clone(),_=g.constructor,b=function(t){function e(){o(this,e);var r=s(this,t.call(this));return h.base&&n(r,g),r._type=h.name,h.language&&(r._settings=d.concat(r._settings,{language:i({},h.name,h.language)})),r}return a(e,t),e}(_);if(h.coerce&&(b.prototype._coerce=function(t,e,r){if(_.prototype._coerce){var n=_.prototype._coerce.call(this,t,e,r);if(n.errors)return n;t=n.value}var i=h.coerce.call(this,t,e,r);return i instanceof f.Err?{value:t,errors:i}:{value:i}}),h.pre&&(b.prototype._base=function(t,e,r){if(_.prototype._base){var n=_.prototype._base.call(this,t,e,r);if(n.errors)return n;t=n.value}var i=h.pre.call(this,t,e,r);return i instanceof f.Err?{value:t,errors:i}:{value:i}}),h.rules)for(var w=function(e){var r=h.rules[e],n=r.params?r.params instanceof c?r.params._inner.children.map((function(t){return t.key})):Object.keys(r.params):[],i=r.params?l.schema(t,r.params):null;b.prototype[r.name]=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];if(e.length>n.length)throw new Error("Unexpected number of arguments");for(var s=!1,a={},l=0;l<n.length;++l)a[n[l]]=e[l],!s&&p.isRef(e[l])&&(s=!0);i&&(a=v.attempt(a,i));var f=void 0;if(r.validate){var h=function(t,e,n){return r.validate.call(this,a,t,e,n)};f=this._test(r.name,a,h,{description:r.description,hasRef:s})}else f=this.clone();if(r.setup){var d=r.setup.call(f,a);void 0!==d&&(u.assert(d instanceof c,"Setup of extension Joi."+this._type+"()."+r.name+"() must return undefined or a Joi object"),f=d)}return f}},E=0;E<h.rules.length;++E)w(E);h.describe&&(b.prototype.describe=function(){var t=_.prototype.describe.call(this);return h.describe.call(this,t)});var k=new b;v[h.name]=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return y.callWithDefaults.call(this,k,e)}},b=0;b<m.length;++b)_(b);return v},e.extensionSchema=y.object.keys({base:y.object.type(c,"Joi object"),name:y.string.required(),coerce:y.func.arity(3),pre:y.func.arity(3),language:y.object,describe:y.func.arity(1),rules:y.array.items(y.object.keys({name:y.string.required(),setup:y.func.arity(1),validate:y.func.arity(4),params:[y.object.pattern(/.*/,y.object.type(c,"Joi object")),y.object.type(y.object.constructor,"Joi object")],description:[y.string,y.func.arity(1)]}).or("setup","validate"))}).strict(),e.extensionsSchema=y.array.items([y.object,y.func.arity(1)]).strict(),e.version=r(36).version,e}};t.exports=y.root()},function(t,e,r){"use strict";(function(e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var o=r(1),s={extendedCheckForValue:function(t,r){var i=void 0===t?"undefined":n(t);if("object"===i){if(t instanceof Date)return function(e){return e instanceof Date&&t.getTime()===e.getTime()};if(e.isBuffer(t))return function(r){return e.isBuffer(r)&&t.length===r.length&&t.toString("binary")===r.toString("binary")}}else if(r&&"string"===i){var o=t.toLowerCase();return function(t){return"string"==typeof t&&o===t.toLowerCase()}}return null}};t.exports=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._set=new Set(e),this._hasRef=!1}return t.prototype.add=function(t,e){var r=o.isRef(t);return!r&&this.has(t,null,null,!1)?this:(void 0!==e&&o.push(e,t),this._set.add(t),this._hasRef|=r,this)},t.prototype.merge=function(t,e){var r=!0,n=!1,i=void 0;try{for(var o,s=t._set[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var a=o.value;this.add(a)}}catch(t){n=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}var u=!0,c=!1,l=void 0;try{for(var f,h=e._set[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value;this.remove(p)}}catch(t){c=!0,l=t}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}return this},t.prototype.remove=function(t){return this._set.delete(t),this},t.prototype.has=function(t,e,r,n){if(!this._set.size)return!1;var i=this._set.has(t);if(i)return i;var a=s.extendedCheckForValue(t,n);if(!a){if(e&&this._hasRef){var u=!0,c=!1,l=void 0;try{for(var f,h=this._set[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value;if(o.isRef(p)&&(t===(p=p(e.reference||e.parent,r))||Array.isArray(p)&&p.includes(t)))return!0}}catch(t){c=!0,l=t}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}}return!1}return this._has(t,e,r,a)},t.prototype._has=function(t,e,r,n){var i=!(!e||!this._hasRef),s=function(e){return t===e||n(e)},a=!0,u=!1,c=void 0;try{for(var l,f=this._set[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;if(i&&o.isRef(h)&&(h=h(e.reference||e.parent,r),Array.isArray(h))){if(h.find(s))return!0}else if(s(h))return!0}}catch(t){u=!0,c=t}finally{try{!a&&f.return&&f.return()}finally{if(u)throw c}}return!1},t.prototype.values=function(t){if(t&&t.stripUndefined){var e=[],r=!0,n=!1,i=void 0;try{for(var o,s=this._set[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var a=o.value;void 0!==a&&e.push(a)}}catch(t){n=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}return e}return Array.from(this._set)},t.prototype.slice=function(){var e=new t(this._set);return e._hasRef=this._hasRef,e},t.prototype.concat=function(e){var r=new t([].concat(i(this._set),i(e._set)));return r._hasRef=!!(this._hasRef|e._hasRef),r},t}()}).call(e,r(3).Buffer)},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var o=r(0),s=r(2),a=r(4),u=r(1),c={};c.Alternatives=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._type="alternatives",r._invalids.remove(null),r._inner.matches=[],r}return i(e,t),e.prototype._init=function(){return arguments.length?this.try.apply(this,arguments):this},e.prototype._base=function(t,e,r){for(var n=[],i=this._inner.matches.length,o=this._baseType,s=0;s<i;++s){var a=this._inner.matches[s];if(a.schema){var u=a.schema._validate(t,e,r);if(!u.errors)return u;n=n.concat(u.errors)}else{var c=a.peek||a.is,l=a.is?a.ref(e.reference||e.parent,r):t;if(c._validate(l,null,r,e.parent).errors){if(a.otherwise)return a.otherwise._validate(t,e,r)}else if(a.then)return a.then._validate(t,e,r);if(s===i-1&&o)return o._validate(t,e,r)}}return n.length?{errors:this.createError("alternatives.child",{reason:n},e,r)}:{errors:this.createError("alternatives.base",null,e,r)}},e.prototype.try=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];e=o.flatten(e),o.assert(e.length,"Cannot add other alternatives without at least one schema");for(var n=this.clone(),i=0;i<e.length;++i){var s=a.schema(this._currentJoi,e[i]);s._refs.length&&(n._refs=n._refs.concat(s._refs)),n._inner.matches.push({schema:s})}return n},e.prototype.when=function(t,e){var r=!1;o.assert(u.isRef(t)||"string"==typeof t||(r=t instanceof s),"Invalid condition:",t),o.assert(e,"Missing options"),o.assert("object"===(void 0===e?"undefined":n(e)),"Invalid options"),r?o.assert(!e.hasOwnProperty("is"),'"is" can not be used with a schema condition'):o.assert(e.hasOwnProperty("is"),'Missing "is" directive'),o.assert(void 0!==e.then||void 0!==e.otherwise,'options must have at least one of "then" or "otherwise"');var i=this.clone(),c=void 0;r||(c=a.schema(this._currentJoi,e.is),null!==e.is&&(u.isRef(e.is)||e.is instanceof s)||(c=c.required()));var l={ref:r?null:a.ref(t),peek:r?t:null,is:c,then:void 0!==e.then?a.schema(this._currentJoi,e.then):void 0,otherwise:void 0!==e.otherwise?a.schema(this._currentJoi,e.otherwise):void 0};return i._baseType&&(l.then=l.then&&i._baseType.concat(l.then),l.otherwise=l.otherwise&&i._baseType.concat(l.otherwise)),r||(u.push(i._refs,l.ref),i._refs=i._refs.concat(l.is._refs)),l.then&&l.then._refs&&(i._refs=i._refs.concat(l.then._refs)),l.otherwise&&l.otherwise._refs&&(i._refs=i._refs.concat(l.otherwise._refs)),i._inner.matches.push(l),i},e.prototype.describe=function(){for(var t=s.prototype.describe.call(this),e=[],r=0;r<this._inner.matches.length;++r){var n=this._inner.matches[r];if(n.schema)e.push(n.schema.describe());else{var i=n.is?{ref:n.ref.toString(),is:n.is.describe()}:{peek:n.peek.describe()};n.then&&(i.then=n.then.describe()),n.otherwise&&(i.otherwise=n.otherwise.describe()),e.push(i)}}return t.alternatives=e,t},e}(s),t.exports=new c.Alternatives},function(t,e,r){"use strict";var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i=r(0);e.concat=function(t,e){if(!e)return t;for(var r=n({},t),o=Object.keys(e),s=0;s<o.length;++s){var a=o[s];"language"===a&&r.hasOwnProperty(a)?r[a]=i.applyToDefaults(r[a],e[a]):r[a]=e[a]}return r}},function(t,e,r){"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var i,o=r(2),s=r(1),a=r(0),u={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};u.invalidDate=new Date(""),u.isIsoDate=(i=u.isoDate.toString(),function(t){return t&&t.toString()===i}),u.Date=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._type="date",r}return n(e,t),e.prototype._base=function(t,e,r){var n={value:r.convert&&u.Date.toDate(t,this._flags.format,this._flags.timestamp,this._flags.multiplier)||t};if(n.value instanceof Date&&!isNaN(n.value.getTime()))n.errors=null;else if(r.convert){var i=void 0;i=u.isIsoDate(this._flags.format)?"isoDate":this._flags.timestamp?"timestamp."+this._flags.timestamp:"base",n.errors=this.createError("date."+i,null,e,r)}else n.errors=this.createError("date.strict",null,e,r);return n},e.toDate=function(t,e,r,n){if(t instanceof Date)return t;if("string"==typeof t||"number"==typeof t&&!isNaN(t)&&isFinite(t)){"string"==typeof t&&/^[+-]?\d+(\.\d+)?$/.test(t)&&(t=parseFloat(t));var i=void 0;if(i=e&&u.isIsoDate(e)?e.test(t)?new Date(t):u.invalidDate:r&&n?/^\s*$/.test(t)?u.invalidDate:new Date(t*n):new Date(t),!isNaN(i.getTime()))return i}return null},e.prototype.iso=function(){if(this._flags.format===u.isoDate)return this;var t=this.clone();return t._flags.format=u.isoDate,t},e.prototype.timestamp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript",e=["javascript","unix"];if(a.assert(e.includes(t),'"type" must be one of "'+e.join('", "')+'"'),this._flags.timestamp===t)return this;var r=this.clone();return r._flags.timestamp=t,r._flags.multiplier="unix"===t?1e3:1,r},e.prototype._isIsoDate=function(t){return u.isoDate.test(t)},e}(o),u.compare=function(t,e){return function(r){var n="now"===r,i=s.isRef(r);return n||i||(r=u.Date.toDate(r)),a.assert(r,"Invalid date format"),this._test(t,r,(function(o,s,a){var c=void 0;if(n)c=Date.now();else if(i){if(!(c=u.Date.toDate(r(s.reference||s.parent,a))))return this.createError("date.ref",{ref:r.key},s,a);c=c.getTime()}else c=r.getTime();return e(o.getTime(),c)?o:this.createError("date."+t,{limit:new Date(c)},s,a)}))}},u.Date.prototype.min=u.compare("min",(function(t,e){return t>=e})),u.Date.prototype.max=u.compare("max",(function(t,e){return t<=e})),u.Date.prototype.greater=u.compare("greater",(function(t,e){return t>e})),u.Date.prototype.less=u.compare("less",(function(t,e){return t<e})),t.exports=new u.Date},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var o=r(0),s=r(31),a=r(2),u=r(6),c=r(4),l={};l.Object=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._type="object",r._inner.children=null,r._inner.renames=[],r._inner.dependencies=[],r._inner.patterns=[],r}return i(e,t),e.prototype._init=function(){return arguments.length?this.keys.apply(this,arguments):this},e.prototype._base=function(t,e,r){var i=t,s=[],a=function(){return{value:i,errors:s.length?s:null}};"string"==typeof t&&r.convert&&(t=l.safeParse(t));var c=this._flags.func?"function":"object";if(!t||(void 0===t?"undefined":n(t))!==c||Array.isArray(t))return s.push(this.createError(c+".base",null,e,r)),a();if(!(this._inner.renames.length||this._inner.dependencies.length||this._inner.children||this._inner.patterns.length))return i=t,a();if(i===t){"object"===c?i=Object.create(Object.getPrototypeOf(t)):(i=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.apply(this,r)}).prototype=o.clone(t.prototype);for(var f=Object.keys(t),h=0;h<f.length;++h)i[f[h]]=t[f[h]]}else i=t;for(var p={},d=0;d<this._inner.renames.length;++d){var y=this._inner.renames[d];if(y.isRegExp){for(var g=Object.keys(i),m=[],v=0;v<g.length;++v)y.from.test(g[v])&&m.push(g[v]);var _=m.every((function(t){return void 0===i[t]}));if(y.options.ignoreUndefined&&_)continue;if(!y.options.multiple&&p[y.to]&&(s.push(this.createError("object.rename.regex.multiple",{from:m,to:y.to},e,r)),r.abortEarly))return a();if(Object.prototype.hasOwnProperty.call(i,y.to)&&!y.options.override&&!p[y.to]&&(s.push(this.createError("object.rename.regex.override",{from:m,to:y.to},e,r)),r.abortEarly))return a();if(_?delete i[y.to]:i[y.to]=i[m[m.length-1]],p[y.to]=!0,!y.options.alias)for(var b=0;b<m.length;++b)delete i[m[b]]}else{if(y.options.ignoreUndefined&&void 0===i[y.from])continue;if(!y.options.multiple&&p[y.to]&&(s.push(this.createError("object.rename.multiple",{from:y.from,to:y.to},e,r)),r.abortEarly))return a();if(Object.prototype.hasOwnProperty.call(i,y.to)&&!y.options.override&&!p[y.to]&&(s.push(this.createError("object.rename.override",{from:y.from,to:y.to},e,r)),r.abortEarly))return a();void 0===i[y.from]?delete i[y.to]:i[y.to]=i[y.from],p[y.to]=!0,y.options.alias||delete i[y.from]}}if(!this._inner.children&&!this._inner.patterns.length&&!this._inner.dependencies.length)return a();var w=new Set(Object.keys(i));if(this._inner.children){for(var E=[],k=0;k<this._inner.children.length;++k){var A=this._inner.children[k],S=A.key,x=i[S];w.delete(S);var C={key:S,path:e.path.concat(S),parent:i,reference:e.reference},I=A.schema._validate(x,C,r);if(I.errors){if(s.push(this.createError("object.child",{key:S,child:A.schema._getLabel(S),reason:I.errors},C,r)),r.abortEarly)return a()}else A.schema._flags.strip||void 0===I.value&&I.value!==x?(E.push(S),i[S]=I.finalValue):void 0!==I.value&&(i[S]=I.value)}for(var T=0;T<E.length;++T)delete i[E[T]]}if(w.size&&this._inner.patterns.length){var R=!0,O=!1,P=void 0;try{for(var j,N=w[Symbol.iterator]();!(R=(j=N.next()).done);R=!0)for(var D=j.value,L={key:D,path:e.path.concat(D),parent:i,reference:e.reference},F=i[D],B=0;B<this._inner.patterns.length;++B){var U=this._inner.patterns[B];if(U.regex?U.regex.test(D):!U.schema.validate(D).error){w.delete(D);var M=U.rule._validate(F,L,r);if(M.errors&&(s.push(this.createError("object.child",{key:D,child:U.rule._getLabel(D),reason:M.errors},L,r)),r.abortEarly))return a();i[D]=M.value}}}catch(rt){O=!0,P=rt}finally{try{!R&&N.return&&N.return()}finally{if(O)throw P}}}if(w.size&&(this._inner.children||this._inner.patterns.length)){if(r.stripUnknown&&!0!==this._flags.allowUnknown||r.skipFunctions){var q=!(!r.stripUnknown||!0!==r.stripUnknown&&!r.stripUnknown.objects),V=!0,H=!1,z=void 0;try{for(var Y,$=w[Symbol.iterator]();!(V=(Y=$.next()).done);V=!0){var K=Y.value;q?(delete i[K],w.delete(K)):"function"==typeof i[K]&&w.delete(K)}}catch(rt){H=!0,z=rt}finally{try{!V&&$.return&&$.return()}finally{if(H)throw z}}}if(void 0!==this._flags.allowUnknown?!this._flags.allowUnknown:!r.allowUnknown){var W=!0,X=!1,G=void 0;try{for(var J,Z=w[Symbol.iterator]();!(W=(J=Z.next()).done);W=!0){var Q=J.value;s.push(this.createError("object.allowUnknown",{child:Q},{key:Q,path:e.path.concat(Q)},r,{}))}}catch(rt){X=!0,G=rt}finally{try{!W&&Z.return&&Z.return()}finally{if(X)throw G}}}}for(var tt=0;tt<this._inner.dependencies.length;++tt){var et=this._inner.dependencies[tt],rt=l[et.type].call(this,null!==et.key&&i[et.key],et.peers,i,{key:et.key,path:null===et.key?e.path:e.path.concat(et.key)},r);if(rt instanceof u.Err&&(s.push(rt),r.abortEarly))return a()}return a()},e.prototype.keys=function(t){o.assert(null==t||"object"===(void 0===t?"undefined":n(t)),"Object schema must be a valid object"),o.assert(!(t&&t instanceof a),"Object schema cannot be a joi schema");var e=this.clone();if(!t)return e._inner.children=null,e;var r=Object.keys(t);if(!r.length)return e._inner.children=[],e;var i=new s;if(e._inner.children)for(var u=0;u<e._inner.children.length;++u){var l=e._inner.children[u];r.includes(l.key)||i.add(l,{after:l._refs,group:l.key})}for(var f=0;f<r.length;++f){var h=r[f],p=t[h];try{var d=c.schema(this._currentJoi,p);i.add({key:h,schema:d},{after:d._refs,group:h})}catch(t){throw t.hasOwnProperty("path")?t.path=h+"."+t.path:t.path=h,t}}return e._inner.children=i.nodes,e},e.prototype.append=function(t){return null==t||0===Object.keys(t).length?this:this.keys(t)},e.prototype.unknown=function(t){var e=!1!==t;if(this._flags.allowUnknown===e)return this;var r=this.clone();return r._flags.allowUnknown=e,r},e.prototype.length=function(t){return o.assert(Number.isSafeInteger(t)&&t>=0,"limit must be a positive integer"),this._test("length",t,(function(e,r,n){return Object.keys(e).length===t?e:this.createError("object.length",{limit:t},r,n)}))},e.prototype.min=function(t){return o.assert(Number.isSafeInteger(t)&&t>=0,"limit must be a positive integer"),this._test("min",t,(function(e,r,n){return Object.keys(e).length>=t?e:this.createError("object.min",{limit:t},r,n)}))},e.prototype.max=function(t){return o.assert(Number.isSafeInteger(t)&&t>=0,"limit must be a positive integer"),this._test("max",t,(function(e,r,n){return Object.keys(e).length<=t?e:this.createError("object.max",{limit:t},r,n)}))},e.prototype.pattern=function(t,e){var r=t instanceof RegExp;o.assert(r||t instanceof a,"pattern must be a regex or schema"),o.assert(void 0!==e,"Invalid rule"),r&&(t=new RegExp(t.source,t.ignoreCase?"i":void 0));try{e=c.schema(this._currentJoi,e)}catch(t){throw t.hasOwnProperty("path")&&(t.message=t.message+"("+t.path+")"),t}var n=this.clone();return r?n._inner.patterns.push({regex:t,rule:e}):n._inner.patterns.push({schema:t,rule:e}),n},e.prototype.schema=function(){return this._test("schema",null,(function(t,e,r){return t instanceof a?t:this.createError("object.schema",null,e,r)}))},e.prototype.with=function(t,e){return o.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("with",t,e)},e.prototype.without=function(t,e){return o.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("without",t,e)},e.prototype.xor=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e=o.flatten(e),this._dependency("xor",null,e)},e.prototype.or=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e=o.flatten(e),this._dependency("or",null,e)},e.prototype.and=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e=o.flatten(e),this._dependency("and",null,e)},e.prototype.nand=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e=o.flatten(e),this._dependency("nand",null,e)},e.prototype.requiredKeys=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e=o.flatten(e),this.applyFunctionToChildren(e,"required")},e.prototype.optionalKeys=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e=o.flatten(e),this.applyFunctionToChildren(e,"optional")},e.prototype.forbiddenKeys=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e=o.flatten(e),this.applyFunctionToChildren(e,"forbidden")},e.prototype.rename=function(t,e,r){o.assert("string"==typeof t||t instanceof RegExp,"Rename missing the from argument"),o.assert("string"==typeof e,"Rename missing the to argument"),o.assert(e!==t,"Cannot rename key to same name:",t);for(var n=0;n<this._inner.renames.length;++n)o.assert(this._inner.renames[n].from!==t,"Cannot rename the same key multiple times");var i=this.clone();return i._inner.renames.push({from:t,to:e,options:o.applyToDefaults(l.renameDefaults,r||{}),isRegExp:t instanceof RegExp}),i},e.prototype.applyFunctionToChildren=function(t,e,r,n){t=[].concat(t),o.assert(t.length>0,"expected at least one children");var i=l.groupChildren(t),s=void 0;if(""in i?(s=this[e].apply(this,r),delete i[""]):s=this.clone(),s._inner.children){n=n?n+".":"";for(var a=0;a<s._inner.children.length;++a){var u=s._inner.children[a],c=i[u.key];c&&(s._inner.children[a]={key:u.key,_refs:u._refs,schema:u.schema.applyFunctionToChildren(c,e,r,n+u.key)},delete i[u.key])}}var f=Object.keys(i);return o.assert(0===f.length,"unknown key(s)",f.join(", ")),s},e.prototype._dependency=function(t,e,r){r=[].concat(r);for(var n=0;n<r.length;++n)o.assert("string"==typeof r[n],t,"peers must be a string or array of strings");var i=this.clone();return i._inner.dependencies.push({type:t,key:e,peers:r}),i},e.prototype.describe=function(t){var e=a.prototype.describe.call(this);if(e.rules)for(var r=0;r<e.rules.length;++r){var i=e.rules[r];i.arg&&"object"===n(i.arg)&&i.arg.schema&&i.arg.ref&&(i.arg={schema:i.arg.schema.describe(),ref:i.arg.ref.toString()})}if(this._inner.children&&!t){e.children={};for(var s=0;s<this._inner.children.length;++s){var u=this._inner.children[s];e.children[u.key]=u.schema.describe()}}if(this._inner.dependencies.length&&(e.dependencies=o.clone(this._inner.dependencies)),this._inner.patterns.length){e.patterns=[];for(var c=0;c<this._inner.patterns.length;++c){var l=this._inner.patterns[c];l.regex?e.patterns.push({regex:l.regex.toString(),rule:l.rule.describe()}):e.patterns.push({schema:l.schema.describe(),rule:l.rule.describe()})}}return this._inner.renames.length>0&&(e.renames=o.clone(this._inner.renames)),e},e.prototype.assert=function(t,e,r){t=c.ref(t),o.assert(t.isContext||t.depth>1,"Cannot use assertions for root level references - use direct key rules instead"),r=r||"pass the assertion test";try{e=c.schema(this._currentJoi,e)}catch(t){throw t.hasOwnProperty("path")&&(t.message=t.message+"("+t.path+")"),t}var n=t.path[t.path.length-1],i=t.path.join(".");return this._test("assert",{schema:e,ref:t},(function(s,a,u){if(!e._validate(t(s),null,u,s).errors)return s;var c=o.merge({},a);return c.key=n,c.path=t.path,this.createError("object.assert",{ref:i,message:r},c,u)}))},e.prototype.type=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.name;o.assert("function"==typeof t,"type must be a constructor function");var r={name:e,ctor:t};return this._test("type",r,(function(e,n,i){return e instanceof t?e:this.createError("object.type",{type:r.name},n,i)}))},e}(a),l.safeParse=function(t){try{return JSON.parse(t)}catch(t){}return t},l.renameDefaults={alias:!1,multiple:!1,override:!1},l.groupChildren=function(t){t.sort();for(var e={},r=0;r<t.length;++r){var n=t[r];o.assert("string"==typeof n,"children must be strings");var i=n.split(".")[0];(e[i]=e[i]||[]).push(n.substring(i.length+1))}return e},l.keysToLabels=function(t,e){var r=t._inner.children;if(!r)return e;var n=function(t){var e=r.find((function(e){return e.key===t}));return e?e.schema._getLabel(t):t};return Array.isArray(e)?e.map(n):n(e)},l.with=function(t,e,r,n,i){if(void 0===t)return t;for(var o=0;o<e.length;++o){var s=e[o];if(!Object.prototype.hasOwnProperty.call(r,s)||void 0===r[s])return this.createError("object.with",{main:n.key,mainWithLabel:l.keysToLabels(this,n.key),peer:s,peerWithLabel:l.keysToLabels(this,s)},n,i)}return t},l.without=function(t,e,r,n,i){if(void 0===t)return t;for(var o=0;o<e.length;++o){var s=e[o];if(Object.prototype.hasOwnProperty.call(r,s)&&void 0!==r[s])return this.createError("object.without",{main:n.key,mainWithLabel:l.keysToLabels(this,n.key),peer:s,peerWithLabel:l.keysToLabels(this,s)},n,i)}return t},l.xor=function(t,e,r,n,i){for(var o=[],s=0;s<e.length;++s){var a=e[s];Object.prototype.hasOwnProperty.call(r,a)&&void 0!==r[a]&&o.push(a)}if(1===o.length)return t;var u={peers:e,peersWithLabels:l.keysToLabels(this,e)};return 0===o.length?this.createError("object.missing",u,n,i):this.createError("object.xor",u,n,i)},l.or=function(t,e,r,n,i){for(var o=0;o<e.length;++o){var s=e[o];if(Object.prototype.hasOwnProperty.call(r,s)&&void 0!==r[s])return t}return this.createError("object.missing",{peers:e,peersWithLabels:l.keysToLabels(this,e)},n,i)},l.and=function(t,e,r,n,i){for(var o=[],s=[],a=e.length,u=0;u<a;++u){var c=e[u];Object.prototype.hasOwnProperty.call(r,c)&&void 0!==r[c]?s.push(c):o.push(c)}if(o.length!==a&&s.length!==a)return this.createError("object.and",{present:s,presentWithLabels:l.keysToLabels(this,s),missing:o,missingWithLabels:l.keysToLabels(this,o)},n,i)},l.nand=function(t,e,r,n,i){for(var s=[],a=0;a<e.length;++a){var u=e[a];Object.prototype.hasOwnProperty.call(r,u)&&void 0!==r[u]&&s.push(u)}var c=o.clone(e),f=c.splice(0,1)[0];return s.length===e.length?this.createError("object.nand",{main:f,mainWithLabel:l.keysToLabels(this,f),peers:c,peersWithLabels:l.keysToLabels(this,c)},n,i):null},t.exports=new l.Object},function(t,e,r){"use strict";var n={rfc3986:{},generate:function(){var t="|";n.rfc3986.ipv4Cidr="[0-9]|[1-2][0-9]|3[0-2]",n.rfc3986.ipv6Cidr="(?:0?0?[0-9]|0?[1-9][0-9]|1[01][0-9]|12[0-8])";var e="a-zA-Z0-9-\\._~",r="!\\$&'\\(\\)\\*\\+,;=",i=e+"%0-9A-Fa-f"+r+":@",o="["+i+"]",s="(?:0?0?[0-9]|0?[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])";n.rfc3986.IPv4address="(?:"+s+"\\.){3}"+s;var a="[0-9A-Fa-f]{1,4}",u="(?:"+a+":"+a+"|"+n.rfc3986.IPv4address+")",c="(?:"+a+":){6}"+u,l="::(?:"+a+":){5}"+u,f="(?:"+a+")?::(?:"+a+":){4}"+u,h="(?:(?:"+a+":){0,1}"+a+")?::(?:"+a+":){3}"+u,p="(?:(?:"+a+":){0,2}"+a+")?::(?:"+a+":){2}"+u,d="(?:(?:"+a+":){0,3}"+a+")?::"+a+":"+u,y="(?:(?:"+a+":){0,4}"+a+")?::"+u;n.rfc3986.IPv6address="(?:"+c+t+l+t+f+t+h+t+p+t+d+t+y+t+"(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}"+t+"(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)",n.rfc3986.IPvFuture="v[0-9A-Fa-f]+\\.["+e+r+":]+",n.rfc3986.scheme="[a-zA-Z][a-zA-Z0-9+-\\.]*";var g="(?:[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:]*@)?(?:\\[(?:"+n.rfc3986.IPv6address+t+n.rfc3986.IPvFuture+")\\]"+t+n.rfc3986.IPv4address+t+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=]{0,255})(?::[0-9]*)?",m=o+"+",v="(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*",_="\\/(?:"+m+v+")?";n.rfc3986.hierPart="(?:(?:\\/\\/"+g+v+")"+t+_+t+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]+(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*)",n.rfc3986.relativeRef="(?:(?:\\/\\/"+g+v+")"+t+_+t+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=@]+(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*"+t+")",n.rfc3986.query="["+i+"\\/\\?]*(?=#|$)",n.rfc3986.fragment="["+i+"\\/\\?]*"}};n.generate(),t.exports=n.rfc3986},function(t,e){},function(t,e,r){(function(t,n){var i=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(a(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),u=n[r];r<o;u=n[++r])y(u)||!b(u)?s+=" "+u:s+=" "+a(u);return s},e.deprecate=function(r,i){if(v(t.process))return function(){return e.deprecate(r,i).apply(this,arguments)};if(!0===n.noDeprecation)return r;var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),o=!0}return r.apply(this,arguments)}};var o,s={};function a(t,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&e._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),l(n,t,n.depth)}function u(t,e){var r=a.styles[e];return r?"["+a.colors[r][0]+"m"+t+"["+a.colors[r][1]+"m":t}function c(t,e){return t}function l(t,r,n){if(t.customInspect&&r&&k(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return m(i)||(i=l(t,i,n)),i}var o=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return g(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}(t,r);if(o)return o;var s=Object.keys(r),a=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),E(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(r);if(0===s.length){if(k(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(_(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return t.stylize(Date.prototype.toString.call(r),"date");if(E(r))return f(r)}var c,b="",A=!1,S=["{","}"];return p(r)&&(A=!0,S=["[","]"]),k(r)&&(b=" [Function"+(r.name?": "+r.name:"")+"]"),_(r)&&(b=" "+RegExp.prototype.toString.call(r)),w(r)&&(b=" "+Date.prototype.toUTCString.call(r)),E(r)&&(b=" "+f(r)),0!==s.length||A&&0!=r.length?n<0?_(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=A?function(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)I(e,String(s))?o.push(h(t,e,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(t,e,r,n,i,!0))})),o}(t,r,n,a,s):s.map((function(e){return h(t,r,n,a,e,A)})),t.seen.pop(),function(t,e,r){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}(c,b,S)):S[0]+b+S[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,r,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),I(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=y(r)?l(t,u.value,null):l(t,u.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),v(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function g(t){return"number"==typeof t}function m(t){return"string"==typeof t}function v(t){return void 0===t}function _(t){return b(t)&&"[object RegExp]"===A(t)}function b(t){return"object"==typeof t&&null!==t}function w(t){return b(t)&&"[object Date]"===A(t)}function E(t){return b(t)&&("[object Error]"===A(t)||t instanceof Error)}function k(t){return"function"==typeof t}function A(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(v(o)&&(o=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var r=n.pid;s[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else s[t]=function(){};return s[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=y,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=_,e.isObject=b,e.isDate=w,e.isError=E,e.isFunction=k,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(40);var x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),x[t.getMonth()],e].join(" ")}function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",C(),e.format.apply(e,arguments))},e.inherits=r(39),e._extend=function(t,e){if(!e||!b(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(e,r(5),r(7))},function(t,e,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function n(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var o=r(16),s=Object.prototype.hasOwnProperty,a=Array.prototype.slice,u="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function l(t){return!i(t)&&"function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)))}var f=t.exports=m,h=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(o.isFunction(t)){if(u)return t.name;var e=t.toString().match(h);return e&&e[1]}}function d(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function y(t){if(u||!o.isFunction(t))return o.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,r,n,i){throw new f.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function m(t,e){t||g(t,!0,e,"==",f.ok)}function v(t,e,r,s){if(t===e)return!0;if(i(t)&&i(e))return 0===n(t,e);if(o.isDate(t)&&o.isDate(e))return t.getTime()===e.getTime();if(o.isRegExp(t)&&o.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(l(t)&&l(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===n(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var u=(s=s||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),function(t,e,r,n){if(null==t||null==e)return!1;if(o.isPrimitive(t)||o.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=_(t),s=_(e);if(i&&!s||!i&&s)return!1;if(i)return t=a.call(t),e=a.call(e),v(t,e,r);var u,c,l=E(t),f=E(e);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),c=l.length-1;c>=0;c--)if(l[c]!==f[c])return!1;for(c=l.length-1;c>=0;c--)if(u=l[c],!v(t[u],e[u],r,n))return!1;return!0}(t,e,r,s))}return r?t===e:t==e}function _(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function w(t,e,r,n){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&g(i,r,"Missing expected exception"+n);var s="string"==typeof n,a=!t&&i&&!r;if((!t&&o.isError(i)&&s&&b(i,r)||a)&&g(i,r,"Got unwanted exception"+n),t&&i&&r&&!b(i,r)||!t&&i)throw i}f.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return d(y(t.actual),128)+" "+t.operator+" "+d(y(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=p(e),o=n.indexOf("\n"+i);if(o>=0){var s=n.indexOf("\n",o+1);n=n.substring(s+1)}this.stack=n}}},o.inherits(f.AssertionError,Error),f.fail=g,f.ok=m,f.equal=function(t,e,r){t!=e&&g(t,e,r,"==",f.equal)},f.notEqual=function(t,e,r){t==e&&g(t,e,r,"!=",f.notEqual)},f.deepEqual=function(t,e,r){v(t,e,!1)||g(t,e,r,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(t,e,r){v(t,e,!0)||g(t,e,r,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(t,e,r){v(t,e,!1)&&g(t,e,r,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function t(e,r,n){v(e,r,!0)&&g(e,r,n,"notDeepStrictEqual",t)},f.strictEqual=function(t,e,r){t!==e&&g(t,e,r,"===",f.strictEqual)},f.notStrictEqual=function(t,e,r){t===e&&g(t,e,r,"!==",f.notStrictEqual)},f.throws=function(t,e,r){w(!0,t,e,r)},f.doesNotThrow=function(t,e,r){w(!1,t,e,r)},f.ifError=function(t){if(t)throw t};var E=Object.keys||function(t){var e=[];for(var r in t)s.call(t,r)&&e.push(r);return e}}).call(e,r(5))},function(t,e,r){"use strict";(function(t){var r={};e.escapeJavaScript=function(t){if(!t)return"";for(var e="",n=0;n<t.length;++n){var i=t.charCodeAt(n);r.isSafe(i)?e+=t[n]:e+=r.escapeJavaScriptChar(i)}return e},e.escapeHtml=function(t){if(!t)return"";for(var e="",n=0;n<t.length;++n){var i=t.charCodeAt(n);r.isSafe(i)?e+=t[n]:e+=r.escapeHtmlChar(i)}return e},e.escapeJson=function(t){if(!t)return"";var e=void 0;return t.replace(/[<>&\u2028\u2029]/g,(function(t){return 60===(e=t.charCodeAt(0))?"\\u003c":62===e?"\\u003e":38===e?"\\u0026":8232===e?"\\u2028":"\\u2029"}))},r.escapeJavaScriptChar=function(e){if(e>=256)return"\\u"+r.padLeft(""+e,4);var n=t.from(String.fromCharCode(e),"ascii").toString("hex");return"\\x"+r.padLeft(n,2)},r.escapeHtmlChar=function(e){var n=r.namedHtml[e];if(void 0!==n)return n;if(e>=256)return"&#"+e+";";var i=t.from(String.fromCharCode(e),"ascii").toString("hex");return"&#x"+r.padLeft(i,2)+";"},r.padLeft=function(t,e){for(;t.length<e;)t="0"+t;return t},r.isSafe=function(t){return void 0!==r.safeCharCodes[t]},r.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},r.safeCharCodes=function(){for(var t={},e=32;e<123;++e)(e>=97||e>=65&&e<=90||e>=48&&e<=57||32===e||46===e||44===e||45===e||58===e||95===e)&&(t[e]=null);return t}()}).call(e,r(3).Buffer)},function(t,e,r){"use strict";(function(t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(38),o={hasOwn:Object.prototype.hasOwnProperty,indexOf:Array.prototype.indexOf,defaultThreshold:16,maxIPv6Groups:8,categories:{valid:1,dnsWarn:7,rfc5321:15,cfws:31,deprecated:63,rfc5322:127,error:255},diagnoses:{valid:0,rfc5321TLD:9,rfc5321TLDNumeric:10,rfc5321QuotedString:11,rfc5321AddressLiteral:12,cfwsComment:17,cfwsFWS:18,undesiredNonAscii:25,deprecatedLocalPart:33,deprecatedFWS:34,deprecatedQTEXT:35,deprecatedQP:36,deprecatedComment:37,deprecatedCTEXT:38,deprecatedIPv6:39,deprecatedCFWSNearAt:49,rfc5322Domain:65,rfc5322TooLong:66,rfc5322LocalTooLong:67,rfc5322DomainTooLong:68,rfc5322LabelTooLong:69,rfc5322DomainLiteral:70,rfc5322DomainLiteralOBSDText:71,rfc5322IPv6GroupCount:72,rfc5322IPv62x2xColon:73,rfc5322IPv6BadCharacter:74,rfc5322IPv6MaxGroups:75,rfc5322IPv6ColonStart:76,rfc5322IPv6ColonEnd:77,errExpectingDTEXT:129,errNoLocalPart:130,errNoDomain:131,errConsecutiveDots:132,errATEXTAfterCFWS:133,errATEXTAfterQS:134,errATEXTAfterDomainLiteral:135,errExpectingQPair:136,errExpectingATEXT:137,errExpectingQTEXT:138,errExpectingCTEXT:139,errBackslashEnd:140,errDotStart:141,errDotEnd:142,errDomainHyphenStart:143,errDomainHyphenEnd:144,errUnclosedQuotedString:145,errUnclosedComment:146,errUnclosedDomainLiteral:147,errFWSCRLFx2:148,errFWSCRLFEnd:149,errCRNoLF:150,errUnknownTLD:160,errDomainTooShort:161},components:{localpart:0,domain:1,literal:2,contextComment:3,contextFWS:4,contextQuotedString:5,contextQuotedPair:6}};o.specials=function(){var t=new Array(256);t.fill(!1);for(var e=0;e<'()<>[]:;@\\,."'.length;++e)t['()<>[]:;@\\,."'.codePointAt(e)]=!0;return function(e){return t[e]}}(),o.c0Controls=function(){var t=new Array(256);t.fill(!1);for(var e=0;e<33;++e)t[e]=!0;return function(e){return t[e]}}(),o.c1Controls=function(){var t=new Array(256);t.fill(!1);for(var e=127;e<160;++e)t[e]=!0;return function(e){return t[e]}}(),o.regex={ipV4:/\b(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipV6:/^[a-fA-F\d]{0,4}$/},o.normalizeSupportsNul="\0"==="\0".normalize("NFC"),o.nulNormalize=function(t){return t.split("\0").map((function(t){return t.normalize("NFC")})).join("\0")},o.normalize=function(t){return!o.normalizeSupportsNul&&t.indexOf("\0")>=0?o.nulNormalize(t):t.normalize("NFC")},o.checkIpV6=function(t){return t.every((function(t){return o.regex.ipV6.test(t)}))},o.validDomain=function(t,e){return e.tldBlacklist?Array.isArray(e.tldBlacklist)?-1===o.indexOf.call(e.tldBlacklist,t):!o.hasOwn.call(e.tldBlacklist,t):Array.isArray(e.tldWhitelist)?-1!==o.indexOf.call(e.tldWhitelist,t):o.hasOwn.call(e.tldWhitelist,t)},e.validate=o.validate=function(e,r,s){r=r||{},e=o.normalize(e),"function"==typeof r&&(s=r,r={}),"function"!=typeof s&&(s=null);var a=void 0,u=void 0;if("number"==typeof r.errorLevel?(a=!0,u=r.errorLevel):(a=!!r.errorLevel,u=o.diagnoses.valid),r.tldWhitelist)if("string"==typeof r.tldWhitelist)r.tldWhitelist=[r.tldWhitelist];else if("object"!==n(r.tldWhitelist))throw new TypeError("expected array or object tldWhitelist");if(r.tldBlacklist)if("string"==typeof r.tldBlacklist)r.tldBlacklist=[r.tldBlacklist];else if("object"!==n(r.tldBlacklist))throw new TypeError("expected array or object tldBlacklist");if(r.minDomainAtoms&&(r.minDomainAtoms!==(0|+r.minDomainAtoms)||r.minDomainAtoms<0))throw new TypeError("expected positive integer minDomainAtoms");var c=o.diagnoses.valid,l=function(t){t>c&&(c=t)};void 0!==r.allowUnicode&&!r.allowUnicode&&/[^\x00-\x7f]/.test(e)&&l(o.diagnoses.undesiredNonAscii);for(var f={now:o.components.localpart,prev:o.components.localpart,stack:[o.components.localpart]},h="",p={local:"",domain:""},d={locals:[""],domains:[""]},y=0,g=0,m=0,v=void 0,_=!1,b=!1,w=e.length,E=void 0,k=0;k<w;k+=E.length){switch(E=String.fromCodePoint(e.codePointAt(k)),f.now){case o.components.localpart:switch(E){case"(":0===g?l(0===y?o.diagnoses.cfwsComment:o.diagnoses.deprecatedComment):(l(o.diagnoses.cfwsComment),b=!0),f.stack.push(f.now),f.now=o.components.contextComment;break;case".":0===g?l(0===y?o.diagnoses.errDotStart:o.diagnoses.errConsecutiveDots):(b&&l(o.diagnoses.deprecatedLocalPart),b=!1,g=0,++y,p.local+=E,d.locals[y]="");break;case'"':0===g?(l(0===y?o.diagnoses.rfc5321QuotedString:o.diagnoses.deprecatedLocalPart),p.local+=E,d.locals[y]+=E,g+=t.byteLength(E,"utf8"),b=!0,f.stack.push(f.now),f.now=o.components.contextQuotedString):l(o.diagnoses.errExpectingATEXT);break;case"\r":if(w===++k||"\n"!==e[k]){l(o.diagnoses.errCRNoLF);break}case" ":case"\t":0===g?l(0===y?o.diagnoses.cfwsFWS:o.diagnoses.deprecatedFWS):b=!0,f.stack.push(f.now),f.now=o.components.contextFWS,h=E;break;case"@":if(1!==f.stack.length)throw new Error("unexpected item on context stack");0===p.local.length?l(o.diagnoses.errNoLocalPart):0===g?l(o.diagnoses.errDotEnd):t.byteLength(p.local,"utf8")>64?l(o.diagnoses.rfc5322LocalTooLong):f.prev!==o.components.contextComment&&f.prev!==o.components.contextFWS||l(o.diagnoses.deprecatedCFWSNearAt),f.now=o.components.domain,f.stack[0]=o.components.domain,y=0,g=0,b=!1;break;default:if(b)switch(f.prev){case o.components.contextComment:case o.components.contextFWS:l(o.diagnoses.errATEXTAfterCFWS);break;case o.components.contextQuotedString:l(o.diagnoses.errATEXTAfterQS);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+f.prev)}else f.prev=f.now,v=E.codePointAt(0),(o.specials(v)||o.c0Controls(v)||o.c1Controls(v))&&l(o.diagnoses.errExpectingATEXT),p.local+=E,d.locals[y]+=E,g+=t.byteLength(E,"utf8")}break;case o.components.domain:switch(E){case"(":0===g?l(0===y?o.diagnoses.deprecatedCFWSNearAt:o.diagnoses.deprecatedComment):(b=!0,l(o.diagnoses.cfwsComment)),f.stack.push(f.now),f.now=o.components.contextComment;break;case".":var A=i.encode(d.domains[y]).length;0===g?l(0===y?o.diagnoses.errDotStart:o.diagnoses.errConsecutiveDots):_?l(o.diagnoses.errDomainHyphenEnd):A>63&&l(o.diagnoses.rfc5322LabelTooLong),b=!1,g=0,++y,d.domains[y]="",p.domain+=E;break;case"[":0===p.domain.length?(b=!0,g+=t.byteLength(E,"utf8"),f.stack.push(f.now),f.now=o.components.literal,p.domain+=E,d.domains[y]+=E,p.literal=""):l(o.diagnoses.errExpectingATEXT);break;case"\r":if(w===++k||"\n"!==e[k]){l(o.diagnoses.errCRNoLF);break}case" ":case"\t":0===g?l(0===y?o.diagnoses.deprecatedCFWSNearAt:o.diagnoses.deprecatedFWS):(l(o.diagnoses.cfwsFWS),b=!0),f.stack.push(f.now),f.now=o.components.contextFWS,h=E;break;default:if(b)switch(f.prev){case o.components.contextComment:case o.components.contextFWS:l(o.diagnoses.errATEXTAfterCFWS);break;case o.components.literal:l(o.diagnoses.errATEXTAfterDomainLiteral);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+f.prev)}v=E.codePointAt(0),_=!1,o.specials(v)||o.c0Controls(v)||o.c1Controls(v)?l(o.diagnoses.errExpectingATEXT):"-"===E?(0===g&&l(o.diagnoses.errDomainHyphenStart),_=!0):(v<48||v>122&&v<192||v>57&&v<65||v>90&&v<97)&&l(o.diagnoses.rfc5322Domain),p.domain+=E,d.domains[y]+=E,g+=t.byteLength(E,"utf8")}break;case o.components.literal:switch(E){case"]":if(c<o.categories.deprecated){var S=-1,x=p.literal,C=o.regex.ipV4.exec(x);if(C&&0!==(S=C.index)&&(x=x.slice(0,S)+"0:0"),0===S)l(o.diagnoses.rfc5321AddressLiteral);else if("ipv6:"!==x.slice(0,5).toLowerCase())l(o.diagnoses.rfc5322DomainLiteral);else{var I=x.slice(5),T=o.maxIPv6Groups,R=I.split(":");~(S=I.indexOf("::"))?S!==I.lastIndexOf("::")?l(o.diagnoses.rfc5322IPv62x2xColon):(0!==S&&S!==I.length-2||++T,R.length>T?l(o.diagnoses.rfc5322IPv6MaxGroups):R.length===T&&l(o.diagnoses.deprecatedIPv6)):R.length!==T&&l(o.diagnoses.rfc5322IPv6GroupCount),":"===I[0]&&":"!==I[1]?l(o.diagnoses.rfc5322IPv6ColonStart):":"===I[I.length-1]&&":"!==I[I.length-2]?l(o.diagnoses.rfc5322IPv6ColonEnd):o.checkIpV6(R)?l(o.diagnoses.rfc5321AddressLiteral):l(o.diagnoses.rfc5322IPv6BadCharacter)}}else l(o.diagnoses.rfc5322DomainLiteral);p.domain+=E,d.domains[y]+=E,g+=t.byteLength(E,"utf8"),f.prev=f.now,f.now=f.stack.pop();break;case"\\":l(o.diagnoses.rfc5322DomainLiteralOBSDText),f.stack.push(f.now),f.now=o.components.contextQuotedPair;break;case"\r":if(w===++k||"\n"!==e[k]){l(o.diagnoses.errCRNoLF);break}case" ":case"\t":l(o.diagnoses.cfwsFWS),f.stack.push(f.now),f.now=o.components.contextFWS,h=E;break;default:if(127!==(v=E.codePointAt(0))&&o.c1Controls(v)||0===v||"["===E){l(o.diagnoses.errExpectingDTEXT);break}(o.c0Controls(v)||127===v)&&l(o.diagnoses.rfc5322DomainLiteralOBSDText),p.literal+=E,p.domain+=E,d.domains[y]+=E,g+=t.byteLength(E,"utf8")}break;case o.components.contextQuotedString:switch(E){case"\\":f.stack.push(f.now),f.now=o.components.contextQuotedPair;break;case"\r":if(w===++k||"\n"!==e[k]){l(o.diagnoses.errCRNoLF);break}case"\t":p.local+=" ",d.locals[y]+=" ",g+=t.byteLength(E,"utf8"),l(o.diagnoses.cfwsFWS),f.stack.push(f.now),f.now=o.components.contextFWS,h=E;break;case'"':p.local+=E,d.locals[y]+=E,g+=t.byteLength(E,"utf8"),f.prev=f.now,f.now=f.stack.pop();break;default:127!==(v=E.codePointAt(0))&&o.c1Controls(v)||0===v||10===v?l(o.diagnoses.errExpectingQTEXT):(o.c0Controls(v)||127===v)&&l(o.diagnoses.deprecatedQTEXT),p.local+=E,d.locals[y]+=E,g+=t.byteLength(E,"utf8")}break;case o.components.contextQuotedPair:127!==(v=E.codePointAt(0))&&o.c1Controls(v)?l(o.diagnoses.errExpectingQPair):(v<31&&9!==v||127===v)&&l(o.diagnoses.deprecatedQP),f.prev=f.now,f.now=f.stack.pop();var O="\\"+E;switch(f.now){case o.components.contextComment:break;case o.components.contextQuotedString:p.local+=O,d.locals[y]+=O,g+=2;break;case o.components.literal:p.domain+=O,d.domains[y]+=O,g+=2;break;default:throw new Error("quoted pair logic invoked in an invalid context: "+f.now)}break;case o.components.contextComment:switch(E){case"(":f.stack.push(f.now),f.now=o.components.contextComment;break;case")":f.prev=f.now,f.now=f.stack.pop();break;case"\\":f.stack.push(f.now),f.now=o.components.contextQuotedPair;break;case"\r":if(w===++k||"\n"!==e[k]){l(o.diagnoses.errCRNoLF);break}case" ":case"\t":l(o.diagnoses.cfwsFWS),f.stack.push(f.now),f.now=o.components.contextFWS,h=E;break;default:if(0===(v=E.codePointAt(0))||10===v||127!==v&&o.c1Controls(v)){l(o.diagnoses.errExpectingCTEXT);break}(o.c0Controls(v)||127===v)&&l(o.diagnoses.deprecatedCTEXT)}break;case o.components.contextFWS:if("\r"===h){if("\r"===E){l(o.diagnoses.errFWSCRLFx2);break}++m>1?l(o.diagnoses.deprecatedFWS):m=1}switch(E){case"\r":w!==++k&&"\n"===e[k]||l(o.diagnoses.errCRNoLF);break;case" ":case"\t":break;default:"\r"===h&&l(o.diagnoses.errFWSCRLFEnd),m=0,f.prev=f.now,f.now=f.stack.pop(),--k}h=E;break;default:throw new Error("unknown context: "+f.now)}if(c>o.categories.rfc5322)break}if(c<o.categories.rfc5322){var P=i.encode(p.domain).length;if(f.now===o.components.contextQuotedString)l(o.diagnoses.errUnclosedQuotedString);else if(f.now===o.components.contextQuotedPair)l(o.diagnoses.errBackslashEnd);else if(f.now===o.components.contextComment)l(o.diagnoses.errUnclosedComment);else if(f.now===o.components.literal)l(o.diagnoses.errUnclosedDomainLiteral);else if("\r"===E)l(o.diagnoses.errFWSCRLFEnd);else if(0===p.domain.length)l(o.diagnoses.errNoDomain);else if(0===g)l(o.diagnoses.errDotEnd);else if(_)l(o.diagnoses.errDomainHyphenEnd);else if(P>255)l(o.diagnoses.rfc5322DomainTooLong);else if(t.byteLength(p.local,"utf8")+P+1>254)l(o.diagnoses.rfc5322TooLong);else if(g>63)l(o.diagnoses.rfc5322LabelTooLong);else if(r.minDomainAtoms&&d.domains.length<r.minDomainAtoms)l(o.diagnoses.errDomainTooShort);else if(r.tldWhitelist||r.tldBlacklist){var j=d.domains[y];o.validDomain(j,r)||l(o.diagnoses.errUnknownTLD)}}c<o.categories.dnsWarn&&d.domains[y].codePointAt(0)<=57&&l(o.diagnoses.rfc5321TLDNumeric),c<u&&(c=o.diagnoses.valid);var N=a?c:c<o.defaultThreshold;return s&&s(N),N},e.diagnoses=o.validate.diagnoses=function(){for(var t={},e=Object.keys(o.diagnoses),r=0;r<e.length;++r){var n=e[r];t[n]=o.diagnoses[n]}return t}(),e.normalize=o.normalize}).call(e,r(3).Buffer)},function(t,e,r){"use strict";e.errors={root:"value",key:'"{{!label}}" ',messages:{wrapArrays:!0},any:{unknown:"is not allowed",invalid:"contains an invalid value",empty:"is not allowed to be empty",required:"is required",allowOnly:"must be one of {{valids}}",default:"threw an error when running default method"},alternatives:{base:"not matching any of the allowed alternatives",child:null},array:{base:"must be an array",includes:"at position {{pos}} does not match any of the allowed types",includesSingle:'single value of "{{!label}}" does not match any of the allowed types',includesOne:"at position {{pos}} fails because {{reason}}",includesOneSingle:'single value of "{{!label}}" fails because {{reason}}',includesRequiredUnknowns:"does not contain {{unknownMisses}} required value(s)",includesRequiredKnowns:"does not contain {{knownMisses}}",includesRequiredBoth:"does not contain {{knownMisses}} and {{unknownMisses}} other required value(s)",excludes:"at position {{pos}} contains an excluded value",excludesSingle:'single value of "{{!label}}" contains an excluded value',min:"must contain at least {{limit}} items",max:"must contain less than or equal to {{limit}} items",length:"must contain {{limit}} items",ordered:"at position {{pos}} fails because {{reason}}",orderedLength:"at position {{pos}} fails because array must contain at most {{limit}} items",ref:'references "{{ref}}" which is not a positive integer',sparse:"must not be a sparse array",unique:"position {{pos}} contains a duplicate value"},boolean:{base:"must be a boolean"},binary:{base:"must be a buffer or a string",min:"must be at least {{limit}} bytes",max:"must be less than or equal to {{limit}} bytes",length:"must be {{limit}} bytes"},date:{base:"must be a number of milliseconds or valid date string",format:"must be a string with one of the following formats {{format}}",strict:"must be a valid date",min:'must be larger than or equal to "{{limit}}"',max:'must be less than or equal to "{{limit}}"',less:'must be less than "{{limit}}"',greater:'must be greater than "{{limit}}"',isoDate:"must be a valid ISO 8601 date",timestamp:{javascript:"must be a valid timestamp or number of milliseconds",unix:"must be a valid timestamp or number of seconds"},ref:'references "{{ref}}" which is not a date'},function:{base:"must be a Function",arity:"must have an arity of {{n}}",minArity:"must have an arity greater or equal to {{n}}",maxArity:"must have an arity lesser or equal to {{n}}",ref:"must be a Joi reference",class:"must be a class"},lazy:{base:"!!schema error: lazy schema must be set",schema:"!!schema error: lazy schema function must return a schema"},object:{base:"must be an object",child:'!!child "{{!child}}" fails because {{reason}}',min:"must have at least {{limit}} children",max:"must have less than or equal to {{limit}} children",length:"must have {{limit}} children",allowUnknown:'!!"{{!child}}" is not allowed',with:'!!"{{mainWithLabel}}" missing required peer "{{peerWithLabel}}"',without:'!!"{{mainWithLabel}}" conflict with forbidden peer "{{peerWithLabel}}"',missing:"must contain at least one of {{peersWithLabels}}",xor:"contains a conflict between exclusive peers {{peersWithLabels}}",or:"must contain at least one of {{peersWithLabels}}",and:"contains {{presentWithLabels}} without its required peers {{missingWithLabels}}",nand:'!!"{{mainWithLabel}}" must not exist simultaneously with {{peersWithLabels}}',assert:'!!"{{ref}}" validation failed because "{{ref}}" failed to {{message}}',rename:{multiple:'cannot rename child "{{from}}" because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename child "{{from}}" because override is disabled and target "{{to}}" exists',regex:{multiple:'cannot rename children {{from}} because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename children {{from}} because override is disabled and target "{{to}}" exists'}},type:'must be an instance of "{{type}}"',schema:"must be a Joi instance"},number:{base:"must be a number",min:"must be larger than or equal to {{limit}}",max:"must be less than or equal to {{limit}}",less:"must be less than {{limit}}",greater:"must be greater than {{limit}}",float:"must be a float or double",integer:"must be an integer",negative:"must be a negative number",positive:"must be a positive number",precision:"must have no more than {{limit}} decimal places",ref:'references "{{ref}}" which is not a number',multiple:"must be a multiple of {{multiple}}",port:"must be a valid port"},string:{base:"must be a string",min:"length must be at least {{limit}} characters long",max:"length must be less than or equal to {{limit}} characters long",length:"length must be {{limit}} characters long",alphanum:"must only contain alpha-numeric characters",token:"must only contain alpha-numeric and underscore characters",regex:{base:'with value "{{!value}}" fails to match the required pattern: {{pattern}}',name:'with value "{{!value}}" fails to match the {{name}} pattern',invert:{base:'with value "{{!value}}" matches the inverted pattern: {{pattern}}',name:'with value "{{!value}}" matches the inverted {{name}} pattern'}},email:"must be a valid email",uri:"must be a valid uri",uriRelativeOnly:"must be a valid relative uri",uriCustomScheme:"must be a valid uri with a scheme matching the {{scheme}} pattern",isoDate:"must be a valid ISO 8601 date",guid:"must be a valid GUID",hex:"must only contain hexadecimal characters",hexAlign:"hex decoded representation must be byte aligned",base64:"must be a valid base64 string",hostname:"must be a valid hostname",normalize:"must be unicode normalized in the {{form}} form",lowercase:"must only contain lowercase characters",uppercase:"must only contain uppercase characters",trim:"must not have leading or trailing whitespace",creditCard:"must be a credit card",ref:'references "{{ref}}" which is not a number',ip:"must be a valid ip address with a {{cidr}} CIDR",ipVersion:"must be a valid ip address of one of the following versions {{version}} with a {{cidr}} CIDR"}}},function(t,e,r){"use strict";var n=r(8);e.options=n.object({abortEarly:n.boolean(),convert:n.boolean(),allowUnknown:n.boolean(),skipFunctions:n.boolean(),stripUnknown:[n.boolean(),n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects")],language:n.object(),presence:n.string().only("required","optional","forbidden","ignore"),raw:n.boolean(),context:n.object(),strip:n.boolean(),noDefaults:n.boolean(),escapeHtml:n.boolean()}).strict()},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var o=r(2),s=r(4),a=r(1),u=r(0),c={fastSplice:function(t,e){for(var r=e;r<t.length;)t[r++]=t[r];--t.length}};c.Array=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._type="array",r._inner.items=[],r._inner.ordereds=[],r._inner.inclusions=[],r._inner.exclusions=[],r._inner.requireds=[],r._flags.sparse=!1,r}return i(e,t),e.prototype._base=function(t,e,r){var n={value:t};"string"==typeof t&&r.convert&&c.safeParse(t,n);var i=Array.isArray(n.value),o=i;if(r.convert&&this._flags.single&&!i&&(n.value=[n.value],i=!0),!i)return n.errors=this.createError("array.base",null,e,r),n;if((this._inner.inclusions.length||this._inner.exclusions.length||this._inner.requireds.length||this._inner.ordereds.length||!this._flags.sparse)&&(o&&(n.value=n.value.slice(0)),n.errors=this._checkItems.call(this,n.value,o,e,r),n.errors&&o&&r.convert&&this._flags.single)){var s=n.errors;n.value=[n.value],n.errors=this._checkItems.call(this,n.value,o,e,r),n.errors&&(n.errors=s,n.value=n.value[0])}return n},e.prototype._checkItems=function(t,e,r,n){for(var i=[],o=void 0,s=this._inner.requireds.slice(),a=this._inner.ordereds.slice(),u=this._inner.inclusions.concat(s),l=t.length,f=0;f<l;++f){o=!1;var h=t[f],p=!1,d={key:e?f:r.key,path:e?r.path.concat(f):r.path,parent:r.parent,reference:r.reference},y=void 0;if(this._flags.sparse||void 0!==h){for(var g=0;g<this._inner.exclusions.length;++g)if(!(y=this._inner.exclusions[g]._validate(h,d,{})).errors){if(i.push(this.createError(e?"array.excludes":"array.excludesSingle",{pos:f,value:h},{key:r.key,path:d.path},n)),o=!0,n.abortEarly)return i;a.shift();break}if(!o){if(this._inner.ordereds.length){if(a.length>0){var m=a.shift();if((y=m._validate(h,d,n)).errors){if(i.push(this.createError("array.ordered",{pos:f,reason:y.errors,value:h},{key:r.key,path:d.path},n)),n.abortEarly)return i}else if(m._flags.strip)c.fastSplice(t,f),--f,--l;else{if(!this._flags.sparse&&void 0===y.value){if(i.push(this.createError("array.sparse",null,{key:r.key,path:d.path,pos:f},n)),n.abortEarly)return i;continue}t[f]=y.value}continue}if(!this._inner.items.length){if(i.push(this.createError("array.orderedLength",{pos:f,limit:this._inner.ordereds.length},{key:r.key,path:d.path},n)),n.abortEarly)return i;continue}}for(var v=[],_=s.length,b=0;b<_;++b)if(!(y=v[b]=s[b]._validate(h,d,n)).errors){if(t[f]=y.value,p=!0,c.fastSplice(s,b),--b,--_,!this._flags.sparse&&void 0===y.value&&(i.push(this.createError("array.sparse",null,{key:r.key,path:d.path,pos:f},n)),n.abortEarly))return i;break}if(!p){var w=!(!n.stripUnknown||!0!==n.stripUnknown&&!n.stripUnknown.arrays);_=u.length;for(var E=0;E<_;++E){var k=u[E],A=s.indexOf(k);if(-1!==A)y=v[A];else if(!(y=k._validate(h,d,n)).errors){k._flags.strip?(c.fastSplice(t,f),--f,--l):this._flags.sparse||void 0!==y.value?t[f]=y.value:(i.push(this.createError("array.sparse",null,{key:r.key,path:d.path,pos:f},n)),o=!0),p=!0;break}if(1===_){if(w){c.fastSplice(t,f),--f,--l,p=!0;break}if(i.push(this.createError(e?"array.includesOne":"array.includesOneSingle",{pos:f,reason:y.errors,value:h},{key:r.key,path:d.path},n)),o=!0,n.abortEarly)return i;break}}if(!o&&this._inner.inclusions.length&&!p){if(w){c.fastSplice(t,f),--f,--l;continue}if(i.push(this.createError(e?"array.includes":"array.includesSingle",{pos:f,value:h},{key:r.key,path:d.path},n)),n.abortEarly)return i}}}}else{if(i.push(this.createError("array.sparse",null,{key:r.key,path:d.path,pos:f},n)),n.abortEarly)return i;a.shift()}}return s.length&&this._fillMissedErrors.call(this,i,s,r,n),a.length&&this._fillOrderedErrors.call(this,i,a,r,n),i.length?i:null},e.prototype.describe=function(){var t=o.prototype.describe.call(this);if(this._inner.ordereds.length){t.orderedItems=[];for(var e=0;e<this._inner.ordereds.length;++e)t.orderedItems.push(this._inner.ordereds[e].describe())}if(this._inner.items.length){t.items=[];for(var r=0;r<this._inner.items.length;++r)t.items.push(this._inner.items[r].describe())}return t},e.prototype.items=function(){for(var t=this,e=this.clone(),r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return u.flatten(n).forEach((function(r,n){try{r=s.schema(t._currentJoi,r)}catch(t){throw t.hasOwnProperty("path")?t.path=n+"."+t.path:t.path=n,t.message=t.message+"("+t.path+")",t}e._inner.items.push(r),"required"===r._flags.presence?e._inner.requireds.push(r):"forbidden"===r._flags.presence?e._inner.exclusions.push(r.optional()):e._inner.inclusions.push(r)})),e},e.prototype.ordered=function(){for(var t=this,e=this.clone(),r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return u.flatten(n).forEach((function(r,n){try{r=s.schema(t._currentJoi,r)}catch(t){throw t.hasOwnProperty("path")?t.path=n+"."+t.path:t.path=n,t.message=t.message+"("+t.path+")",t}e._inner.ordereds.push(r)})),e},e.prototype.min=function(t){var e=a.isRef(t);return u.assert(Number.isSafeInteger(t)&&t>=0||e,"limit must be a positive integer or reference"),this._test("min",t,(function(r,n,i){var o=void 0;if(e){if(o=t(n.reference||n.parent,i),!(Number.isSafeInteger(o)&&o>=0))return this.createError("array.ref",{ref:t.key},n,i)}else o=t;return r.length>=o?r:this.createError("array.min",{limit:t,value:r},n,i)}))},e.prototype.max=function(t){var e=a.isRef(t);return u.assert(Number.isSafeInteger(t)&&t>=0||e,"limit must be a positive integer or reference"),this._test("max",t,(function(r,n,i){var o=void 0;if(e){if(o=t(n.reference||n.parent,i),!(Number.isSafeInteger(o)&&o>=0))return this.createError("array.ref",{ref:t.key},n,i)}else o=t;return r.length<=o?r:this.createError("array.max",{limit:t,value:r},n,i)}))},e.prototype.length=function(t){var e=a.isRef(t);return u.assert(Number.isSafeInteger(t)&&t>=0||e,"limit must be a positive integer or reference"),this._test("length",t,(function(r,n,i){var o=void 0;if(e){if(o=t(n.reference||n.parent,i),!(Number.isSafeInteger(o)&&o>=0))return this.createError("array.ref",{ref:t.key},n,i)}else o=t;return r.length===o?r:this.createError("array.length",{limit:t,value:r},n,i)}))},e.prototype.unique=function(t){u.assert(void 0===t||"function"==typeof t||"string"==typeof t,"comparator must be a function or a string");var e={};return"string"==typeof t?e.path=t:"function"==typeof t&&(e.comparator=t),this._test("unique",e,(function(t,r,i){for(var o={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},s=e.comparator||u.deepEqual,a=0;a<t.length;++a){var c=e.path?u.reach(t[a],e.path):t[a],l=e.comparator?o.custom:o[void 0===c?"undefined":n(c)];if(l)if(l instanceof Map){for(var f=l.entries(),h=void 0;!(h=f.next()).done;)if(s(h.value[0],c)){var p={key:r.key,path:r.path.concat(a),parent:r.parent,reference:r.reference},d={pos:a,value:t[a],dupePos:h.value[1],dupeValue:t[h.value[1]]};return e.path&&(d.path=e.path),this.createError("array.unique",d,p,i)}l.set(c,a)}else{if(void 0!==l[c]){var y={key:r.key,path:r.path.concat(a),parent:r.parent,reference:r.reference},g={pos:a,value:t[a],dupePos:l[c],dupeValue:t[l[c]]};return e.path&&(g.path=e.path),this.createError("array.unique",g,y,i)}l[c]=a}}return t}))},e.prototype.sparse=function(t){var e=void 0===t||!!t;if(this._flags.sparse===e)return this;var r=this.clone();return r._flags.sparse=e,r},e.prototype.single=function(t){var e=void 0===t||!!t;if(this._flags.single===e)return this;var r=this.clone();return r._flags.single=e,r},e.prototype._fillMissedErrors=function(t,e,r,n){for(var i=[],o=0,s=0;s<e.length;++s){var a=e[s]._getLabel();a?i.push(a):++o}i.length?o?t.push(this.createError("array.includesRequiredBoth",{knownMisses:i,unknownMisses:o},{key:r.key,path:r.path},n)):t.push(this.createError("array.includesRequiredKnowns",{knownMisses:i},{key:r.key,path:r.path},n)):t.push(this.createError("array.includesRequiredUnknowns",{unknownMisses:o},{key:r.key,path:r.path},n))},e.prototype._fillOrderedErrors=function(t,e,r,n){for(var i=[],o=0;o<e.length;++o)"required"===u.reach(e[o],"_flags.presence")&&i.push(e[o]);i.length&&this._fillMissedErrors.call(this,t,i,r,n)},e}(o),c.safeParse=function(t,e){try{var r=JSON.parse(t);Array.isArray(r)&&(e.value=r)}catch(t){}},t.exports=new c.Array},function(t,e,r){"use strict";(function(e){function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var i=r(2),o=r(0),s={};s.Binary=function(t){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return e._type="binary",e}return n(r,t),r.prototype._base=function(t,r,n){var i={value:t};if("string"==typeof t&&n.convert)try{i.value=e.from(t,this._flags.encoding)}catch(t){}return i.errors=e.isBuffer(i.value)?null:this.createError("binary.base",null,r,n),i},r.prototype.encoding=function(t){if(o.assert(e.isEncoding(t),"Invalid encoding:",t),this._flags.encoding===t)return this;var r=this.clone();return r._flags.encoding=t,r},r.prototype.min=function(t){return o.assert(Number.isSafeInteger(t)&&t>=0,"limit must be a positive integer"),this._test("min",t,(function(e,r,n){return e.length>=t?e:this.createError("binary.min",{limit:t,value:e},r,n)}))},r.prototype.max=function(t){return o.assert(Number.isSafeInteger(t)&&t>=0,"limit must be a positive integer"),this._test("max",t,(function(e,r,n){return e.length<=t?e:this.createError("binary.max",{limit:t,value:e},r,n)}))},r.prototype.length=function(t){return o.assert(Number.isSafeInteger(t)&&t>=0,"limit must be a positive integer"),this._test("length",t,(function(e,r,n){return e.length===t?e:this.createError("binary.length",{limit:t,value:e},r,n)}))},r}(i),t.exports=new s.Binary}).call(e,r(3).Buffer)},function(t,e,r){"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var i=r(2),o=r(0),s={Set:r(9)};s.Boolean=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._type="boolean",r._flags.insensitive=!0,r._inner.truthySet=new s.Set,r._inner.falsySet=new s.Set,r}return n(e,t),e.prototype._base=function(t,e,r){var n={value:t};if("string"==typeof t&&r.convert){var i=this._flags.insensitive?t.toLowerCase():t;n.value="true"===i||"false"!==i&&t}return"boolean"!=typeof n.value&&(n.value=!!this._inner.truthySet.has(t,null,null,this._flags.insensitive)||!this._inner.falsySet.has(t,null,null,this._flags.insensitive)&&t),n.errors="boolean"==typeof n.value?null:this.createError("boolean.base",null,e,r),n},e.prototype.truthy=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=this.clone();e=o.flatten(e);for(var i=0;i<e.length;++i){var s=e[i];o.assert(void 0!==s,"Cannot call truthy with undefined"),n._inner.truthySet.add(s)}return n},e.prototype.falsy=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=this.clone();e=o.flatten(e);for(var i=0;i<e.length;++i){var s=e[i];o.assert(void 0!==s,"Cannot call falsy with undefined"),n._inner.falsySet.add(s)}return n},e.prototype.insensitive=function(t){var e=void 0===t||!!t;if(this._flags.insensitive===e)return this;var r=this.clone();return r._flags.insensitive=e,r},e.prototype.describe=function(){var t=i.prototype.describe.call(this);return t.truthy=[!0].concat(this._inner.truthySet.values()),t.falsy=[!1].concat(this._inner.falsySet.values()),t},e}(i),t.exports=new s.Boolean},function(t,e,r){"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var i=r(0),o=r(13),s=r(1),a={};a.Func=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._flags.func=!0,r}return n(e,t),e.prototype.arity=function(t){return i.assert(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this._test("arity",t,(function(e,r,n){return e.length===t?e:this.createError("function.arity",{n:t},r,n)}))},e.prototype.minArity=function(t){return i.assert(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this._test("minArity",t,(function(e,r,n){return e.length>=t?e:this.createError("function.minArity",{n:t},r,n)}))},e.prototype.maxArity=function(t){return i.assert(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this._test("maxArity",t,(function(e,r,n){return e.length<=t?e:this.createError("function.maxArity",{n:t},r,n)}))},e.prototype.ref=function(){return this._test("ref",null,(function(t,e,r){return s.isRef(t)?t:this.createError("function.ref",null,e,r)}))},e.prototype.class=function(){return this._test("class",null,(function(t,e,r){return/^\s*class\s/.test(t.toString())?t:this.createError("function.class",null,e,r)}))},e}(o.constructor),t.exports=new a.Func},function(t,e,r){"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var i=r(2),o=r(0),s={};s.Lazy=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._type="lazy",r}return n(e,t),e.prototype._base=function(t,e,r){var n={value:t},o=this._flags.lazy;if(!o)return n.errors=this.createError("lazy.base",null,e,r),n;var s=o();return s instanceof i?s._validate(t,e,r):(n.errors=this.createError("lazy.schema",null,e,r),n)},e.prototype.set=function(t){o.assert("function"==typeof t,"You must provide a function as first argument");var e=this.clone();return e._flags.lazy=t,e},e}(i),t.exports=new s.Lazy},function(t,e,r){"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var i=r(2),o=r(1),s=r(0),a={precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/};a.Number=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._type="number",r._invalids.add(1/0),r._invalids.add(-1/0),r}return n(e,t),e.prototype._base=function(t,e,r){var n={errors:null,value:t};if("string"==typeof t&&r.convert){var i=parseFloat(t);n.value=isNaN(i)||!isFinite(t)?NaN:i}var o="number"==typeof n.value&&!isNaN(n.value);if(r.convert&&"precision"in this._flags&&o){var s=Math.pow(10,this._flags.precision);n.value=Math.round(n.value*s)/s}return n.errors=o?null:this.createError("number.base",null,e,r),n},e.prototype.multiple=function(t){var e=o.isRef(t);return e||(s.assert("number"==typeof t&&isFinite(t),"multiple must be a number"),s.assert(t>0,"multiple must be greater than 0")),this._test("multiple",t,(function(r,n,i){var o=e?t(n.reference||n.parent,i):t;return!e||"number"==typeof o&&isFinite(o)?r%o==0?r:this.createError("number.multiple",{multiple:t,value:r},n,i):this.createError("number.ref",{ref:t.key},n,i)}))},e.prototype.integer=function(){return this._test("integer",void 0,(function(t,e,r){return Number.isSafeInteger(t)?t:this.createError("number.integer",{value:t},e,r)}))},e.prototype.negative=function(){return this._test("negative",void 0,(function(t,e,r){return t<0?t:this.createError("number.negative",{value:t},e,r)}))},e.prototype.positive=function(){return this._test("positive",void 0,(function(t,e,r){return t>0?t:this.createError("number.positive",{value:t},e,r)}))},e.prototype.precision=function(t){s.assert(Number.isSafeInteger(t),"limit must be an integer"),s.assert(!("precision"in this._flags),"precision already set");var e=this._test("precision",t,(function(e,r,n){var i=e.toString().match(a.precisionRx);return Math.max((i[1]?i[1].length:0)-(i[2]?parseInt(i[2],10):0),0)<=t?e:this.createError("number.precision",{limit:t,value:e},r,n)}));return e._flags.precision=t,e},e.prototype.port=function(){return this._test("port",void 0,(function(t,e,r){return!Number.isSafeInteger(t)||t<0||t>65535?this.createError("number.port",{value:t},e,r):t}))},e}(i),a.compare=function(t,e){return function(r){var n=o.isRef(r),i="number"==typeof r&&!isNaN(r);return s.assert(i||n,"limit must be a number or reference"),this._test(t,r,(function(i,o,s){var a=void 0;if(n){if("number"!=typeof(a=r(o.reference||o.parent,s))||isNaN(a))return this.createError("number.ref",{ref:r.key},o,s)}else a=r;return e(i,a)?i:this.createError("number."+t,{limit:a,value:i},o,s)}))}},a.Number.prototype.min=a.compare("min",(function(t,e){return t>=e})),a.Number.prototype.max=a.compare("max",(function(t,e){return t<=e})),a.Number.prototype.greater=a.compare("greater",(function(t,e){return t>e})),a.Number.prototype.less=a.compare("less",(function(t,e){return t<e})),t.exports=new a.Number},function(t,e,r){"use strict";(function(e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var o=r(15),s=r(0),a=void 0,u=r(2),c=r(1),l=r(12),f=r(30),h=r(29),p={uriRegex:f.createUriRegex(),ipRegex:h.createIpRegex(["ipv4","ipv6","ipvfuture"],"optional"),guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},cidrPresences:["required","optional","forbidden"],normalizationForms:["NFC","NFD","NFKC","NFKD"]};p.String=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._type="string",r._invalids.add(""),r}return i(e,t),e.prototype._base=function(t,e,r){if("string"==typeof t&&r.convert){if(this._flags.normalize&&(t=t.normalize(this._flags.normalize)),this._flags.case&&(t="upper"===this._flags.case?t.toLocaleUpperCase():t.toLocaleLowerCase()),this._flags.trim&&(t=t.trim()),this._inner.replacements)for(var n=0;n<this._inner.replacements.length;++n){var i=this._inner.replacements[n];t=t.replace(i.pattern,i.replacement)}if(this._flags.truncate)for(var o=0;o<this._tests.length;++o){var s=this._tests[o];if("max"===s.name){t=t.slice(0,s.arg);break}}this._flags.byteAligned&&t.length%2!=0&&(t="0"+t)}return{value:t,errors:"string"==typeof t?null:this.createError("string.base",{value:t},e,r)}},e.prototype.insensitive=function(){if(this._flags.insensitive)return this;var t=this.clone();return t._flags.insensitive=!0,t},e.prototype.creditCard=function(){return this._test("creditCard",void 0,(function(t,e,r){for(var n=t.length,i=0,o=1;n--;){var s=t.charAt(n)*o;i+=s-9*(s>9),o^=3}return i%10==0&&i>0?t:this.createError("string.creditCard",{value:t},e,r)}))},e.prototype.regex=function(t,e){s.assert(t instanceof RegExp,"pattern must be a RegExp");var r={pattern:new RegExp(t.source,t.ignoreCase?"i":void 0)};"string"==typeof e?r.name=e:"object"===(void 0===e?"undefined":n(e))&&(r.invert=!!e.invert,e.name&&(r.name=e.name));var i=["string.regex",r.invert?".invert":"",r.name?".name":".base"].join("");return this._test("regex",r,(function(t,e,n){return r.pattern.test(t)^r.invert?t:this.createError(i,{name:r.name,pattern:r.pattern,value:t},e,n)}))},e.prototype.alphanum=function(){return this._test("alphanum",void 0,(function(t,e,r){return/^[a-zA-Z0-9]+$/.test(t)?t:this.createError("string.alphanum",{value:t},e,r)}))},e.prototype.token=function(){return this._test("token",void 0,(function(t,e,r){return/^\w+$/.test(t)?t:this.createError("string.token",{value:t},e,r)}))},e.prototype.email=function(t){return t&&(s.assert("object"===(void 0===t?"undefined":n(t)),"email options must be an object"),s.assert(void 0===t.checkDNS,"checkDNS option is not supported"),s.assert(void 0===t.tldWhitelist||"object"===n(t.tldWhitelist),"tldWhitelist must be an array or object"),s.assert(void 0===t.minDomainAtoms||Number.isSafeInteger(t.minDomainAtoms)&&t.minDomainAtoms>0,"minDomainAtoms must be a positive integer"),s.assert(void 0===t.errorLevel||"boolean"==typeof t.errorLevel||Number.isSafeInteger(t.errorLevel)&&t.errorLevel>=0,"errorLevel must be a non-negative integer or boolean")),this._test("email",t,(function(e,n,i){a=a||r(19);try{var o=a.validate(e,t);if(!0===o||0===o)return e}catch(t){}return this.createError("string.email",{value:e},n,i)}))},e.prototype.ip=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=p.ipRegex;s.assert("object"===(void 0===t?"undefined":n(t)),"options must be an object"),t.cidr?(s.assert("string"==typeof t.cidr,"cidr must be a string"),t.cidr=t.cidr.toLowerCase(),s.assert(s.contain(p.cidrPresences,t.cidr),"cidr must be one of "+p.cidrPresences.join(", ")),t.version||"optional"===t.cidr||(e=h.createIpRegex(["ipv4","ipv6","ipvfuture"],t.cidr))):t.cidr="optional";var r=void 0;if(t.version){Array.isArray(t.version)||(t.version=[t.version]),s.assert(t.version.length>=1,"version must have at least 1 version specified"),r=[];for(var i=0;i<t.version.length;++i){var o=t.version[i];s.assert("string"==typeof o,"version at position "+i+" must be a string"),o=o.toLowerCase(),s.assert(h.versions[o],"version at position "+i+" must be one of "+Object.keys(h.versions).join(", ")),r.push(o)}r=s.unique(r),e=h.createIpRegex(r,t.cidr)}return this._test("ip",t,(function(n,i,o){return e.test(n)?n:r?this.createError("string.ipVersion",{value:n,cidr:t.cidr,version:r},i,o):this.createError("string.ip",{value:n,cidr:t.cidr},i,o)}))},e.prototype.uri=function(t){var e="",r=!1,i=!1,o=p.uriRegex;if(t){if(s.assert("object"===(void 0===t?"undefined":n(t)),"options must be an object"),t.scheme){s.assert(t.scheme instanceof RegExp||"string"==typeof t.scheme||Array.isArray(t.scheme),"scheme must be a RegExp, String, or Array"),Array.isArray(t.scheme)||(t.scheme=[t.scheme]),s.assert(t.scheme.length>=1,"scheme must have at least 1 scheme specified");for(var a=0;a<t.scheme.length;++a){var u=t.scheme[a];s.assert(u instanceof RegExp||"string"==typeof u,"scheme at position "+a+" must be a RegExp or String"),e+=e?"|":"",u instanceof RegExp?e+=u.source:(s.assert(/[a-zA-Z][a-zA-Z0-9+-\.]*/.test(u),"scheme at position "+a+" must be a valid scheme"),e+=s.escapeRegex(u))}}t.allowRelative&&(r=!0),t.relativeOnly&&(i=!0)}return(e||r||i)&&(o=f.createUriRegex(e,r,i)),this._test("uri",t,(function(t,r,n){return o.test(t)?t:i?this.createError("string.uriRelativeOnly",{value:t},r,n):e?this.createError("string.uriCustomScheme",{scheme:e,value:t},r,n):this.createError("string.uri",{value:t},r,n)}))},e.prototype.isoDate=function(){return this._test("isoDate",void 0,(function(t,e,r){if(l._isIsoDate(t)){if(!r.convert)return t;var n=new Date(t);if(!isNaN(n.getTime()))return n.toISOString()}return this.createError("string.isoDate",{value:t},e,r)}))},e.prototype.guid=function(t){var e="";if(t&&t.version){Array.isArray(t.version)||(t.version=[t.version]),s.assert(t.version.length>=1,"version must have at least 1 valid version specified");for(var r=new Set,n=0;n<t.version.length;++n){var i=t.version[n];s.assert("string"==typeof i,"version at position "+n+" must be a string"),i=i.toLowerCase();var o=p.guidVersions[i];s.assert(o,"version at position "+n+" must be one of "+Object.keys(p.guidVersions).join(", ")),s.assert(!r.has(o),"version at position "+n+" must not be a duplicate."),e+=o,r.add(o)}}var a=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}([:-]?)[0-9A-F]{4}\\2?["+(e||"0-9A-F")+"][0-9A-F]{3}\\2?["+(e?"89AB":"0-9A-F")+"][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$","i");return this._test("guid",t,(function(t,e,r){var n=a.exec(t);return n?p.guidBrackets[n[1]]!==n[n.length-1]?this.createError("string.guid",{value:t},e,r):t:this.createError("string.guid",{value:t},e,r)}))},e.prototype.hex=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s.assert("object"===(void 0===t?"undefined":n(t)),"hex options must be an object"),s.assert(void 0===t.byteAligned||"boolean"==typeof t.byteAligned,"byteAligned must be boolean");var e=!0===t.byteAligned,r=/^[a-f0-9]+$/i,i=this._test("hex",r,(function(t,n,i){return r.test(t)?e&&t.length%2!=0?this.createError("string.hexAlign",{value:t},n,i):t:this.createError("string.hex",{value:t},n,i)}));return e&&(i._flags.byteAligned=!0),i},e.prototype.base64=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s.assert("object"===(void 0===t?"undefined":n(t)),"base64 options must be an object"),s.assert(void 0===t.paddingRequired||"boolean"==typeof t.paddingRequired,"paddingRequired must be boolean");var e=!1===t.paddingRequired?t.paddingRequired:t.paddingRequired||!0,r=e?/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/:/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/;return this._test("base64",r,(function(t,e,n){return r.test(t)?t:this.createError("string.base64",{value:t},e,n)}))},e.prototype.hostname=function(){var t=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/;return this._test("hostname",void 0,(function(e,r,n){return e.length<=255&&t.test(e)||o.isIPv6(e)?e:this.createError("string.hostname",{value:e},r,n)}))},e.prototype.normalize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";s.assert(s.contain(p.normalizationForms,t),"normalization form must be one of "+p.normalizationForms.join(", "));var e=this._test("normalize",t,(function(e,r,n){return n.convert||e===e.normalize(t)?e:this.createError("string.normalize",{value:e,form:t},r,n)}));return e._flags.normalize=t,e},e.prototype.lowercase=function(){var t=this._test("lowercase",void 0,(function(t,e,r){return r.convert||t===t.toLocaleLowerCase()?t:this.createError("string.lowercase",{value:t},e,r)}));return t._flags.case="lower",t},e.prototype.uppercase=function(){var t=this._test("uppercase",void 0,(function(t,e,r){return r.convert||t===t.toLocaleUpperCase()?t:this.createError("string.uppercase",{value:t},e,r)}));return t._flags.case="upper",t},e.prototype.trim=function(){var t=this._test("trim",void 0,(function(t,e,r){return r.convert||t===t.trim()?t:this.createError("string.trim",{value:t},e,r)}));return t._flags.trim=!0,t},e.prototype.replace=function(t,e){"string"==typeof t&&(t=new RegExp(s.escapeRegex(t),"g")),s.assert(t instanceof RegExp,"pattern must be a RegExp"),s.assert("string"==typeof e,"replacement must be a String");var r=this.clone();return r._inner.replacements||(r._inner.replacements=[]),r._inner.replacements.push({pattern:t,replacement:e}),r},e.prototype.truncate=function(t){var e=void 0===t||!!t;if(this._flags.truncate===e)return this;var r=this.clone();return r._flags.truncate=e,r},e}(u),p.compare=function(t,r){return function(n,i){var o=c.isRef(n);return s.assert(Number.isSafeInteger(n)&&n>=0||o,"limit must be a positive integer or reference"),s.assert(!i||e.isEncoding(i),"Invalid encoding:",i),this._test(t,n,(function(e,s,a){var u=void 0;if(o){if(u=n(s.reference||s.parent,a),!Number.isSafeInteger(u))return this.createError("string.ref",{ref:n.key},s,a)}else u=n;return r(e,u,i)?e:this.createError("string."+t,{limit:u,value:e,encoding:i},s,a)}))}},p.String.prototype.min=p.compare("min",(function(t,r,n){return(n?e.byteLength(t,n):t.length)>=r})),p.String.prototype.max=p.compare("max",(function(t,r,n){return(n?e.byteLength(t,n):t.length)<=r})),p.String.prototype.length=p.compare("length",(function(t,r,n){return(n?e.byteLength(t,n):t.length)===r})),p.String.prototype.uuid=p.String.prototype.guid,t.exports=new p.String}).call(e,r(3).Buffer)},function(t,e,r){"use strict";var n=r(14),i={Ip:{cidrs:{ipv4:{required:"\\/(?:"+n.ipv4Cidr+")",optional:"(?:\\/(?:"+n.ipv4Cidr+"))?",forbidden:""},ipv6:{required:"\\/"+n.ipv6Cidr,optional:"(?:\\/"+n.ipv6Cidr+")?",forbidden:""},ipvfuture:{required:"\\/"+n.ipv6Cidr,optional:"(?:\\/"+n.ipv6Cidr+")?",forbidden:""}},versions:{ipv4:n.IPv4address,ipv6:n.IPv6address,ipvfuture:n.IPvFuture}}};i.Ip.createIpRegex=function(t,e){for(var r=void 0,n=0;n<t.length;++n){var o=t[n];r?r+="|"+i.Ip.versions[o]+i.Ip.cidrs[o][e]:r="^(?:"+i.Ip.versions[o]+i.Ip.cidrs[o][e]}return new RegExp(r+")$")},t.exports=i.Ip},function(t,e,r){"use strict";var n=r(14),i={Uri:{createUriRegex:function(t,e,r){var i=n.scheme,o=void 0;if(r)o="(?:"+n.relativeRef+")";else{t&&(i="(?:"+t+")");var s="(?:"+i+":"+n.hierPart+")";o=e?"(?:"+s+"|"+n.relativeRef+")":s}return new RegExp("^"+o+"(?:\\?"+n.query+")?(?:#"+n.fragment+")?$")}}};t.exports=i.Uri},function(t,e,r){"use strict";var n=r(0),i={};t.exports=i.Topo=function(){this._items=[],this.nodes=[]},i.Topo.prototype.add=function(t,e){var r=this,i=[].concat((e=e||{}).before||[]),o=[].concat(e.after||[]),s=e.group||"?",a=e.sort||0;n.assert(-1===i.indexOf(s),"Item cannot come before itself:",s),n.assert(-1===i.indexOf("?"),"Item cannot come before unassociated items"),n.assert(-1===o.indexOf(s),"Item cannot come after itself:",s),n.assert(-1===o.indexOf("?"),"Item cannot come after unassociated items"),[].concat(t).forEach((function(t,e){var n={seq:r._items.length,sort:a,before:i,after:o,group:s,node:t};r._items.push(n)}));var u=this._sort();return n.assert(!u,"item","?"!==s?"added into group "+s:"","created a dependencies error"),this.nodes},i.Topo.prototype.merge=function(t){t=[].concat(t);for(var e=0;e<t.length;++e){var r=t[e];if(r)for(var o=0;o<r._items.length;++o){var s=n.shallow(r._items[o]);this._items.push(s)}}this._items.sort(i.mergeSort);for(var a=0;a<this._items.length;++a)this._items[a].seq=a;var u=this._sort();return n.assert(!u,"merge created a dependencies error"),this.nodes},i.mergeSort=function(t,e){return t.sort===e.sort?0:t.sort<e.sort?-1:1},i.Topo.prototype._sort=function(){for(var t={},e=Object.create(null),r=Object.create(null),n=0;n<this._items.length;++n){var i=this._items[n],o=i.seq,s=i.group;r[s]=r[s]||[],r[s].push(o),t[o]=i.before;for(var a=i.after,u=0;u<a.length;++u)e[a[u]]=(e[a[u]]||[]).concat(o)}for(var c=Object.keys(t),l=0;l<c.length;++l){for(var f=c[l],h=[],p=Object.keys(t[f]),d=0;d<p.length;++d){var y=t[f][p[d]];r[y]=r[y]||[];for(var g=0;g<r[y].length;++g)h.push(r[y][g])}t[f]=h}for(var m=Object.keys(e),v=0;v<m.length;++v){var _=m[v];if(r[_])for(var b=0;b<r[_].length;++b){var w=r[_][b];t[w]=t[w].concat(e[_])}}var E=void 0,k={};c=Object.keys(t);for(var A=0;A<c.length;++A){var S=c[A];E=t[S];for(var x=0;x<E.length;++x)k[E[x]]=(k[E[x]]||[]).concat(S)}for(var C={},I=[],T=0;T<this._items.length;++T){var R=T;if(k[T]){R=null;for(var O=0;O<this._items.length;++O)if(!0!==C[O]){k[O]||(k[O]=[]);for(var P=k[O].length,j=0,N=0;N<P;++N)C[k[O][N]]&&++j;if(j===P){R=O;break}}}null!==R&&(C[R]=!0,I.push(R))}if(I.length!==this._items.length)return new Error("Invalid dependencies");for(var D={},L=0;L<this._items.length;++L){var F=this._items[L];D[F.seq]=F}var B=[];this._items=I.map((function(t){var e=D[t];return B.push(e.node),e})),this.nodes=B}},function(t,e,r){"use strict";var n=r(8);t.exports=n},function(t,e,r){"use strict";e.byteLength=function(t){return 3*t.length/4-c(t)},e.toByteArray=function(t){var e,r,n,s,a,u=t.length;s=c(t),a=new o(3*u/4-s),r=s>0?u-4:u;var l=0;for(e=0;e<r;e+=4)n=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],a[l++]=n>>16&255,a[l++]=n>>8&255,a[l++]=255&n;return 2===s?(n=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,a[l++]=255&n):1===s&&(n=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,a[l++]=n>>8&255,a[l++]=255&n),a},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o="",s=[],a=0,u=r-i;a<u;a+=16383)s.push(l(t,a,a+16383>u?u:a+16383));return 1===i?(e=t[r-1],o+=n[e>>2],o+=n[e<<4&63],o+="=="):2===i&&(e=(t[r-2]<<8)+t[r-1],o+=n[e>>10],o+=n[e>>4&63],o+=n[e<<2&63],o+="="),s.push(o),s.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function l(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16)+(t[a+1]<<8)+t[a+2],s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){t.exports={_args:[["joi@13.4.0","/Users/jeff/projects/joi-browser"]],_development:!0,_from:"joi@13.4.0",_id:"joi@13.4.0",_inBundle:!1,_integrity:"sha512-JuK4GjEu6j7zr9FuVe2MAseZ6si/8/HaY0qMAejfDFHp7jcH4OKE937mIHM5VT4xDS0q7lpQbszbxKV9rm0yUg==",_location:"/joi",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"joi@13.4.0",name:"joi",escapedName:"joi",rawSpec:"13.4.0",saveSpec:null,fetchSpec:"13.4.0"},_requiredBy:["#DEV:/"],_resolved:"https://registry.npmjs.org/joi/-/joi-13.4.0.tgz",_spec:"13.4.0",_where:"/Users/jeff/projects/joi-browser",bugs:{url:"https://github.com/hapijs/joi/issues"},dependencies:{hoek:"5.x.x",isemail:"3.x.x",topo:"3.x.x"},description:"Object schema validation",devDependencies:{code:"5.x.x",hapitoc:"1.x.x",lab:"15.x.x"},engines:{node:">=8.9.0"},homepage:"https://github.com/hapijs/joi",keywords:["hapi","schema","validation"],license:"BSD-3-Clause",main:"lib/index.js",name:"joi",repository:{type:"git",url:"git://github.com/hapijs/joi.git"},scripts:{test:"lab -t 100 -a code -L","test-cov-html":"lab -r html -o coverage.html -a code","test-debug":"lab -a code",toc:"hapitoc",version:"npm run toc && git add API.md README.md"},version:"13.4.0"}},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return n.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var s=i>=0?arguments[i]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,n="/"===s.charAt(0))}return(n?"/":"")+(e=r(o(e.split("/"),(function(t){return!!t})),!n).join("/"))||"."},e.normalize=function(t){var n=e.isAbsolute(t),i="/"===s(t,-1);return(t=r(o(t.split("/"),(function(t){return!!t})),!n).join("/"))||n||(t="."),t&&i&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),o=n(r.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}var c=[];for(u=a;u<i.length;u++)c.push("..");return(c=c.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=i(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},e.basename=function(t,e){var r=i(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return i(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(e,r(7))},function(t,e,r){(function(t,n){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=36,l=1,f=26,h=38,p=700,d=72,y=128,g="-",m=/^xn--/,v=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-l,E=Math.floor,k=String.fromCharCode;function A(t){throw new RangeError(b[t])}function S(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function x(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+S((t=t.replace(_,".")).split("."),e).join(".")}function C(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function I(t){return S(t,(function(t){var e="";return t>65535&&(e+=k((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=k(t)})).join("")}function T(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function R(t,e,r){var n=0;for(t=r?E(t/p):t>>1,t+=E(t/e);t>w*f>>1;n+=c)t=E(t/w);return E(n+(w+1)*t/(t+h))}function O(t){var e,r,n,i,o,s,a,h,p,m,v,_=[],b=t.length,w=0,k=y,S=d;for((r=t.lastIndexOf(g))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&A("not-basic"),_.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<b;){for(o=w,s=1,a=c;i>=b&&A("invalid-input"),((h=(v=t.charCodeAt(i++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:c)>=c||h>E((u-w)/s))&&A("overflow"),w+=h*s,!(h<(p=a<=S?l:a>=S+f?f:a-S));a+=c)s>E(u/(m=c-p))&&A("overflow"),s*=m;S=R(w-o,e=_.length+1,0==o),E(w/e)>u-k&&A("overflow"),k+=E(w/e),w%=e,_.splice(w++,0,k)}return I(_)}function P(t){var e,r,n,i,o,s,a,h,p,m,v,_,b,w,S,x=[];for(_=(t=C(t)).length,e=y,r=0,o=d,s=0;s<_;++s)(v=t[s])<128&&x.push(k(v));for(n=i=x.length,i&&x.push(g);n<_;){for(a=u,s=0;s<_;++s)(v=t[s])>=e&&v<a&&(a=v);for(a-e>E((u-r)/(b=n+1))&&A("overflow"),r+=(a-e)*b,e=a,s=0;s<_;++s)if((v=t[s])<e&&++r>u&&A("overflow"),v==e){for(h=r,p=c;!(h<(m=p<=o?l:p>=o+f?f:p-o));p+=c)S=h-m,w=c-m,x.push(k(T(m+S%w,0))),h=E(S/w);x.push(k(T(h,0))),o=R(r,b,n==i),r=0,++n}++r,++e}return x.join("")}a={version:"1.4.1",ucs2:{decode:C,encode:I},decode:O,encode:P,toASCII:function(t){return x(t,(function(t){return v.test(t)?"xn--"+P(t):t}))},toUnicode:function(t){return x(t,(function(t){return m.test(t)?O(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return a}.call(e,r,e,t))||(t.exports=i)}()}).call(e,r(41)(t),r(5))},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}])},t.exports=n()},function(t,e,r){const{isValidEcAddress:n,isValidFctAddress:i,isValidPrivateEcAddress:o,isValidPrivateFctAddress:s,isValidPublicEcAddress:a,isValidPublicFctAddress:u}=r(126),{isValidIdentityKey:c,isValidPublicIdentityKey:l,isValidSecretIdentityKey:f}=r(131),h=r(132);t.exports=t=>({base:t.string(),name:"factom",language:{identityKey:"needs to be a valid {{type}} identity key",factoidAddress:"needs to be a valid {{type}} factoid address",entryCreditAddress:"needs to be a valid {{type}} entry credit address",serverIdentityKey:"needs to be a valid {{type}} server identity key of priority [{{priority}}]"},rules:[d(t,"identityKey",l,f,c),d(t,"factoidAddress",u,s,i),d(t,"entryCreditAddress",a,o,n),{name:"serverIdentityKey",params:{options:t.object().keys({type:t.string().valid(["public","private","secret"]),priority:t.number().valid([1,2,3,4])})},validate(t,e,r,n){const{type:i="",priority:o=0}=t.options||{},s=function(t,e){let r=[];switch(t){case"":r.push("id","sk");break;case"public":r.push("id");break;case"secret":case"private":r.push("sk")}switch(e){case 1:case 2:case 3:case 4:return r.map(t=>t+e);case 0:return p(r.map(t=>[t+1,t+2,t+3,t+4]))}}(i,o);return h.isValidIdentityKey(e,s)?e:this.createError("factom.serverIdentityKey",{v:e,type:i,priority:o||"any"},r,n)}}]});const p=t=>[].concat(...t);function d(t,e,r,n,i){return{name:e,params:{type:t.any().valid(["public","private","secret"])},validate(t,o,s,a){const{type:u=""}=t;switch(u){case"public":if(!r(o))return this.createError(`factom.${e}`,{v:o,type:u},s,a);break;case"secret":case"private":if(!n(o))return this.createError(`factom.${e}`,{v:o,type:u},s,a);break;case"":if(!i(o))return this.createError(`factom.${e}`,{v:o,type:u},s,a)}return o}}}},function(t,e){t.exports=n;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,e,r){this.low=0|t,this.high=0|e,this.unsigned=!!r}function i(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=i;var o={},s={};function a(t,e){var r,n,i;return e?(i=0<=(t>>>=0)&&t<256)&&(n=s[t])?n:(r=c(t,(0|t)<0?-1:0,!0),i&&(s[t]=r),r):(i=-128<=(t|=0)&&t<128)&&(n=o[t])?n:(r=c(t,t<0?-1:0,!1),i&&(o[t]=r),r)}function u(t,e){if(isNaN(t))return e?v:m;if(e){if(t<0)return v;if(t>=d)return k}else{if(t<=-y)return A;if(t+1>=y)return E}return t<0?u(-t,e).neg():c(t%p|0,t/p|0,e)}function c(t,e,r){return new n(t,e,r)}n.fromInt=a,n.fromNumber=u,n.fromBits=c;var l=Math.pow;function f(t,e,r){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return m;if("number"==typeof e?(r=e,e=!1):e=!!e,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return f(t.substring(1),e,r).neg();for(var i=u(l(r,8)),o=m,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+a),r);if(a<8){var h=u(l(r,a));o=o.mul(h).add(u(c))}else o=(o=o.mul(i)).add(u(c))}return o.unsigned=e,o}function h(t,e){return"number"==typeof t?u(t,e):"string"==typeof t?f(t,e):c(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=f,n.fromValue=h;var p=4294967296,d=p*p,y=d/2,g=a(1<<24),m=a(0);n.ZERO=m;var v=a(0,!0);n.UZERO=v;var _=a(1);n.ONE=_;var b=a(1,!0);n.UONE=b;var w=a(-1);n.NEG_ONE=w;var E=c(-1,2147483647,!1);n.MAX_VALUE=E;var k=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var A=c(0,-2147483648,!1);n.MIN_VALUE=A;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},S.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(A)){var e=u(t),r=this.div(e),n=r.mul(e).sub(this);return r.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=u(l(t,6),this.unsigned),o=this,s="";;){var a=o.div(i),c=(o.sub(a.mul(i)).toInt()>>>0).toString(t);if((o=a).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(A)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(t){return i(t)||(t=h(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},S.eq=S.equals,S.notEquals=function(t){return!this.eq(t)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(t){return this.comp(t)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(t){return this.comp(t)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(t){return this.comp(t)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(t){return this.comp(t)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(t){if(i(t)||(t=h(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(A)?A:this.not().add(_)},S.neg=S.negate,S.add=function(t){i(t)||(t=h(t));var e=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,s=t.high>>>16,a=65535&t.high,u=t.low>>>16,l=0,f=0,p=0,d=0;return p+=(d+=o+(65535&t.low))>>>16,f+=(p+=n+u)>>>16,l+=(f+=r+a)>>>16,l+=e+s,c((p&=65535)<<16|(d&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},S.subtract=function(t){return i(t)||(t=h(t)),this.add(t.neg())},S.sub=S.subtract,S.multiply=function(t){if(this.isZero())return m;if(i(t)||(t=h(t)),r)return c(r.mul(this.low,this.high,t.low,t.high),r.get_high(),this.unsigned);if(t.isZero())return m;if(this.eq(A))return t.isOdd()?A:m;if(t.eq(A))return this.isOdd()?A:m;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(g)&&t.lt(g))return u(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,n=65535&this.high,o=this.low>>>16,s=65535&this.low,a=t.high>>>16,l=65535&t.high,f=t.low>>>16,p=65535&t.low,d=0,y=0,v=0,_=0;return v+=(_+=s*p)>>>16,y+=(v+=o*p)>>>16,v&=65535,y+=(v+=s*f)>>>16,d+=(y+=n*p)>>>16,y&=65535,d+=(y+=o*f)>>>16,y&=65535,d+=(y+=s*l)>>>16,d+=e*p+n*f+o*l+s*a,c((v&=65535)<<16|(_&=65535),(d&=65535)<<16|(y&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(t){if(i(t)||(t=h(t)),t.isZero())throw Error("division by zero");var e,n,o;if(r)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?c((this.unsigned?r.div_u:r.div_s)(this.low,this.high,t.low,t.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return v;if(t.gt(this.shru(1)))return b;o=v}else{if(this.eq(A))return t.eq(_)||t.eq(w)?A:t.eq(A)?_:(e=this.shr(1).div(t).shl(1)).eq(m)?t.isNegative()?_:w:(n=this.sub(t.mul(e)),o=e.add(n.div(t)));if(t.eq(A))return this.unsigned?v:m;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=m}for(n=this;n.gte(t);){e=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(e)/Math.LN2),a=s<=48?1:l(2,s-48),f=u(e),p=f.mul(t);p.isNegative()||p.gt(n);)p=(f=u(e-=a,this.unsigned)).mul(t);f.isZero()&&(f=_),o=o.add(f),n=n.sub(p)}return o},S.div=S.divide,S.modulo=function(t){return i(t)||(t=h(t)),r?c((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,t.low,t.high),r.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return c(~this.low,~this.high,this.unsigned)},S.and=function(t){return i(t)||(t=h(t)),c(this.low&t.low,this.high&t.high,this.unsigned)},S.or=function(t){return i(t)||(t=h(t)),c(this.low|t.low,this.high|t.high,this.unsigned)},S.xor=function(t){return i(t)||(t=h(t)),c(this.low^t.low,this.high^t.high,this.unsigned)},S.shiftLeft=function(t){return i(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):c(0,this.low<<t-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(t){return i(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):c(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(t){if(i(t)&&(t=t.toInt()),0===(t&=63))return this;var e=this.high;return t<32?c(this.low>>>t|e<<32-t,e>>>t,this.unsigned):c(32===t?e:e>>>t-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},S.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},S.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},function(t,e,r){"use strict";var n=r(32),i=r(33);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-r,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},function(t,e,r){"use strict";var n=r(32),i=r(74),o=r(33),s=n.rotr64_hi,a=n.rotr64_lo,u=n.shr64_hi,c=n.shr64_lo,l=n.sum64,f=n.sum64_hi,h=n.sum64_lo,p=n.sum64_4_hi,d=n.sum64_4_lo,y=n.sum64_5_hi,g=n.sum64_5_lo,m=i.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function b(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function w(t,e,r,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function E(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function k(t,e,r,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function A(t,e){var r=s(t,e,28)^s(e,t,2)^s(e,t,7);return r<0&&(r+=4294967296),r}function S(t,e){var r=a(t,e,28)^a(e,t,2)^a(e,t,7);return r<0&&(r+=4294967296),r}function x(t,e){var r=s(t,e,14)^s(t,e,18)^s(e,t,9);return r<0&&(r+=4294967296),r}function C(t,e){var r=a(t,e,14)^a(t,e,18)^a(e,t,9);return r<0&&(r+=4294967296),r}function I(t,e){var r=s(t,e,1)^s(t,e,8)^u(t,e,7);return r<0&&(r+=4294967296),r}function T(t,e){var r=a(t,e,1)^a(t,e,8)^c(t,e,7);return r<0&&(r+=4294967296),r}function R(t,e){var r=s(t,e,19)^s(e,t,29)^u(t,e,6);return r<0&&(r+=4294967296),r}function O(t,e){var r=a(t,e,19)^a(e,t,29)^c(t,e,6);return r<0&&(r+=4294967296),r}n.inherits(_,m),t.exports=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=R(r[n-4],r[n-3]),o=O(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],u=I(r[n-30],r[n-29]),c=T(r[n-30],r[n-29]),l=r[n-32],f=r[n-31];r[n]=p(i,o,s,a,u,c,l,f),r[n+1]=d(i,o,s,a,u,c,l,f)}},_.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],c=this.h[5],p=this.h[6],d=this.h[7],m=this.h[8],v=this.h[9],_=this.h[10],I=this.h[11],T=this.h[12],R=this.h[13],O=this.h[14],P=this.h[15];o(this.k.length===r.length);for(var j=0;j<r.length;j+=2){var N=O,D=P,L=x(m,v),F=C(m,v),B=b(m,v,_,I,T),U=w(m,v,_,I,T,R),M=this.k[j],q=this.k[j+1],V=r[j],H=r[j+1],z=y(N,D,L,F,B,U,M,q,V,H),Y=g(N,D,L,F,B,U,M,q,V,H);N=A(n,i),D=S(n,i),L=E(n,i,s,a,u),F=k(n,i,s,a,u,c);var $=f(N,D,L,F),K=h(N,D,L,F);O=T,P=R,T=_,R=I,_=m,I=v,m=f(p,d,z,Y),v=h(d,d,z,Y),p=u,d=c,u=s,c=a,s=n,a=i,n=f(z,Y,$,K),i=h(z,Y,$,K)}l(this.h,0,n,i),l(this.h,2,s,a),l(this.h,4,u,c),l(this.h,6,p,d),l(this.h,8,m,v),l(this.h,10,_,I),l(this.h,12,T,R),l(this.h,14,O,P)},_.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){(function(e){const n=r(31),i=r(1).sign;t.exports={sha256d:function(t){return e.from(n().update(n().update(t).digest()).digest())},secretToPublicKey:function(t){const r=i.keyPair.fromSeed(t);return e.from(r.publicKey)}}}).call(this,r(0).Buffer)},function(t,e,r){const n=r(61),i=r(48).Agent,o=r(22),s=r(141),a=new Set(["holding-queue","network-info","predictive-fer","audit-servers","federated-servers","configuration","process-list","authorities","reload-configuration","drop-rate","set-drop-rate","delay","set-delay","summary","messages"]),u={retries:3,factor:2,minTimeout:500,maxTimeout:2e3};class c extends Error{constructor(t,e,r){const n=[`API call to [${t}] `];"object"==typeof e&&n.push(`with params ${JSON.stringify(e)} `),n.push(`got rejected: ${r.message} (code: ${r.code})`),super(n.join("")),this.code=r.code,this.data=r.data,Error.captureStackTrace&&Error.captureStackTrace(this,c)}}class l{constructor(t,e){const r=t.host||"localhost",o=t.protocol||"http",s={baseURL:`${o}://${r}:${t.port||e}`,headers:{"Content-Type":"application/json"}};"string"==typeof t.user&&""!==t.user&&(s.auth={username:t.user,password:t.password||""},s.withCredentials=!0),"https"===o&&void 0!==t.rejectUnauthorized&&(s.httpsAgent=new i({rejectUnauthorized:t.rejectUnauthorized})),t.timeout&&(s.timeout=parseInt(t.timeout)),this.httpCli=n.create(s),this.path=t.path||"/v2",this.apiCounter=function(){let t=0;return function(){return++t}}(),this.retry=t.retry||u,this.cookies={}}_processCookieHeader(t){Array.isArray(t)&&(t.map(t=>t.split(";")[0]).forEach(t=>{const e=t.split("=");this.cookies[e[0]]=e[1]}),this.httpCli.defaults.headers.Cookie=Object.entries(this.cookies).map(t=>`${t[0]}=${t[1]}`).join(";"))}call(t,e,r,n){const{timeout:i,retry:a}=n||{};return new o((n,o)=>{const u=s.operation(a||this.retry),l={jsonrpc:"2.0",id:this.apiCounter(),method:e,params:r};u.attempt(()=>{this.httpCli.post(t,l,{timeout:i}).then(t=>{this._processCookieHeader(t.headers["set-cookie"]),n(t.data.result)}).catch(t=>(function({error:t,reject:e,method:r,params:n,operation:i}){let o;if(t.response){const i=t.response.data;switch(t.response.status){case 400:return"object"==typeof i.error?e(new c(r,n,i.error)):e(new Error(i));case 401:return e(new Error(t.response.data));default:o="object"==typeof i?JSON.stringify(i):i}}else o=t.message;const s=new Error(o);if(!i.retry(s))return e(i.mainError())})({error:t,reject:o,method:e,params:r,operation:u}))})})}}t.exports={FactomdCli:class extends l{constructor(t){const e=t||{};super(e,8088),this.debugPath=e.debugPath||"/debug"}call(t,e,r){const n=a.has(t)?this.debugPath:this.path;return super.call(n,t,e,r)}},WalletdCli:class extends l{constructor(t){super(t||{},8089)}call(t,e,r){return super.call(this.path,t,e,r)}}}},function(t,e,r){"use strict";(function(e){var n=r(2),i=n(r(3)),o=n(r(4)),s=r(5),a=r(1).sign,u=r(6),c=r(12),l=r(9),f=r(17),h=function(){function t(e){if((0,i.default)(this,t),e instanceof r(35))Object.keys(e._inputs).find((function(t){return t===s.COINBASE_ADDRESS_PUBLIC}))?this._id1=e._id1:this._keys=e._keys,this._signatures=e._signatures,this._tokenChainId=e._tokenChainId,this._inputs=e._inputs,this._outputs=e._outputs,this._timestamp=e._timestamp,void 0!==e._metadata&&(this._metadata=e._metadata);else{if(!("string"==typeof e||e instanceof String))throw new Error("Constructor expects either a previously assembled unsigned Transaction or a string containing the token chain id.");var n=e;if(!n||64!==n.length)throw new Error("Token chain ID must be a valid Factom chain ID");this._tokenChainId=n,this._keys=[],this._inputs={},this._outputs={}}}return(0,o.default)(t,[{key:"input",value:function(t,e){if(void 0!==this._signatures)throw new Error("Attempting to add new input to a previously assembled transaction, expecting signatures only");if(Object.keys(this._inputs).find((function(t){return t===s.COINBASE_ADDRESS_PUBLIC})))throw new Error("Cannot add an additional input to a coinbase transaction");if(u.isValidPrivateAddress(t)){if(!(e=new l(e)).isInteger()||e.isLessThan(0))throw new Error("Input amount must be a positive nonzero integer");this._keys.push(a.keyPair.fromSeed(u.addressToKey(t))),this._inputs[u.getPublicAddress(t)]=e}else{var r=t;if(!u.isValidPublicFctAddress(r))throw new Error("Input address must be either a valid private Factoid address or a Factoid public address");if(!(e=new l(e)).isInteger()||e.isLessThan(0))throw new Error("Input amount must be a positive nonzero integer");this._keys.push({pubaddr:r,publicKey:void 0}),this._inputs[r]=e}return this}},{key:"coinbaseInput",value:function(t){if(this._inputs.length>0)throw new Error("Coinbase transactions may only have a single input");return this.input(s.COINBASE_ADDRESS_PRIVATE,t),this}},{key:"output",value:function(t,e){if(void 0!==this._signatures)throw new Error("Attempting to add new output to previously assembled transaction, expecting signatures only");if(!u.isValidPublicFctAddress(t))throw new Error("Output address must be a valid public Factoid address");if(!(e=new l(e)).isInteger()||e.isLessThan(0))throw new Error("Input amount must be a positive nonzero integer");return this._outputs[t]=e,this}},{key:"burnOutput",value:function(t){return this.output(s.COINBASE_ADDRESS_PUBLIC,t),this}},{key:"sk1",value:function(t){if(!c.isValidSk1(t))throw new Error("You must include a valid SK1 Key to sign a coinbase transaction");return this._sk1=t,this}},{key:"id1",value:function(t){if(void 0!==this._signatures)throw new Error("Attempting to add new ID1 key while expecting coinbase signature only.  Use id1Signature.");return this._id1=f.extractIdentityPublicKey(t),this}},{key:"id1Signature",value:function(t,r){if(void 0===this._id1)throw new Error("Attempting to pass a signature for invalid coinbase transaction.");if(!this._id1.equals(e.from(t,"hex")))throw new Error("ID1 Key is not equal coinbase ID1 Key requiring a signature");return this._signatures=[r],this}},{key:"metadata",value:function(t){if(void 0!==this._signatures)throw new Error("Attempting to add new metadata to previously assembled transaction, expecting signatures only");try{JSON.stringify(t)}catch(t){throw new Error("Transaction metadata bust be a valid JSON object or primitive")}return this._metadata=t,this}},{key:"pkSignature",value:function(t,r){if(void 0!==this._id1)throw new Error("Attempting to add a signature for a regular transaction to a coinbase transaction.");var n=e.from(t,"hex"),i=u.keyToPublicFctAddress(n),o=Object.keys(this._inputs).findIndex((function(t){return t===i}));if(void 0===o)throw new Error("Public Key ("+n.toString("hex")+") for provided signature not found in input list.");return this._keys[o].publicKey=n,this._signatures[o]=r,this}},{key:"build",value:function(){if(0===Object.keys(this._inputs).length||0===Object.keys(this._outputs).length)throw new Error("Must have at least one input and one output");var t=Object.values(this._inputs).reduce((function(t,e){return t.plus(e)}),new l(0)),e=Object.values(this._outputs).reduce((function(t,e){return t.plus(e)}),new l(0));if(!t.isEqualTo(e))throw new Error("Input and output amount sums must match ("+t+" != "+e+")");if(Object.keys(this._inputs).find((function(t){return t===s.COINBASE_ADDRESS_PUBLIC}))&&!this._sk1&&!this._id1)throw new Error("You must include a valid issuer sk1 key to perform a coinbase transaction");if(void 0!==this._signatures)for(var n=0;n<this._signatures.length;++n)if(void 0===this._signatures[n])throw new Error("Missing signatures: All inputs must have an associated signature");return new(r(35))(this)}}]),t}();t.exports=h}).call(this,r(0).Buffer)},function(t,e,r){(function(e){const r=e.alloc(1);t.exports={VERSION_0:r,IDENTITY_KEY_HEX_PREFIX_MAP:{sk1:"4db6c9",sk2:"4db6e7",sk3:"4db705",sk4:"4db723",id1:"3fbeba",id2:"3fbed8",id3:"3fbef6",id4:"3fbf14"}}}).call(this,r(0).Buffer)},function(t,e,r){"use strict";var n=r(2),i=n(r(3)),o=n(r(4)),s=r(12),a=r(12),u=r(9),c=r(14)({strict:!0}),l=function(){function t(e,r,n){if((0,i.default)(this,t),!a.isValidIdentityChainId(r))throw new Error("You must include a valid issuer identity Root Chain Id to issue a FAT token");if(this._rootChainId=r,void 0===e||"string"!=typeof e)throw new Error("Token is a required string");if(this._tokenId=e,!s.isValidSk1(n))throw new Error("Supplied key is not a valid sk1 private key");this._sk1=n,this._type="FAT-0"}return(0,o.default)(t,[{key:"symbol",value:function(t){if(!t)throw new Error("Token symbol must be defined");if(!new RegExp("[A-Z ]+").test(t))throw new Error("Token symbol must only contain capital letters A-Z");if(0==t.length||t.length>4)throw new Error("Token symbol must be 1 - 4 characters");return this._symbol=t,this}},{key:"supply",value:function(t){if((t=new u(t)).isEqualTo(0)||t.isLessThan(-1))throw new Error("Supply must be equal to -1(infinite) or greater than 0");return this._supply=t,this}},{key:"precision",value:function(t){if(isNaN(t)||!Number.isInteger(t)||t<0||t>18)throw new Error("Precision must be an integer between 0 and 18");return this._precision=t,this}},{key:"metadata",value:function(t){try{c.stringify(t)}catch(t){throw new Error("Transaction metadata bust be a valid JSON object or primitive")}return this._metadata=t,this}},{key:"build",value:function(){return void 0===this._supply&&(this._supply=new u(-1)),new(r(45))(this)}}]),t}();t.exports=l},function(t,e,r){"use strict";(function(e){var n=r(2),i=n(r(21)),o=n(r(3)),s=n(r(4)),a=r(17),u=r(5),c=r(1).sign,l=r(6),f=r(12),h=function(){function t(e){if((0,o.default)(this,t),e instanceof r(36))Object.keys(e._inputs).find((function(t){return t===u.COINBASE_ADDRESS_PUBLIC}))?this._id1=e._id1:this._keys=e._keys,this._signatures=e._signatures,this._tokenChainId=e._tokenChainId,this._inputs=e._inputs,this._outputs=e._outputs,this._timestamp=e._timestamp,void 0!==e._metadata&&(this._metadata=e._metadata),void 0!==e._tokenMetadata&&(this._tokenMetadata=e._tokenMetadata);else{if(!("string"==typeof e||e instanceof String))throw new Error("Constructor expects either a previously assembled unsigned Transaction or a string containing the token chain id.");var n=e;if(!n||64!==n.length)throw new Error("Token chain ID must be a valid Factom chain ID");this._tokenChainId=n,this._keys=[],this._inputs={},this._outputs={}}}return(0,s.default)(t,[{key:"input",value:function(t,e){if(void 0!==this._signatures)throw new Error("Attempting to add new input, expecting signatures only");if(Object.keys(this._inputs).find((function(t){return t===u.COINBASE_ADDRESS_PUBLIC})))throw new Error("Cannot add an additional input to a coinbase transaction");if(!a.validateNFIds(e))throw new Error("Invalid ID range: "+JSON.stringify(e));if(l.isValidPrivateAddress(t)){if(this._outputs[l.getPublicAddress(t)])throw new Error("Input address already occurs in outputs");this._keys.push(c.keyPair.fromSeed(l.addressToKey(t))),this._inputs[l.getPublicAddress(t)]=e}else{var r=t;if(!l.isValidPublicFctAddress(r))throw new Error("Input address must be either a valid private Factoid address or a Factoid public address");if(this._outputs[r])throw new Error("Input address already occurs in outputs");this._keys.push({pubaddr:r,publicKey:void 0}),this._inputs[r]=e}return this}},{key:"coinbaseInput",value:function(t){if(this._inputs.length>0)throw new Error("Coinbase transactions may only have a single input");return this.input(u.COINBASE_ADDRESS_PRIVATE,t),this}},{key:"output",value:function(t,e){if(void 0!==this._signatures)throw new Error("Attempting to add new output, expecting signatures only");if(!l.isValidPublicFctAddress(t))throw new Error("Output address must be a valid public Factoid address");if(!a.validateNFIds(e))throw new Error("Invalid ID range: "+JSON.stringify(e));if(this._inputs[t])throw new Error("Output address already occurs in inputs");return this._outputs[t]=e,this}},{key:"burnOutput",value:function(t){if(Object.keys(this._outputs).find((function(t){return t===u.COINBASE_ADDRESS_PUBLIC})))throw new Error("Cannot add a duplicate burn output to a burn transaction");return this.output(u.COINBASE_ADDRESS_PUBLIC,t),this}},{key:"sk1",value:function(t){if(!f.isValidSk1(t))throw new Error("You must include a valid SK1 Key to sign a coinbase transaction");return this._sk1=t,this}},{key:"id1",value:function(t){if(void 0!==this._signatures)throw new Error("Attempting to add new ID1 key while expecting coinbase signature only.  Use id1Signature.");return this._id1=a.extractIdentityPublicKey(t),this}},{key:"id1Signature",value:function(t,r){if(void 0===this._id1)throw new Error("Attempting to pass a signature for invalid coinbase transaction.");if(!this._id1.equals(e.from(t,"hex")))throw new Error("ID1 Key is not equal coinbase ID1 Key requiring a signature");return this._signatures=[r],this}},{key:"metadata",value:function(t){if(void 0!==this._signatures)throw new Error("Attempting to add new metadata, expecting signatures only");try{JSON.stringify(t)}catch(t){throw new Error("Transaction metadata bust be a valid JSON object or primitive")}return this._metadata=t,this}},{key:"tokenMetadata",value:function(t){if(void 0!==this._signatures)throw new Error("Attempting to add new token metadata, expecting signatures only");if(!Array.isArray(t))throw new Error("Token metadata must be an array");if(!t.every((function(t){return"object"===(0,i.default)(t)&&2===Object.keys(t).length&&void 0!==t.ids&&void 0!==t.metadata})))throw new Error("Every metadata range representation must have only keys ids(Array) and metadata(JSON stringifiable value)");var e=t.reduce((function(t,e){return t.concat(e.ids)}),[]);if(!a.validateNFIds(e))throw new Error("Invalid token metadata, must not contain any duplicates or overlapping ranges");return this._tokenMetadata=t,this}},{key:"pkSignature",value:function(t,r){var n=e.from(t,"hex"),i=l.keyToPublicFctAddress(n),o=Object.keys(this._inputs).findIndex((function(t){return t===i}));if(void 0===o)throw new Error("Public Key ("+n.toString("hex")+") for provided signature not found in input list.");return this._keys[o].publicKey=n,this._signatures[o]=r,this}},{key:"build",value:function(){if(0===Object.keys(this._inputs).length||0===Object.keys(this._outputs).length)throw new Error("Must have at least one input and one output");if(Object.keys(this._inputs).find((function(t){return t===u.COINBASE_ADDRESS_PUBLIC}))&&!this._sk1&&!this._id1)throw new Error("You must include a valid issuer sk1 key to perform a coinbase transaction");var t=[];Object.values(this._inputs).forEach((function(e){return t=t.concat(a.expandNFIds(e))})),t.sort();var e=[];if(Object.values(this._outputs).forEach((function(t){return e=e.concat(a.expandNFIds(t))})),e.sort(),JSON.stringify(t)!==JSON.stringify(e))throw new Error("Input and output token IDS do not match");if(void 0!==this._tokenMetadata&&!Object.keys(this._inputs).find((function(t){return t===u.COINBASE_ADDRESS_PUBLIC})))throw new Error("You may only specify tokenmetadata for coinbase transactions");if(void 0!==this._signatures)for(var n=0;n<this._signatures.length;++n)if(void 0===this._signatures[n])throw new Error("Missing signatures: All inputs must have an associated signature");return new(r(36))(this)}}]),t}();t.exports=h}).call(this,r(0).Buffer)},function(t,e,r){"use strict";var n=r(2),i=n(r(3)),o=n(r(4)),s=r(12),a=r(12),u=r(9),c=function(){function t(e,r,n){if((0,i.default)(this,t),!a.isValidIdentityChainId(r))throw new Error("You must include a valid issuer identity Chain Id to issue a FAT token");if(this._rootChainId=r,void 0===e||"string"!=typeof e)throw new Error("Token is a required string");if(this._tokenId=e,!s.isValidSk1(n))throw new Error("Supplied key is not a valid sk1 private key");this._sk1=n,this._type="FAT-1"}return(0,o.default)(t,[{key:"symbol",value:function(t){if(!t)throw new Error("Token symbol must be defined");if(!new RegExp("[A-Z ]+").test(t))throw new Error("Token symbol must only contain capital letters A-Z");if(0==t.length||t.length>4)throw new Error("Token symbol must be 1 - 4 characters");return this._symbol=t,this}},{key:"supply",value:function(t){if((t=new u(t)).isEqualTo(0)||t.isLessThan(-1))throw new Error("Supply must be equal to -1(infinite) or greater than 0");return this._supply=t,this}},{key:"metadata",value:function(t){try{JSON.stringify(t)}catch(t){throw new Error("Transaction metadata bust be a valid JSON object or primitive")}return this._metadata=t,this}},{key:"build",value:function(){return void 0===this._supply&&(this._supply=-1),new(r(46))(this)}}]),t}();t.exports=c},function(t,e,r){"use strict";var n=r(2),i=n(r(3)),o=n(r(4)),s=(r(5),r(1).sign),a=r(6),u=(r(12),r(9)),c=(r(17),function(){function t(){(0,i.default)(this,t),this._key={},this._input={address:"",amount:new u(0),type:""},this._transfers=[]}return(0,o.default)(t,[{key:"input",value:function(t,e,r){if(this._input.length>0)throw new Error("Input already specified");var n=r;if(void 0===n&&(n=0),void 0!==this._signature)throw new Error("Attempting to add new input to a previously assembled transaction, expecting signatures only");if(a.isValidPrivateAddress(e)){if(!(n=new u(n)).isInteger()||n.isLessThan(0))throw new Error("Input amount must be a positive nonzero integer");this._key=s.keyPair.fromSeed(a.addressToKey(e)),this._input.address=a.getPublicAddress(e)}else{var i=e;if(!a.isValidPublicFctAddress(i))throw new Error("Input address must be either a valid private Factoid address or a Factoid public address");if(!(n=new u(n)).isInteger()||n.isLessThan(0))throw new Error("Input amount must be a positive nonzero integer");this._key={pubaddr:i,publicKey:void 0},this._input.address=i}return this._input.type=t,this._input.amount=n,this}},{key:"transfer",value:function(t,e){if(void 0!==this._conversion)throw new Error("Conversion already specified");var r=e;if(void 0===r&&(r=0),void 0!==this._signature)throw new Error("Attempting to add new output to previously assembled transaction, expecting signature only");if(!a.isValidPublicFctAddress(t))throw new Error("Output address must be a valid public Factoid address");if(!(r=new u(r)).isInteger()||r.isLessThan(0))throw new Error("Input amount must be a positive nonzero integer");return this._transfers.push({address:t,amount:r}),this}},{key:"conversion",value:function(t){if(this._transfers.length>0)throw new Error("One or more transfer(s) already specified for this transaction");if(void 0!==this._signature)throw new Error("Attempting to add new conversion to previously assembled transaction, expecting signature only");return this._conversion=t,this}},{key:"metadata",value:function(t){if(void 0!==this._signature)throw new Error("Attempting to add new metadata to previously assembled transaction, expecting signatures only");try{JSON.stringify(t)}catch(t){throw new Error("Transaction metadata bust be a valid JSON object or primitive")}return this._metadata=t,this}},{key:"build",value:function(){if(void 0===this._input.address||void 0===this._input.amount||void 0===this._input.type)throw new Error("Input must have an address, type, and amount specified");if(!this._input.amount.isInteger()||this._input.amount.isLessThan(0))throw new Error("Input amount must be a positive nonzero integer");if(void 0===this._conversion&&0===this._transfers.length)throw new Error("Either a conversion or transfer must be specified");if(void 0!==this._conversion){if(this._conversion===this._input.type)throw new Error("Conversion asset cannot be the same as the input asset.");if(""===this._conversion.length)throw new Error("Conversion string must be specified with input")}if(this._transfers.length>0){var t=0,e=new u(0);for(t=0;t<this._transfers.length;++t){if(void 0===this._transfers[t])throw new Error("Malformed transfer entry");if(void 0===this._transfers[t].address)throw new Error("transfer address must be of type string");if(void 0===this._transfers[t].amount)throw new Error("transfer amount must be specified");if(!this._transfers[t].amount.isInteger()||this._transfers[t].amount.isLessThan(0))throw new Error("transfer amount must be a positive nonzero integer");if(this._input.address===this._transfers[t].address)throw new Error("input cannot be the same as the transfer address");e=e.plus(this._transfers[t].amount)}if(!this._input.amount.isEqualTo(e))throw new Error("transfer amount must equal input amount")}return new(r(37))(this)}}]),t}());t.exports=c},function(t,e,r){"use strict";(function(e){var n=r(2),i=n(r(21)),o=n(r(3)),s=n(r(4)),a=r(1).sign,u=r(19),c=u.Entry,l=u.Chain,f=r(17),h=r(5),p=r(11),d=r(7),y=r(9),g=r(14)({strict:!0}),m=r(151),v=function(){function t(r){if((0,o.default)(this,t),r instanceof m){this._type=r._type,this._symbol=r._symbol,this._supply=r._supply,this._precision=r._precision,this._metadata=r._metadata,this._content=g.stringify({type:this._type,symbol:this._symbol,supply:this._supply,precision:this._precision,metadata:this._metadata}),this._tokenId=r._tokenId,this._rootChainId=r._rootChainId,this._tokenChainId=f.getTokenChainId(r._tokenId,r._rootChainId);var n=e.from("0"),s=Math.round((new Date).getTime()/1e3).toString();this._timestamp=s;var u=e.from(s),c=e.from(this._tokenChainId,"hex"),l=e.from(this._content),v=a.keyPair.fromSeed(p.extractSecretFromIdentityKey(r._sk1)),_=e.concat([h.RCD_TYPE_1,e.from(v.publicKey)]),b=a.detached(d.sha512(e.concat([n,u,c,l])),v.secretKey);this._extIds=[u,_,b]}else"object"===(0,i.default)(r)&&(this._type=r.issuance.type,this._symbol=r.issuance.symbol,this._supply=new y(r.issuance.supply),this._precision=r.issuance.precision,this._metadata=r.issuance.metadata,this._tokenId=r.tokenid,this._rootChainId=r.issuerid,this._tokenChainId=f.getTokenChainId(this._tokenId,this._rootChainId),this._entryhash=r.entryhash,this._timestamp=r.timestamp);Object.freeze(this)}return(0,s.default)(t,[{key:"getChainId",value:function(){return this._tokenChainId}},{key:"getTokenId",value:function(){return this._tokenId}},{key:"getIssuerChainId",value:function(){return this._rootChainId}},{key:"getEntryhash",value:function(){return this._entryhash}},{key:"getTimestamp",value:function(){return this._timestamp}},{key:"getType",value:function(){return this._type}},{key:"getSymbol",value:function(){return this._symbol}},{key:"getSupply",value:function(){return this._supply}},{key:"getPrecision",value:function(){return this._precision}},{key:"getMetadata",value:function(){return this._metadata}},{key:"getChain",value:function(){return new l(c.builder().extId(e.from("token")).extId(e.from(this._tokenId)).extId(e.from("issuer")).extId(e.from(this._rootChainId,"hex")).build())}},{key:"getEntry",value:function(){return c.builder().chainId(this._tokenChainId).extIds(this._extIds,"utf8").content(this._content,"utf8").build()}}]),t}();t.exports=v}).call(this,r(0).Buffer)},function(e,r,n){"use strict";var i=n(2),o=i(n(3)),s=i(n(4)),a=(n(5),n(1).sign,n(6),n(12),n(9),n(17),n(37)),u=function(){function e(t){(0,o.default)(this,e),this._tokenChainId="cffce0f409ebba4ed236d49d89c70e4bd1f1367d86402a3363366683265a242d",this._version=1,t instanceof n(47)?(this._transactions=t._transactions,this._signatures=t._signatures,this._timestamp=t._timestamp,this._keys=t.keys):this._transactions=[]}return(0,s.default)(e,[{key:"transaction",value:function(t){return this._transactions.push(t),this}},{key:"pkSignature",value:function(e,r,n){if(t instanceof a){var i=0;if(void 0===this._transactions.find((function(t,r){return t.getInput().address===e.getInput().address&&(i=r,!0)})))throw new Error("Transaction "+e.getInput().address+" not found, so signature cannot be assigned.");this._signatures[i]=n,this._keys[i]=key}return this}},{key:"build",value:function(){if(0===this._transactions.length)throw new Error("No Transactions Specified.");if(void 0!==this._signatures&&this._signatures.length!==this._transactions.length)throw new Error("Expecting the same number of signatures as there are number of transactions");var t=0;for(t=0;t<this._transactions.length;++t){if(void 0===this._transactions[t])throw new Error("Malformed transaction"+t.toString());if(void 0!==this._signatures&&this._signatures[t].find((function(t){return void 0===t})))throw new Error("Expecting signature for transaction index "+t.toString()+". No signature found.")}return new(n(47))(this)}}]),e}();e.exports=u},function(t,e,r){"use strict";t.exports=Object.assign({},r(26),{util:r(17),constant:r(5),FAT0:{TransactionBuilder:r(78),Transaction:r(35),IssuanceBuilder:r(80),Issuance:r(45)},FAT1:{TransactionBuilder:r(81),Transaction:r(36),IssuanceBuilder:r(82),Issuance:r(46)},FAT2:{TransactionBuilder:r(83),Transaction:r(37),TransactionBatchBuilder:r(85),TransactionBatch:r(47)}})},function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,r,n){var i=e&&e.prototype instanceof y?e:y,o=Object.create(i.prototype),s=new C(n||[]);return o._invoke=function(t,e,r){var n=l;return function(i,o){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return T()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=A(s,r);if(a){if(a===d)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=c(t,e,r);if("normal"===u.type){if(n=r.done?p:f,u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(t,r,s),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",d={};function y(){}function g(){}function m(){}var v={};v[o]=function(){return this};var _=Object.getPrototypeOf,b=_&&_(_(I([])));b&&b!==r&&n.call(b,o)&&(v=b);var w=m.prototype=y.prototype=Object.create(v);function E(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function k(t){var e;this._invoke=function(r,i){function o(){return new Promise((function(e,o){!function e(r,i,o,s){var a=c(t[r],t,i);if("throw"!==a.type){var u=a.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,s)}),(function(t){e("throw",t,o,s)})):Promise.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return e("throw",t,o,s)}))}s(a.arg)}(r,i,e,o)}))}return e=e?e.then(o,o):o()}}function A(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function I(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:T}}function T(){return{value:e,done:!0}}return g.prototype=w.constructor=m,m.constructor=g,m[a]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(k.prototype),k.prototype[s]=function(){return this},t.AsyncIterator=k,t.async=function(e,r,n,i){var o=new k(u(e,r,n,i));return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(w),w[a]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){(function(t){var n=r(89),i=r(50),o=r(101),s=r(102),a=r(59),u=e;u.request=function(e,r){e="string"==typeof e?a.parse(e):o(e);var i=-1===t.location.protocol.search(/^https?:$/)?"http:":"",s=e.protocol||i,u=e.hostname||e.host,c=e.port,l=e.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),e.url=(u?s+"//"+u:"")+(c?":"+c:"")+l,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var f=new n(e);return r&&f.on("response",r),f},u.get=function(t,e){var r=u.request(t,e);return r.end(),r},u.ClientRequest=n,u.IncomingMessage=i.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=s,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,r(10))},function(t,e,r){(function(e,n,i){var o=r(49),s=r(15),a=r(50),u=r(51),c=r(100),l=a.IncomingMessage,f=a.readyStates;var h=t.exports=function(t){var r,n=this;u.Writable.call(n),n._opts=t,n._body=[],n._headers={},t.auth&&n.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach((function(e){n.setHeader(e,t.headers[e])}));var i=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!o.abortController)i=!1,r=!0;else if("prefer-streaming"===t.mode)r=!1;else if("allow-wrong-content-type"===t.mode)r=!o.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");r=!0}n._mode=function(t,e){return o.fetch&&e?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&t?"arraybuffer":o.vbArray&&t?"text:vbarray":"text"}(r,i),n._fetchTimer=null,n.on("finish",(function(){n._onFinish()}))};s(h,u.Writable),h.prototype.setHeader=function(t,e){var r=t.toLowerCase();-1===p.indexOf(r)&&(this._headers[r]={name:t,value:e})},h.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},h.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},h.prototype._onFinish=function(){var t=this;if(!t._destroyed){var r=t._opts,s=t._headers,a=null;"GET"!==r.method&&"HEAD"!==r.method&&(a=o.arraybuffer?c(e.concat(t._body)):o.blobConstructor?new n.Blob(t._body.map((function(t){return c(t)})),{type:(s["content-type"]||{}).value||""}):e.concat(t._body).toString());var u=[];if(Object.keys(s).forEach((function(t){var e=s[t].name,r=s[t].value;Array.isArray(r)?r.forEach((function(t){u.push([e,t])})):u.push([e,r])})),"fetch"===t._mode){var l=null;if(o.abortController){var h=new AbortController;l=h.signal,t._fetchAbortController=h,"requestTimeout"in r&&0!==r.requestTimeout&&(t._fetchTimer=n.setTimeout((function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()}),r.requestTimeout))}n.fetch(t._opts.url,{method:t._opts.method,headers:u,body:a||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin",signal:l}).then((function(e){t._fetchResponse=e,t._connect()}),(function(e){n.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)}))}else{var p=t._xhr=new n.XMLHttpRequest;try{p.open(t._opts.method,t._opts.url,!0)}catch(e){return void i.nextTick((function(){t.emit("error",e)}))}"responseType"in p&&(p.responseType=t._mode.split(":")[0]),"withCredentials"in p&&(p.withCredentials=!!r.withCredentials),"text"===t._mode&&"overrideMimeType"in p&&p.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in r&&(p.timeout=r.requestTimeout,p.ontimeout=function(){t.emit("requestTimeout")}),u.forEach((function(t){p.setRequestHeader(t[0],t[1])})),t._response=null,p.onreadystatechange=function(){switch(p.readyState){case f.LOADING:case f.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(p.onprogress=function(){t._onXHRProgress()}),p.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{p.send(a)}catch(e){return void i.nextTick((function(){t.emit("error",e)}))}}}},h.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},h.prototype._connect=function(){var t=this;t._destroyed||(t._response=new l(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",(function(e){t.emit("error",e)})),t.emit("response",t._response))},h.prototype._write=function(t,e,r){this._body.push(t),r()},h.prototype.abort=h.prototype.destroy=function(){this._destroyed=!0,n.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},h.prototype.end=function(t,e,r){"function"==typeof t&&(r=t,t=void 0),u.Writable.prototype.end.call(this,t,e,r)},h.prototype.flushHeaders=function(){},h.prototype.setTimeout=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var p=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,r(0).Buffer,r(10),r(13))},function(t,e,r){"use strict";e.byteLength=function(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=c(t),s=n[0],a=n[1],u=new o(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),l=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===a&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,u[l++]=255&e);1===a&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function l(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){},function(t,e,r){"use strict";var n=r(30).Buffer,i=r(96);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,r,i,o=n.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,r=o,i=a,e.copy(r,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var n,i,o,s,a,u=1,c={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},n=function(t){o.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,n=function(t){var e=f.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):n=function(t){setTimeout(d,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&d(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),n=function(e){t.postMessage(s+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return c[u]=i,n(u),u++},h.clearImmediate=p}function p(t){delete c[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(10),r(13))},function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,r(10))},function(t,e,r){"use strict";t.exports=o;var n=r(58),i=r(23);function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}i.inherits=r(15),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){var n=r(0).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(n.isBuffer(t)){for(var e=new Uint8Array(t.length),r=t.length,i=0;i<r;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t};var r=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,r){(function(t,n){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,c=36,l=1,f=26,h=38,p=700,d=72,y=128,g="-",m=/^xn--/,v=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-l,E=Math.floor,k=String.fromCharCode;function A(t){throw new RangeError(b[t])}function S(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function x(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+S((t=t.replace(_,".")).split("."),e).join(".")}function C(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function I(t){return S(t,(function(t){var e="";return t>65535&&(e+=k((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=k(t)})).join("")}function T(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function R(t,e,r){var n=0;for(t=r?E(t/p):t>>1,t+=E(t/e);t>w*f>>1;n+=c)t=E(t/w);return E(n+(w+1)*t/(t+h))}function O(t){var e,r,n,i,o,s,a,h,p,m,v,_=[],b=t.length,w=0,k=y,S=d;for((r=t.lastIndexOf(g))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&A("not-basic"),_.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<b;){for(o=w,s=1,a=c;i>=b&&A("invalid-input"),((h=(v=t.charCodeAt(i++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:c)>=c||h>E((u-w)/s))&&A("overflow"),w+=h*s,!(h<(p=a<=S?l:a>=S+f?f:a-S));a+=c)s>E(u/(m=c-p))&&A("overflow"),s*=m;S=R(w-o,e=_.length+1,0==o),E(w/e)>u-k&&A("overflow"),k+=E(w/e),w%=e,_.splice(w++,0,k)}return I(_)}function P(t){var e,r,n,i,o,s,a,h,p,m,v,_,b,w,S,x=[];for(_=(t=C(t)).length,e=y,r=0,o=d,s=0;s<_;++s)(v=t[s])<128&&x.push(k(v));for(n=i=x.length,i&&x.push(g);n<_;){for(a=u,s=0;s<_;++s)(v=t[s])>=e&&v<a&&(a=v);for(a-e>E((u-r)/(b=n+1))&&A("overflow"),r+=(a-e)*b,e=a,s=0;s<_;++s)if((v=t[s])<e&&++r>u&&A("overflow"),v==e){for(h=r,p=c;!(h<(m=p<=o?l:p>=o+f?f:p-o));p+=c)S=h-m,w=c-m,x.push(k(T(m+S%w,0))),h=E(S/w);x.push(k(T(h,0))),o=R(r,b,n==i),r=0,++n}++r,++e}return x.join("")}a={version:"1.4.1",ucs2:{decode:C,encode:I},decode:O,encode:P,toASCII:function(t){return x(t,(function(t){return v.test(t)?"xn--"+P(t):t}))},toUnicode:function(t){return x(t,(function(t){return m.test(t)?O(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return a}.call(e,r,e,t))||(t.exports=i)}()}).call(this,r(60)(t),r(10))},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(106),e.encode=e.stringify=r(107)},function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,p,d,y=t[l].replace(a,"%20"),g=y.indexOf(r);g>=0?(f=y.substr(0,g),h=y.substr(g+1)):(f=y,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),n(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(n(s))+r;return i(t[s])?o(t[s],(function(t){return a+encodeURIComponent(n(t))})).join(e):a+encodeURIComponent(n(t[s]))})).join(e):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){"use strict";var n=r(8),i=r(62),o=r(110),s=r(68);function a(t){var e=new o(t),r=i(o.prototype.request,e);return n.extend(r,o.prototype,e),n.extend(r,e),r}var u=a(r(65));u.Axios=o,u.create=function(t){return a(s(u.defaults,t))},u.Cancel=r(69),u.CancelToken=r(122),u.isCancel=r(64),u.all=function(t){return Promise.all(t)},u.spread=r(123),t.exports=u,t.exports.default=u},function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,r){"use strict";var n=r(8),i=r(63),o=r(111),s=r(112),a=r(68);function u(t){this.defaults=t,this.interceptors={request:new o,response:new o}}u.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var e=[s,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)r=r.then(e.shift(),e.shift());return r},u.prototype.getUri=function(t){return t=a(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,r){return this.request(n.merge(r||{},{method:t,url:e}))}})),n.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,r,i){return this.request(n.merge(i||{},{method:t,url:e,data:r}))}})),t.exports=u},function(t,e,r){"use strict";var n=r(8);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){n.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},function(t,e,r){"use strict";var n=r(8),i=r(113),o=r(64),s=r(65),a=r(120),u=r(121);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!a(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return c(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(c(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,r){"use strict";var n=r(8);t.exports=function(t,e,r){return n.forEach(r,(function(r){t=r(t,e)})),t}},function(t,e,r){"use strict";var n=r(8);t.exports=function(t,e){n.forEach(t,(function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])}))}},function(t,e,r){"use strict";var n=r(67);t.exports=function(t,e,r){var i=r.config.validateStatus;!i||i(r.status)?t(r):e(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,r){"use strict";var n=r(8),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,o,s={};return t?(n.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=n.trim(t.substr(0,o)).toLowerCase(),r=n.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([r]):s[e]?s[e]+", "+r:r}})),s):s}},function(t,e,r){"use strict";var n=r(8);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=i(window.location.href),function(e){var r=n.isString(e)?i(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";var n=r(8);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,r,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var n=r(69);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;t((function(t){r.reason||(r.reason=new n(t),e(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){var n=r(70),i=t.exports;!function(){"use strict";var t,e,r,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(t){return o.lastIndex=0,o.test(t)?'"'+t.replace(o,(function(t){var e=s[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}"function"!=typeof i.stringify&&(i.stringify=function(i,o,s){var u;if(t="",e="","number"==typeof s)for(u=0;u<s;u+=1)e+=" ";else"string"==typeof s&&(e=s);if(r=o,o&&"function"!=typeof o&&("object"!=typeof o||"number"!=typeof o.length))throw new Error("JSON.stringify");return function i(o,s){var u,c,l,f,h,p=t,d=s[o],y=null!=d&&(d instanceof n||n.isBigNumber(d));switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(o)),"function"==typeof r&&(d=r.call(s,o,d)),typeof d){case"string":return y?d:a(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(t+=e,h=[],"[object Array]"===Object.prototype.toString.apply(d)){for(f=d.length,u=0;u<f;u+=1)h[u]=i(u,d)||"null";return l=0===h.length?"[]":t?"[\n"+t+h.join(",\n"+t)+"\n"+p+"]":"["+h.join(",")+"]",t=p,l}if(r&&"object"==typeof r)for(f=r.length,u=0;u<f;u+=1)"string"==typeof r[u]&&(l=i(c=r[u],d))&&h.push(a(c)+(t?": ":":")+l);else Object.keys(d).forEach((function(e){var r=i(e,d);r&&h.push(a(e)+(t?": ":":")+r)}));return l=0===h.length?"{}":t?"{\n"+t+h.join(",\n"+t)+"\n"+p+"}":"{"+h.join(",")+"}",t=p,l}}("",{"":i})})}()},function(t,e,r){var n=null;t.exports=function(t){"use strict";var e={strict:!1,storeAsString:!1};null!=t&&(!0===t.strict&&(e.strict=!0),!0===t.storeAsString&&(e.storeAsString=!0));var i,o,s,a,u={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},c=function(t){throw{name:"SyntaxError",message:t,at:i,text:s}},l=function(t){return t&&t!==o&&c("Expected '"+t+"' instead of '"+o+"'"),o=s.charAt(i),i+=1,o},f=function(){var t,i="";for("-"===o&&(i="-",l("-"));o>="0"&&o<="9";)i+=o,l();if("."===o)for(i+=".";l()&&o>="0"&&o<="9";)i+=o;if("e"===o||"E"===o)for(i+=o,l(),"-"!==o&&"+"!==o||(i+=o,l());o>="0"&&o<="9";)i+=o,l();if(t=+i,isFinite(t))return null==n&&(n=r(70)),i.length>15?!0===e.storeAsString?i:new n(i):t;c("Bad number")},h=function(){var t,e,r,n="";if('"'===o)for(;l();){if('"'===o)return l(),n;if("\\"===o)if(l(),"u"===o){for(r=0,e=0;e<4&&(t=parseInt(l(),16),isFinite(t));e+=1)r=16*r+t;n+=String.fromCharCode(r)}else{if("string"!=typeof u[o])break;n+=u[o]}else n+=o}c("Bad string")},p=function(){for(;o&&o<=" ";)l()};return a=function(){switch(p(),o){case"{":return function(){var t,r={};if("{"===o){if(l("{"),p(),"}"===o)return l("}"),r;for(;o;){if(t=h(),p(),l(":"),!0===e.strict&&Object.hasOwnProperty.call(r,t)&&c('Duplicate key "'+t+'"'),r[t]=a(),p(),"}"===o)return l("}"),r;l(","),p()}}c("Bad object")}();case"[":return function(){var t=[];if("["===o){if(l("["),p(),"]"===o)return l("]"),t;for(;o;){if(t.push(a()),p(),"]"===o)return l("]"),t;l(","),p()}}c("Bad array")}();case'"':return h();case"-":return f();default:return o>="0"&&o<="9"?f():function(){switch(o){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}c("Unexpected '"+o+"'")}()}},function(t,e){var r;return s=t+"",i=0,o=" ",r=a(),p(),o&&c("Syntax error"),"function"==typeof e?function t(r,n){var i,o=r[n];return o&&"object"==typeof o&&Object.keys(o).forEach((function(e){void 0!==(i=t(o,e))?o[e]=i:delete o[e]})),e.call(r,n,o)}({"":r},""):r}}},function(t,e,r){(function(e){const n=r(16),i=r(1),{RCD_TYPE_1:o,secretToPublicKey:s,sha256d:a}=r(128),{FACTOID_PUBLIC_PREFIX:u,FACTOID_PRIVATE_PREFIX:c,ENTRYCREDIT_PUBLIC_PREFIX:l,ENTRYCREDIT_PRIVATE_PREFIX:f,VALID_PREFIXES:h,PUBLIC_ADDRESS_VALID_PREFIXES:p,PRIVATE_ADDRESS_VALID_PREFIXES:d,EC_ADDRESS_VALID_PREFIXES:y,FCT_ADDRESS_VALID_PREFIXES:g}=r(130);function m(t){try{if(!h.has(t.slice(0,2)))return!1;const r=e.from(n.decode(t));return 38===r.length&&!!a(r.slice(0,34)).slice(0,4).equals(r.slice(34,38))}catch(t){return!1}}function v(t){return m(t)&&"FA"===t.substring(0,2)}function _(t){return k(t,u,!0)}function b(t){return k(t,c)}function w(t){return k(t,l)}function E(t){return k(t,f)}function k(t,r,i){const o=e.from(t,"hex");if(32!==o.length)throw new Error(`Key ${o} is not 32 bytes long.`);const s=e.concat([r,i?A(o):o]),u=a(s).slice(0,4);return n.encode(e.concat([s,u]))}function A(t){return a(e.concat([o,t]))}t.exports={isValidAddress:m,addressToKey:function(t){if(!m(t))throw new Error(`Invalid address ${t}.`);if(t.startsWith("FA"))throw new Error("A public Factoid address does not hold a public key but a RCD hash. Use addressToRcdHash function instead.");return e.from(n.decode(t).slice(2,34))},addressToRcdHash:function(t){if(!v(t))throw new Error(`Address ${t} is not a valid public Factoid address`);return e.from(n.decode(t).slice(2,34))},isValidPublicAddress:function(t){return m(t)&&p.has(t.substring(0,2))},isValidPrivateAddress:function(t){return m(t)&&d.has(t.substring(0,2))},isValidEcAddress:function(t){return m(t)&&y.has(t.substring(0,2))},isValidPublicEcAddress:function(t){return m(t)&&"EC"===t.substring(0,2)},isValidPrivateEcAddress:function(t){return m(t)&&"Es"===t.substring(0,2)},isValidFctAddress:function(t){return m(t)&&g.has(t.substring(0,2))},isValidPublicFctAddress:v,isValidPrivateFctAddress:function(t){return m(t)&&"Fs"===t.substring(0,2)},getPublicAddress:function(t){if(!m(t))throw new Error(`Invalid address ${t}.`);if("s"!==t[1])return t;const e=n.decode(t).slice(2,34),r=s(e);return"F"===t[0]?_(r):w(r)},keyToPublicFctAddress:_,rcdHashToPublicFctAddress:function(t){return k(t,u)},seedToPrivateFctAddress:b,keyToPublicEcAddress:w,seedToPrivateEcAddress:E,generateRandomFctAddress:function(){const t=i.randomBytes(32);return{public:_(i.sign.keyPair.fromSeed(t).publicKey),private:b(t)}},generateRandomEcAddress:function(){const t=i.randomBytes(32);return{public:w(i.sign.keyPair.fromSeed(t).publicKey),private:E(t)}}}}).call(this,r(0).Buffer)},function(t,e){},function(t,e,r){(function(e){const n=r(1).sign,i=r(73),o=r(31),s=r(75),a=e.from("01","hex"),u=i.fromString("8000000000000000",!0,16);t.exports={RCD_TYPE_1:a,sha256:function(t){return e.from(o().update(t).digest())},sha512:function(t){return e.from(s().update(t).digest())},sha256d:function(t){return e.from(o().update(o().update(t).digest()).digest())},toHex:function(t){return e.isBuffer(t)?t.toString("hex"):t},encodeVarInt:function(t){const r=[];0!==t&&"0"!==t||r.push(0);let n=i.fromValue(t,!0),o=!1;n.and(u).isZero()||(r.push(129),o=!0);for(let t=0;t<9;++t){let e=n.shiftRightUnsigned(56).toNumber();(e||o)&&(o=!0,8!==t?e|=128:e&=127,r.push(e)),n=n.shiftLeft(7)}return e.from(r)},isIterable:function(t){return null!=t&&"function"==typeof t[Symbol.iterator]},flatMap:(t,e)=>[].concat(...t.map(e)),secretToPublicKey:function(t){const r=n.keyPair.fromSeed(t);return e.from(r.publicKey)}}}).call(this,r(0).Buffer)},function(t,e,r){"use strict";var n=r(32).rotr32;function i(t,e,r){return t&e^~t&r}function o(t,e,r){return t&e^t&r^e&r}function s(t,e,r){return t^e^r}e.ft_1=function(t,e,r,n){return 0===t?i(e,r,n):1===t||3===t?s(e,r,n):2===t?o(e,r,n):void 0},e.ch32=i,e.maj32=o,e.p32=s,e.s0_256=function(t){return n(t,2)^n(t,13)^n(t,22)},e.s1_256=function(t){return n(t,6)^n(t,11)^n(t,25)},e.g0_256=function(t){return n(t,7)^n(t,18)^t>>>3},e.g1_256=function(t){return n(t,17)^n(t,19)^t>>>10}},function(t,e,r){(function(e){const r="000000000000000000000000000000000000000000000000000000000000000a",n=new Map([[1,"DIRECTORY_BLOCK_SIGNATURE"],[2,"REVEAL_MATRYOSHKA_HASH"],[3,"ADD_REPLACE_MATRYOSHKA_HASH"],[4,"INCREASE_SERVER_COUNT"],[5,"ADD_FEDERATED_SERVER"],[6,"ADD_AUDIT_SERVER"],[7,"REMOVE_FEDERATED_SERVER"],[8,"ADD_FEDERATED_SERVER_SIGNING_KEY"],[9,"ADD_FEDERATED_SERVER_BITCOIN_ANCHOR_KEY"],[10,"SERVER_FAULT_HANDOFF"],[11,"COINBASE_DESCRIPTOR"],[12,"COINBASE_DESCRIPTOR_CANCEL"],[13,"ADD_AUTHORITY_FACTOID_ADDRESS"],[14,"ADD_AUTHORITY_EFFICIENCY"]]);t.exports={MAX_TRANSACTION_SIZE:10240,MAX_ENTRY_PAYLOAD_SIZE:10240,MAX_ENTRY_SIZE:10275,CHAIN_CREATION_COST:10,NULL_HASH:"0000000000000000000000000000000000000000000000000000000000000000",ADMIN_BLOCKS_CHAIN_ID:r,ENTRY_CREDIT_BLOCKS_CHAIN_ID:"000000000000000000000000000000000000000000000000000000000000000c",FACTOID_BLOCKS_CHAIN_ID:"000000000000000000000000000000000000000000000000000000000000000f",RESERVED_CHAIN_IDS:new Set([r,"000000000000000000000000000000000000000000000000000000000000000c","000000000000000000000000000000000000000000000000000000000000000f"]),VALID_PREFIXES:new Set(["Fs","FA","EC","Es"]),PUBLIC_ADDRESS_VALID_PREFIXES:new Set(["FA","EC"]),PRIVATE_ADDRESS_VALID_PREFIXES:new Set(["Fs","Es"]),EC_ADDRESS_VALID_PREFIXES:new Set(["EC","Es"]),FCT_ADDRESS_VALID_PREFIXES:new Set(["FA","Fs"]),FACTOID_PUBLIC_PREFIX:e.from("5fb1","hex"),FACTOID_PRIVATE_PREFIX:e.from("6478","hex"),ENTRYCREDIT_PUBLIC_PREFIX:e.from("592a","hex"),ENTRYCREDIT_PRIVATE_PREFIX:e.from("5db6","hex"),ADMIN_ID_TO_CODE:n}}).call(this,r(0).Buffer)},function(t,e,r){(function(e){const n=r(16),i=r(1),o=i.sign,{sha256d:s}=r(76),a=e.from("0345ef9de0","hex"),u=e.from("0345f3d0d6","hex"),c=new Set(["idpub","idsec"]);function l(t){try{if("string"!=typeof t)return!1;if(!c.has(t.slice(0,5)))return!1;const r=e.from(n.decode(t));return 41===r.length&&!!s(r.slice(0,37)).slice(0,4).equals(r.slice(37,41))}catch(t){return!1}}function f(t){return l(t)&&t.startsWith("idpub")}function h(t){return l(t)&&t.startsWith("idsec")}function p(t){if(!l(t))throw new Error(`Invalid identity key ${t}.`);return e.from(n.decode(t).slice(5,37))}function d(t){return g(t,a)}function y(t){return g(t,u)}function g(t,r){const i=e.from(t,"hex");if(32!==i.length)throw new Error("Key/seed must be 32 bytes long.");const o=e.concat([r,i]),a=s(o).slice(0,4);return n.encode(e.concat([o,a]))}t.exports={isValidIdentityKey:l,isValidPublicIdentityKey:f,isValidSecretIdentityKey:h,extractCryptoMaterial:p,getPublicIdentityKey:function(t){if(f(t))return t;if(h(t)){const e=p(t);return d(o.keyPair.fromSeed(e).publicKey)}throw new Error(`Invalid identity key: ${t}`)},keyToPublicIdentityKey:d,seedToSecretIdentityKey:y,generateRandomIdentityKeyPair:function(){const t=i.randomBytes(32);return{public:d(o.keyPair.fromSeed(t).publicKey),secret:y(t)}}}}).call(this,r(0).Buffer)},function(t,e,r){(function(e){const n=r(16),{sha256d:i}=r(76),{SERVER_IDENTITY_KEY_HEX_PREFIX_MAP:o,SERVER_IDENTITY_KEY_PREFIXES:s}=r(133);function a(t,r){if("string"!=typeof t)return!1;const a=function(t){if(t){if("string"==typeof t)return new Set([t]);if(Array.isArray(t))return new Set(t);throw new Error("Invalid prefixes")}return s}(r);let u;if(a.has(t.slice(0,3)))u=e.from(n.decode(t));else{if(!new Set([...a].map(t=>o[t])).has(t.slice(0,6)))return!1;u=e.from(t,"hex")}if(39!==u.length)return!1;return!!i(u.slice(0,35)).slice(0,4).equals(u.slice(35,39))}t.exports={isValidSk1:function(t){return a(t,"sk1")},isValidSk2:function(t){return a(t,"sk2")},isValidSk3:function(t){return a(t,"sk3")},isValidSk4:function(t){return a(t,"sk4")},isValidIdentityKey:a,isValidServerIdentityChainId:function(t){return"string"==typeof t&&64===t.length&&t.startsWith("888888")}}}).call(this,r(0).Buffer)},function(t,e,r){(function(e){const r=e.alloc(1),n=new Set(["sk1","sk2","sk3","sk4","id1","id2","id3","id4"]);t.exports={VERSION_0:r,SERVER_IDENTITY_KEY_HEX_PREFIX_MAP:{sk1:"4db6c9",sk2:"4db6e7",sk3:"4db705",sk4:"4db723",id1:"3fbeba",id2:"3fbed8",id3:"3fbef6",id4:"3fbf14"},SERVER_IDENTITY_KEY_PREFIXES:n}}).call(this,r(0).Buffer)},function(t,e,r){"use strict";var n=r(135);t.exports.getVersionCompatibility=function(t){var e=[];return t||e.push({severity:"FATAL",message:"Connected daemon is not fatd or is a deprecated version for this library"}),t.includes("!")&&e.push({severity:"WARN",message:"You are using a version of fatd with unofficial local code changes. Unexpected or inconsistent behavior may occur"}),t=n.coerce(t),n.lt(t,"0.4.2")&&e.push({severity:"WARN",message:"You are using a version of fatd ("+t.version+") with known RPC bugs. Unexpected or inconsistent behavior may occur"}),n.lte(t.toString(),"0.5.0")&&e.push({severity:"WARN",message:"You are using a version of fatd ("+t.version+") with known RPC bugs in the get-issuance method. Invalid entryhashes for issuances are returned from the API. Please upgrade fatd to version 0.5.1 or later"}),n.lt(t,"0.6.0")&&e.push({severity:"WARN",message:"You are using a version of fatd ("+t.version+") that does not support the get-balances method yet. Calling the method will result in an error"}),n.gt(t,"0.6.0")&&e.push({severity:"WARN",message:"You are using a newer version of fatd ("+t.version+") than this fat-js version was tested with. Some data structures and API behavior may not be forwards compatible"}),e}},function(t,e,r){(function(r){var n;e=t.exports=p,n="object"==typeof r&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var i=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,s=e.re=[],a=e.src=[],u=e.tokens={},c=0;function l(t){u[t]=c++}l("NUMERICIDENTIFIER"),a[u.NUMERICIDENTIFIER]="0|[1-9]\\d*",l("NUMERICIDENTIFIERLOOSE"),a[u.NUMERICIDENTIFIERLOOSE]="[0-9]+",l("NONNUMERICIDENTIFIER"),a[u.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",l("MAINVERSION"),a[u.MAINVERSION]="("+a[u.NUMERICIDENTIFIER]+")\\.("+a[u.NUMERICIDENTIFIER]+")\\.("+a[u.NUMERICIDENTIFIER]+")",l("MAINVERSIONLOOSE"),a[u.MAINVERSIONLOOSE]="("+a[u.NUMERICIDENTIFIERLOOSE]+")\\.("+a[u.NUMERICIDENTIFIERLOOSE]+")\\.("+a[u.NUMERICIDENTIFIERLOOSE]+")",l("PRERELEASEIDENTIFIER"),a[u.PRERELEASEIDENTIFIER]="(?:"+a[u.NUMERICIDENTIFIER]+"|"+a[u.NONNUMERICIDENTIFIER]+")",l("PRERELEASEIDENTIFIERLOOSE"),a[u.PRERELEASEIDENTIFIERLOOSE]="(?:"+a[u.NUMERICIDENTIFIERLOOSE]+"|"+a[u.NONNUMERICIDENTIFIER]+")",l("PRERELEASE"),a[u.PRERELEASE]="(?:-("+a[u.PRERELEASEIDENTIFIER]+"(?:\\."+a[u.PRERELEASEIDENTIFIER]+")*))",l("PRERELEASELOOSE"),a[u.PRERELEASELOOSE]="(?:-?("+a[u.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+a[u.PRERELEASEIDENTIFIERLOOSE]+")*))",l("BUILDIDENTIFIER"),a[u.BUILDIDENTIFIER]="[0-9A-Za-z-]+",l("BUILD"),a[u.BUILD]="(?:\\+("+a[u.BUILDIDENTIFIER]+"(?:\\."+a[u.BUILDIDENTIFIER]+")*))",l("FULL"),l("FULLPLAIN"),a[u.FULLPLAIN]="v?"+a[u.MAINVERSION]+a[u.PRERELEASE]+"?"+a[u.BUILD]+"?",a[u.FULL]="^"+a[u.FULLPLAIN]+"$",l("LOOSEPLAIN"),a[u.LOOSEPLAIN]="[v=\\s]*"+a[u.MAINVERSIONLOOSE]+a[u.PRERELEASELOOSE]+"?"+a[u.BUILD]+"?",l("LOOSE"),a[u.LOOSE]="^"+a[u.LOOSEPLAIN]+"$",l("GTLT"),a[u.GTLT]="((?:<|>)?=?)",l("XRANGEIDENTIFIERLOOSE"),a[u.XRANGEIDENTIFIERLOOSE]=a[u.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",l("XRANGEIDENTIFIER"),a[u.XRANGEIDENTIFIER]=a[u.NUMERICIDENTIFIER]+"|x|X|\\*",l("XRANGEPLAIN"),a[u.XRANGEPLAIN]="[v=\\s]*("+a[u.XRANGEIDENTIFIER]+")(?:\\.("+a[u.XRANGEIDENTIFIER]+")(?:\\.("+a[u.XRANGEIDENTIFIER]+")(?:"+a[u.PRERELEASE]+")?"+a[u.BUILD]+"?)?)?",l("XRANGEPLAINLOOSE"),a[u.XRANGEPLAINLOOSE]="[v=\\s]*("+a[u.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+a[u.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+a[u.XRANGEIDENTIFIERLOOSE]+")(?:"+a[u.PRERELEASELOOSE]+")?"+a[u.BUILD]+"?)?)?",l("XRANGE"),a[u.XRANGE]="^"+a[u.GTLT]+"\\s*"+a[u.XRANGEPLAIN]+"$",l("XRANGELOOSE"),a[u.XRANGELOOSE]="^"+a[u.GTLT]+"\\s*"+a[u.XRANGEPLAINLOOSE]+"$",l("COERCE"),a[u.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",l("COERCERTL"),s[u.COERCERTL]=new RegExp(a[u.COERCE],"g"),l("LONETILDE"),a[u.LONETILDE]="(?:~>?)",l("TILDETRIM"),a[u.TILDETRIM]="(\\s*)"+a[u.LONETILDE]+"\\s+",s[u.TILDETRIM]=new RegExp(a[u.TILDETRIM],"g");l("TILDE"),a[u.TILDE]="^"+a[u.LONETILDE]+a[u.XRANGEPLAIN]+"$",l("TILDELOOSE"),a[u.TILDELOOSE]="^"+a[u.LONETILDE]+a[u.XRANGEPLAINLOOSE]+"$",l("LONECARET"),a[u.LONECARET]="(?:\\^)",l("CARETTRIM"),a[u.CARETTRIM]="(\\s*)"+a[u.LONECARET]+"\\s+",s[u.CARETTRIM]=new RegExp(a[u.CARETTRIM],"g");l("CARET"),a[u.CARET]="^"+a[u.LONECARET]+a[u.XRANGEPLAIN]+"$",l("CARETLOOSE"),a[u.CARETLOOSE]="^"+a[u.LONECARET]+a[u.XRANGEPLAINLOOSE]+"$",l("COMPARATORLOOSE"),a[u.COMPARATORLOOSE]="^"+a[u.GTLT]+"\\s*("+a[u.LOOSEPLAIN]+")$|^$",l("COMPARATOR"),a[u.COMPARATOR]="^"+a[u.GTLT]+"\\s*("+a[u.FULLPLAIN]+")$|^$",l("COMPARATORTRIM"),a[u.COMPARATORTRIM]="(\\s*)"+a[u.GTLT]+"\\s*("+a[u.LOOSEPLAIN]+"|"+a[u.XRANGEPLAIN]+")",s[u.COMPARATORTRIM]=new RegExp(a[u.COMPARATORTRIM],"g");l("HYPHENRANGE"),a[u.HYPHENRANGE]="^\\s*("+a[u.XRANGEPLAIN]+")\\s+-\\s+("+a[u.XRANGEPLAIN]+")\\s*$",l("HYPHENRANGELOOSE"),a[u.HYPHENRANGELOOSE]="^\\s*("+a[u.XRANGEPLAINLOOSE]+")\\s+-\\s+("+a[u.XRANGEPLAINLOOSE]+")\\s*$",l("STAR"),a[u.STAR]="(<|>)?=?\\s*\\*";for(var f=0;f<c;f++)n(f,a[f]),s[f]||(s[f]=new RegExp(a[f]));function h(t,e){if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof p)return t;if("string"!=typeof t)return null;if(t.length>i)return null;if(!(e.loose?s[u.LOOSE]:s[u.FULL]).test(t))return null;try{return new p(t,e)}catch(t){return null}}function p(t,e){if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof p){if(t.loose===e.loose)return t;t=t.version}else if("string"!=typeof t)throw new TypeError("Invalid Version: "+t);if(t.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof p))return new p(t,e);n("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?s[u.LOOSE]:s[u.FULL]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((function(t){if(/^[0-9]+$/.test(t)){var e=+t;if(e>=0&&e<o)return e}return t})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}e.parse=h,e.valid=function(t,e){var r=h(t,e);return r?r.version:null},e.clean=function(t,e){var r=h(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},e.SemVer=p,p.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},p.prototype.toString=function(){return this.version},p.prototype.compare=function(t){return n("SemVer.compare",this.version,this.options,t),t instanceof p||(t=new p(t,this.options)),this.compareMain(t)||this.comparePre(t)},p.prototype.compareMain=function(t){return t instanceof p||(t=new p(t,this.options)),y(this.major,t.major)||y(this.minor,t.minor)||y(this.patch,t.patch)},p.prototype.comparePre=function(t){if(t instanceof p||(t=new p(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],i=t.prerelease[e];if(n("prerelease compare",e,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return y(r,i)}while(++e)},p.prototype.compareBuild=function(t){t instanceof p||(t=new p(t,this.options));var e=0;do{var r=this.build[e],i=t.build[e];if(n("prerelease compare",e,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return y(r,i)}while(++e)},p.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this},e.inc=function(t,e,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new p(t,r).inc(e,n).version}catch(t){return null}},e.diff=function(t,e){if(_(t,e))return null;var r=h(t),n=h(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return i+s;return o},e.compareIdentifiers=y;var d=/^[0-9]+$/;function y(t,e){var r=d.test(t),n=d.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}function g(t,e,r){return new p(t,r).compare(new p(e,r))}function m(t,e,r){return g(t,e,r)>0}function v(t,e,r){return g(t,e,r)<0}function _(t,e,r){return 0===g(t,e,r)}function b(t,e,r){return 0!==g(t,e,r)}function w(t,e,r){return g(t,e,r)>=0}function E(t,e,r){return g(t,e,r)<=0}function k(t,e,r,n){switch(e){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof r&&(r=r.version),t===r;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof r&&(r=r.version),t!==r;case"":case"=":case"==":return _(t,r,n);case"!=":return b(t,r,n);case">":return m(t,r,n);case">=":return w(t,r,n);case"<":return v(t,r,n);case"<=":return E(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}function A(t,e){if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof A){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof A))return new A(t,e);n("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===S?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}e.rcompareIdentifiers=function(t,e){return y(e,t)},e.major=function(t,e){return new p(t,e).major},e.minor=function(t,e){return new p(t,e).minor},e.patch=function(t,e){return new p(t,e).patch},e.compare=g,e.compareLoose=function(t,e){return g(t,e,!0)},e.compareBuild=function(t,e,r){var n=new p(t,r),i=new p(e,r);return n.compare(i)||n.compareBuild(i)},e.rcompare=function(t,e,r){return g(e,t,r)},e.sort=function(t,r){return t.sort((function(t,n){return e.compareBuild(t,n,r)}))},e.rsort=function(t,r){return t.sort((function(t,n){return e.compareBuild(n,t,r)}))},e.gt=m,e.lt=v,e.eq=_,e.neq=b,e.gte=w,e.lte=E,e.cmp=k,e.Comparator=A;var S={};function x(t,e){if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof x)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new x(t.raw,e);if(t instanceof A)return new x(t.value,e);if(!(this instanceof x))return new x(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map((function(t){return this.parseRange(t.trim())}),this).filter((function(t){return t.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}function C(t,e){for(var r=!0,n=t.slice(),i=n.pop();r&&n.length;)r=n.every((function(t){return i.intersects(t,e)})),i=n.pop();return r}function I(t){return!t||"x"===t.toLowerCase()||"*"===t}function T(t,e,r,n,i,o,s,a,u,c,l,f,h){return((e=I(r)?"":I(n)?">="+r+".0.0":I(i)?">="+r+"."+n+".0":">="+e)+" "+(a=I(u)?"":I(c)?"<"+(+u+1)+".0.0":I(l)?"<"+u+"."+(+c+1)+".0":f?"<="+u+"."+c+"."+l+"-"+f:"<="+a)).trim()}function R(t,e,r){for(var i=0;i<t.length;i++)if(!t[i].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(i=0;i<t.length;i++)if(n(t[i].semver),t[i].semver!==S&&t[i].semver.prerelease.length>0){var o=t[i].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}function O(t,e,r){try{e=new x(e,r)}catch(t){return!1}return e.test(t)}function P(t,e,r,n){var i,o,s,a,u;switch(t=new p(t,n),e=new x(e,n),r){case">":i=m,o=E,s=v,a=">",u=">=";break;case"<":i=v,o=w,s=m,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(O(t,e,n))return!1;for(var c=0;c<e.set.length;++c){var l=e.set[c],f=null,h=null;if(l.forEach((function(t){t.semver===S&&(t=new A(">=0.0.0")),f=f||t,h=h||t,i(t.semver,f.semver,n)?f=t:s(t.semver,h.semver,n)&&(h=t)})),f.operator===a||f.operator===u)return!1;if((!h.operator||h.operator===a)&&o(t,h.semver))return!1;if(h.operator===u&&s(t,h.semver))return!1}return!0}A.prototype.parse=function(t){var e=this.options.loose?s[u.COMPARATORLOOSE]:s[u.COMPARATOR],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new p(r[2],this.options.loose):this.semver=S},A.prototype.toString=function(){return this.value},A.prototype.test=function(t){if(n("Comparator.test",t,this.options.loose),this.semver===S||t===S)return!0;if("string"==typeof t)try{t=new p(t,this.options)}catch(t){return!1}return k(t,this.operator,this.semver,this.options)},A.prototype.intersects=function(t,e){if(!(t instanceof A))throw new TypeError("a Comparator is required");var r;if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),""===this.operator)return""===this.value||(r=new x(t.value,e),O(this.value,r,e));if(""===t.operator)return""===t.value||(r=new x(this.value,e),O(t.semver,r,e));var n=!(">="!==this.operator&&">"!==this.operator||">="!==t.operator&&">"!==t.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==t.operator&&"<"!==t.operator),o=this.semver.version===t.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==t.operator&&"<="!==t.operator),a=k(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),u=k(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return n||i||o&&s||a||u},e.Range=x,x.prototype.format=function(){return this.range=this.set.map((function(t){return t.join(" ").trim()})).join("||").trim(),this.range},x.prototype.toString=function(){return this.range},x.prototype.parseRange=function(t){var e=this.options.loose;t=t.trim();var r=e?s[u.HYPHENRANGELOOSE]:s[u.HYPHENRANGE];t=t.replace(r,T),n("hyphen replace",t),t=t.replace(s[u.COMPARATORTRIM],"$1$2$3"),n("comparator trim",t,s[u.COMPARATORTRIM]),t=(t=(t=t.replace(s[u.TILDETRIM],"$1~")).replace(s[u.CARETTRIM],"$1^")).split(/\s+/).join(" ");var i=e?s[u.COMPARATORLOOSE]:s[u.COMPARATOR],o=t.split(" ").map((function(t){return function(t,e){return n("comp",t,e),t=function(t,e){return t.trim().split(/\s+/).map((function(t){return function(t,e){n("caret",t,e);var r=e.loose?s[u.CARETLOOSE]:s[u.CARET];return t.replace(r,(function(e,r,i,o,s){var a;return n("caret",t,e,r,i,o,s),I(r)?a="":I(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":I(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(t,e)})).join(" ")}(t,e),n("caret",t),t=function(t,e){return t.trim().split(/\s+/).map((function(t){return function(t,e){var r=e.loose?s[u.TILDELOOSE]:s[u.TILDE];return t.replace(r,(function(e,r,i,o,s){var a;return n("tilde",t,e,r,i,o,s),I(r)?a="":I(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":I(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(t,e)})).join(" ")}(t,e),n("tildes",t),t=function(t,e){return n("replaceXRanges",t,e),t.split(/\s+/).map((function(t){return function(t,e){t=t.trim();var r=e.loose?s[u.XRANGELOOSE]:s[u.XRANGE];return t.replace(r,(function(r,i,o,s,a,u){n("xRange",t,r,i,o,s,a,u);var c=I(o),l=c||I(s),f=l||I(a),h=f;return"="===i&&h&&(i=""),u=e.includePrerelease?"-0":"",c?r=">"===i||"<"===i?"<0.0.0-0":"*":i&&h?(l&&(s=0),a=0,">"===i?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===i&&(i="<",l?o=+o+1:s=+s+1),r=i+o+"."+s+"."+a+u):l?r=">="+o+".0.0"+u+" <"+(+o+1)+".0.0"+u:f&&(r=">="+o+"."+s+".0"+u+" <"+o+"."+(+s+1)+".0"+u),n("xRange return",r),r}))}(t,e)})).join(" ")}(t,e),n("xrange",t),t=function(t,e){return n("replaceStars",t,e),t.trim().replace(s[u.STAR],"")}(t,e),n("stars",t),t}(t,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(t){return!!t.match(i)}))),o=o.map((function(t){return new A(t,this.options)}),this)},x.prototype.intersects=function(t,e){if(!(t instanceof x))throw new TypeError("a Range is required");return this.set.some((function(r){return C(r,e)&&t.set.some((function(t){return C(t,e)&&r.every((function(r){return t.every((function(t){return r.intersects(t,e)}))}))}))}))},e.toComparators=function(t,e){return new x(t,e).set.map((function(t){return t.map((function(t){return t.value})).join(" ").trim().split(" ")}))},x.prototype.test=function(t){if(!t)return!1;if("string"==typeof t)try{t=new p(t,this.options)}catch(t){return!1}for(var e=0;e<this.set.length;e++)if(R(this.set[e],t,this.options))return!0;return!1},e.satisfies=O,e.maxSatisfying=function(t,e,r){var n=null,i=null;try{var o=new x(e,r)}catch(t){return null}return t.forEach((function(t){o.test(t)&&(n&&-1!==i.compare(t)||(i=new p(n=t,r)))})),n},e.minSatisfying=function(t,e,r){var n=null,i=null;try{var o=new x(e,r)}catch(t){return null}return t.forEach((function(t){o.test(t)&&(n&&1!==i.compare(t)||(i=new p(n=t,r)))})),n},e.minVersion=function(t,e){t=new x(t,e);var r=new p("0.0.0");if(t.test(r))return r;if(r=new p("0.0.0-0"),t.test(r))return r;r=null;for(var n=0;n<t.set.length;++n){t.set[n].forEach((function(t){var e=new p(t.semver.version);switch(t.operator){case">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case"":case">=":r&&!m(r,e)||(r=e);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+t.operator)}}))}if(r&&t.test(r))return r;return null},e.validRange=function(t,e){try{return new x(t,e).range||"*"}catch(t){return null}},e.ltr=function(t,e,r){return P(t,e,"<",r)},e.gtr=function(t,e,r){return P(t,e,">",r)},e.outside=P,e.prerelease=function(t,e){var r=h(t,e);return r&&r.prerelease.length?r.prerelease:null},e.intersects=function(t,e,r){return t=new x(t,r),e=new x(e,r),t.intersects(e)},e.coerce=function(t,e){if(t instanceof p)return t;"number"==typeof t&&(t=String(t));if("string"!=typeof t)return null;var r=null;if((e=e||{}).rtl){for(var n;(n=s[u.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),s[u.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;s[u.COERCERTL].lastIndex=-1}else r=t.match(s[u.COERCE]);if(null===r)return null;return h(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),e)}}).call(this,r(13))},function(t,e,r){"use strict";var n=r(2),i=n(r(27)),o=n(r(28)),s=n(r(3)),a=n(r(4)),u=n(r(39)),c=n(r(34)),l=n(r(40)),f=n(r(41)),h=r(5),p=r(35),d=r(45),y=function(t){function e(t,r){return(0,s.default)(this,e),(0,u.default)(this,(0,c.default)(e).call(this,t,r))}var r,n,y;return(0,f.default)(e,t),(0,a.default)(e,[{key:"getIssuance",value:(y=(0,o.default)(i.default.mark((function t(){var r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.default)((0,c.default)(e.prototype),"getIssuance",this).call(this);case 2:return r=t.sent,t.abrupt("return",new d(r));case 4:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"getTransaction",value:(n=(0,o.default)(i.default.mark((function t(r){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.default)((0,c.default)(e.prototype),"getTransaction",this).call(this,r);case 2:return n=t.sent,t.abrupt("return",new p(n));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getTransactions",value:(r=(0,o.default)(i.default.mark((function t(r){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.default)((0,c.default)(e.prototype),"getTransactions",this).call(this,r);case 2:return n=t.sent,t.abrupt("return",n.map((function(t){return new p(t)})));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"getType",value:function(){return h.FAT0}}]),e}(r(26).BaseTokenCLI);t.exports={CLI:y}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,r){var n=r(34);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}},function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(e,n)}t.exports=r},function(t,e,r){const{FactomdCli:n,WalletdCli:i}=r(77),o=r(144),s=r(146),a=r(42),u=r(43),c=r(147);t.exports={FactomCli:class{constructor(t){const e=t||{},r=e.factomd||e,o=e.walletd;this.factomd=new n(r),this.walletd=new i(o)}async commit(t,e,r={}){if(r.sign)return o.commit(this.factomd,t,e,r);{const n=await this.getPrivateAddress(e);return o.commit(this.factomd,t,n,r)}}async commitChain(t,e,r={}){if(r.sign)return o.commitChain(this.factomd,t,e,r);{const n=await this.getPrivateAddress(e);return o.commitChain(this.factomd,t,n,r)}}async commitEntry(t,e,r={}){if(r.sign)return o.commitEntry(this.factomd,t,e,r);{const n=await this.getPrivateAddress(e);return o.commitEntry(this.factomd,t,n,r)}}async reveal(t,e){return o.reveal(this.factomd,t,e)}async revealChain(t,e){return o.revealChain(this.factomd,t,e)}async revealEntry(t,e){return o.revealEntry(this.factomd,t,e)}async add(t,e,r={}){if(r.sign)return o.add(this.factomd,t,e,r);{const n=await this.getPrivateAddress(e);return o.add(this.factomd,t,n,r)}}async addChain(t,e,r={}){if(r.sign)return o.addChain(this.factomd,t,e,r);{const n=await this.getPrivateAddress(e);return o.addChain(this.factomd,t,n,r)}}async addChains(t,e,r={}){if(r.sign)return o.addChains(this.factomd,t,e,r);{const n=await this.getPrivateAddress(e);return o.addChains(this.factomd,t,n,r)}}async addEntry(t,e,r={}){if(r.sign)return o.addEntry(this.factomd,t,e,r);{const n=await this.getPrivateAddress(e);return o.addEntry(this.factomd,t,n,r)}}async addEntries(t,e,r={}){if(r.sign)return o.addEntries(this.factomd,t,e,r);{const n=await this.getPrivateAddress(e);return o.addEntries(this.factomd,t,n,r)}}async getPrivateAddress(t){return await c.getPrivateAddress(this.walletd,t)}getAllEntriesOfChain(t){return a.getAllEntriesOfChain(this.factomd,t)}getChainHead(t){return a.getChainHead(this.factomd,t)}getEntry(t){return a.getEntry(this.factomd,t)}getEntryWithBlockContext(t){return a.getEntryWithBlockContext(this.factomd,t)}getFirstEntry(t){return a.getFirstEntry(this.factomd,t)}getBalance(t){return a.getBalance(this.factomd,t)}chainExists(t){return a.chainExists(this.factomd,t)}getEntryCreditRate(){return a.getEntryCreditRate(this.factomd)}getTransaction(t){return a.getTransaction(this.factomd,t)}rewindChainWhile(t,e,r){return a.rewindChainWhile(this.factomd,t,e,r)}sendTransaction(t,e){return s.sendTransaction(this.factomd,t,e)}async createFactoidTransaction(t,e,r,n){const i=await this.getPrivateAddress(t);return s.createFactoidTransaction(this.factomd,i,e,r,n)}async createEntryCreditPurchaseTransaction(t,e,r,n){const i=await this.getPrivateAddress(t);return s.createEntryCreditPurchaseTransaction(this.factomd,i,e,r,n)}waitOnCommitAck(t,e){return u.waitOnCommitAck(this.factomd,t,e)}waitOnRevealAck(t,e,r){return u.waitOnRevealAck(this.factomd,t,e,r)}waitOnFactoidTransactionAck(t,e){return u.waitOnFactoidTransactionAck(this.factomd,t,e)}factomdApi(t,e,r){return this.factomd.call(t,e,r)}walletdApi(t,e,r){return this.walletd.call(t,e,r)}getHeights(){return a.getHeights(this.factomd)}getDirectoryBlockHead(){return a.getDirectoryBlockHead(this.factomd)}getDirectoryBlock(t){return a.getDirectoryBlock(this.factomd,t)}getAdminBlock(t){return a.getAdminBlock(this.factomd,t)}getEntryCreditBlock(t){return a.getEntryCreditBlock(this.factomd,t)}getFactoidBlock(t){return a.getFactoidBlock(this.factomd,t)}getEntryBlock(t){return a.getEntryBlock(this.factomd,t)}}}},function(t,e,r){t.exports=r(142)},function(t,e,r){var n=r(143);e.operation=function(t){var r=e.timeouts(t);return new n(r,{forever:t&&t.forever,unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},e.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<e.retries;i++)n.push(this.createTimeout(i,e));return t&&t.forever&&!n.length&&n.push(this.createTimeout(i,e)),n.sort((function(t,e){return t-e})),n},e.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,n=Math.round(r*e.minTimeout*Math.pow(e.factor,t));return n=Math.min(n,e.maxTimeout)},e.wrap=function(t,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],t)"function"==typeof t[i]&&n.push(i);for(var o=0;o<n.length;o++){var s=n[o],a=t[s];t[s]=function(n){var i=e.operation(r),o=Array.prototype.slice.call(arguments,1),s=o.pop();o.push((function(t){i.retry(t)||(t&&(arguments[0]=i.mainError()),s.apply(this,arguments))})),i.attempt((function(){n.apply(t,o)}))}.bind(t,a),t[s].options=r}}},function(t,e){function r(t,e){"boolean"==typeof e&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=(new Date).getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),r=this._timeouts.shift()}var n=this,i=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r);return this._options.unref&&i.unref(),!0},r.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},r.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},r.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],o=i.message,s=(t[o]||0)+1;t[o]=s,s>=r&&(e=i,r=s)}return e}},function(t,e,r){const n=r(22),{isIterable:i}=r(7),{chainExists:o}=r(42),{waitOnCommitAck:s,waitOnRevealAck:a}=r(43),{getPublicAddress:u}=r(6),{Chain:c,composeChainCommit:l,composeChainCommitDelegateSig:f,composeChainReveal:h}=r(44),{Entry:p,composeEntryCommit:d,composeEntryCommitDelegateSig:y,composeEntryReveal:g}=r(25);async function m(t,e,r,n){if(await o(t,e.id))throw new Error(`Chain ${e.idHex} already exists.`);let i;return b({factomd:t,commitApiCall:"commit-chain",commit:i="object"==typeof n&&"function"==typeof n.sign?await f(e,r,n.sign).then(t=>t.toString("hex")):l(e,r).toString("hex"),ackTimeout:_(n)})}async function v(t,e,r,n){if(!e.chainId.length)throw new Error("Entry should contain a chain id to be committed");let i;return b({factomd:t,commitApiCall:"commit-entry",commit:i="object"==typeof n&&"function"==typeof n.sign?await y(e,r,n.sign).then(t=>t.toString("hex")):d(e,r).toString("hex"),ackTimeout:_(n)})}function _(t){return"object"==typeof t?t.ackTimeout:"number"==typeof t?t:void 0}async function b({factomd:t,commit:e,commitApiCall:r,ackTimeout:n=60}){let i=!1;const o=await t.call(r,{message:e}).catch((function(t){if(-32011!==t.code)throw t;i=!0}));return o&&n>=0&&await s(t,o.txid,n),{txId:o?o.txid:void 0,repeatedCommit:i}}function w(t,e,r){return k(t,e,h,"reveal-chain",r)}function E(t,e,r){if(!e.chainId.length)throw new Error("Entry should contain a chain id to be revealed");return k(t,e,g,"reveal-entry",r)}async function k(t,e,r,n,i=60){const o=r(e).toString("hex"),s=await t.call(n,{entry:o});return i>=0&&await a(t,s.entryhash,s.chainid,i),{chainId:s.chainid,entryHash:s.entryhash}}function A(t,e,r,n){switch(e.constructor){case p:return x(t,e,r,n);case c:return S(t,e,r,n);default:throw new Error("Argument of `add` is not an instance of Chain or Entry")}}function S(t,e,r,n){return C(t,e,m,w,r,n)}async function x(t,e,r,n){if(!e.chainId.length)throw new Error("Entry should contain a chain id to be added to the blockchain");return C(t,e,v,E,r,n)}async function C(t,e,r,i,o,s={}){s.skipFundValidation||await T(t,o,e.ecCost());const a=s.commitTimeout||60,u=s.revealTimeout||60;let c,l;if(a<0){const f=await n.all([r(t,e,o,{ackTimeout:a,sign:s.sign}),i(t,e,u)]);c=f[0],l=f[1]}else c=await r(t,e,o,{ackTimeout:a,sign:s.sign}),l=await i(t,e,u);return Object.assign({},c,l)}async function I(t,e,r,i={}){if(!i.skipFundValidation){i.skipFundValidation=!0;const n=e.reduce((t,e)=>t+e.ecCost(),0);await T(t,r,n)}const o=i.chunkSize||i.concurrency||200;return n.map(e,e=>A(t,e,r,i),{concurrency:o})}async function T(t,e,r){const n=u(e),{balance:i}=await t.call("entry-credit-balance",{address:n});if(i<r)throw new Error(`${n} current balance (${i} EC) is not sufficient to pay the total cost of ${r} EC.`)}const R=I,O=I;t.exports={add:function(t,e,r,n){return i(e)?I(t,e,r,n):A(t,e,r,n)},addChain:S,addChains:O,addEntry:x,addEntries:R,commit:function(t,e,r,n){switch(e.constructor){case p:return v(t,e,r,n);case c:return m(t,e,r,n);default:throw new Error("Argument of `commit` is not an instance of Chain or Entry")}},commitEntry:v,commitChain:m,reveal:function(t,e,r){switch(e.constructor){case p:return E(t,e,r);case c:return w(t,e,r);default:throw new Error("Argument of `reveal` is not an instance of Chain or Entry")}},revealEntry:E,revealChain:w}},function(t,e,r){const{Transaction:n}=r(24),{keyToPublicEcAddress:i,rcdHashToPublicFctAddress:o}=r(6),{ADMIN_ID_TO_CODE:s,ADMIN_BLOCKS_CHAIN_ID:a,ENTRY_CREDIT_BLOCKS_CHAIN_ID:u,FACTOID_BLOCKS_CHAIN_ID:c}=r(18);function l(t){const e={adminId:t.adminidtype,adminCode:s.get(t.adminidtype)};let r={};switch(e.adminId){case 1:r.identityChainId=t.identityadminchainid,r.previousDirectoryBlockSignature={publicKey:t.prevdbsig.pub,signature:t.prevdbsig.sig};break;case 2:case 3:r.identityChainId=t.identitychainid,r.matryoshkaHash=t.mhash;break;case 4:r.amount=t.amount;break;case 5:case 6:case 7:r.identityChainId=t.identitychainid,r.directoryBlockHeight=t.dbheight;break;case 8:r.identityChainId=t.identitychainid,r.keyPriority=t.keypriority,r.publicKey=t.publickey,r.directoryBlockHeight=t.dbheight;break;case 9:r.identityChainId=t.identitychainid,r.keyPriority=t.keypriority,r.keyType=t.keytype,r.ecdsaPublicKey=t.ecdsapublickey;break;case 11:r.outputs=t.Outputs.map(t=>({address:t.useraddress,rcdHash:t.address,amount:t.amount}));break;case 12:r.descriptorHeight=t.descriptor_height,r.descriptorIndex=t.DescriptorIndex;break;case 13:r.identityChainId=t.IdentityChainID,r.rcdHash=t.FactoidAddress,r.factoidAddress=o(t.FactoidAddress);break;case 14:r.identityChainId=t.IdentityChainID,r.efficiency=t.Efficiency/100}return Object.assign(e,r)}t.exports={DirectoryBlock:class{constructor(t,e){let r=[];if(t.dblock){const e=t.dblock;this.keyMR=e.keymr,this.height=e.header.dbheight,this.previousBlockKeyMR=e.header.prevkeymr,this.timestamp=60*e.header.timestamp,r=e.dbentries,this.fullHash=e.dbhash,this.previousFullHash=e.header.prevfullhash,this.bodyKeyMR=e.header.bodymr}else this.keyMR=e,this.height=t.header.sequencenumber,this.previousBlockKeyMR=t.header.prevblockkeymr,this.timestamp=t.header.timestamp,r=t.entryblocklist;this.entryBlockRefs=[];for(const t of r)switch(t.chainid){case a:this.adminBlockRef=t.keymr;break;case u:this.entryCreditBlockRef=t.keymr;break;case c:this.factoidBlockRef=t.keymr;break;default:this.entryBlockRefs.push({chainId:t.chainid,keyMR:t.keymr})}Object.freeze(this)}},EntryBlock:class{constructor(t,e){this.keyMR=e;const r=t.header;this.directoryBlockHeight=r.dbheight,this.timestamp=r.timestamp,this.previousBlockKeyMR=r.prevkeymr,this.chainId=r.chainid,this.sequenceNumber=r.blocksequencenumber,this.entryRefs=t.entrylist.map(t=>({entryHash:t.entryhash,timestamp:t.timestamp})),Object.freeze(this)}},AdminBlock:class{constructor(t){const e=t.ablock;this.backReferenceHash=e.backreferencehash,this.lookupHash=e.lookuphash;const r=e.header;this.directoryBlockHeight=r.dbheight,this.previousBackReferenceHash=r.prevbackrefhash,this.headerExpansionSize=r.headerexpansionsize,this.headerExpansionArea=r.headerexpansionarea,this.bodySize=r.bodysize,this.entries=e.abentries.map(l),Object.freeze(this)}getEntriesOfTypes(...t){const e=new Set(t);return this.entries.filter(t=>e.has(t.adminId)||e.has(t.adminCode))}},FactoidBlock:class{constructor(t){const e=t.fblock;this.keyMR=e.keymr,this.bodyMR=e.bodymr,this.previousBlockKeyMR=e.prevkeymr,this.ledgerKeyMR=e.ledgerkeymr,this.previousLedgerKeyMR=e.prevledgerkeymr,this.entryCreditRate=e.exchrate,this.directoryBlockHeight=e.dbheight,this.transactions=e.transactions.map(t=>new n(t,{factoidBlockKeyMR:this.keyMR,directoryBlockHeight:this.directoryBlockHeight}))}getCoinbaseTransaction(){return this.transactions[0]}},EntryCreditBlock:class{constructor(t){const e=t.ecblock;this.headerHash=e.headerhash,this.fullHash=e.fullhash;const r=e.header;this.headerExpansionArea=r.headerexpansionarea,this.bodyHash=r.bodyhash,this.previousHeaderHash=r.prevheaderhash,this.previousFullHash=r.prevfullhash,this.directoryBlockHeight=r.dbheight,this.bodySize=r.bodysize,this.objectCount=r.objectcount,this.minuteIndexes=[0],this.commits=[];for(const t of e.body.entries)if(Object.prototype.hasOwnProperty.call(t,"number"))this.minuteIndexes.push(this.commits.length);else{if(Object.prototype.hasOwnProperty.call(t,"serverindexnumber"))continue;if(Object.prototype.hasOwnProperty.call(t,"numec"))continue;this.commits.push({version:t.version,millis:parseInt(t.millitime,16),entryHash:t.entryhash,credits:t.credits,ecPublicKey:i(t.ecpubkey),signature:t.sig})}Object.freeze(this)}getCommitsForMinute(t){if(t<1||t>=this.minuteIndexes.length)throw new RangeError(`Minute out of range [1, ${this.minuteIndexes.length-1}]`);return this.commits.slice(this.minuteIndexes[t-1],this.minuteIndexes[t])}}}},function(t,e,r){const n=r(22),{waitOnFactoidTransactionAck:i}=r(43),{isValidPublicFctAddress:o,isValidPublicEcAddress:s}=r(6),{Transaction:a}=r(24),{getEntryCreditRate:u}=r(42),c=10;function l(t,e,r,n,i){const o=a.builder().input(t,r).output(e,r).build().computeRequiredFees(n);let s=o;if(i&&i<o)throw new Error(`Cannot set fees to ${i} factoshis because the minimum required fees are ${o}`);return i&&(s=i),a.builder().input(t,r+s).output(e,r).build()}t.exports={sendTransaction:async function(t,e,r){const o=r||{},s=o.timeout||60,l=await async function(t,e,r){if(!(e instanceof a))throw new Error("Argument must be an instance of Transaction");if(!e.isSigned())throw new Error("Cannot submit an unsigned transaction");const i=await u(t),o=e.computeRequiredFees(i);if(o>e.feesPaid)throw new Error(`Insufficient fees for the transaction (paid: ${e.feesPaid}, minimum required: ${o}, current EC rate: ${i})`);if(!r&&o*c<e.feesPaid)throw new Error(`Transaction is overpaying required fees by more than 10 times (paid: ${e.feesPaid}, minimum required: ${o}, current EC rate: ${i})`);r||e.entryCreditOutputs.forEach((function(t){if(t.amount<i)throw new Error(`Entry Credit output to ${t.address} is not sufficient to get a minimum of 1 Entry Credit (${t.amount} < ${i}).`)}));return await n.each(e.inputs,e=>(async function(t,e,r){const{balance:n}=await t.call("factoid-balance",{address:e});if(n<r)throw new Error(`Address ${e} doesn't have sufficient funds (balance: ${n})`)})(t,e.address,e.amount)),t.call("factoid-submit",{transaction:e.marshalBinary().toString("hex")}).then(t=>t.txid)}(t,e,!!o.force);return s>=0&&await i(t,l,s),l},createFactoidTransaction:async function(t,e,r,n,i){if(!o(r))throw new Error(`Recipient address [${r}] is not a valid public Factoid address`);return l(e,r,n,await u(t),i)},createEntryCreditPurchaseTransaction:async function(t,e,r,n,i){if(!s(r))throw new Error(`Recipient address [${r}] is not a valid public Entry Credit address`);const o=await u(t);return l(e,r,n*o,o,i)}}},function(t,e,r){const{isValidAddress:n}=r(6),{PRIVATE_ADDRESS_VALID_PREFIXES:i}=r(18);t.exports={getPrivateAddress:async function(t,e){if(!n(e))throw new Error(`${e} is not a valid address`);return i.has(e.substring(0,2))?e:(await t.call("address",{address:e})).secret}}},function(t,e,r){const{EventEmitter:n}=r(38),i=r(22),{isValidPublicFctAddress:o}=r(6),{Transaction:s}=r(24),a={newDirectoryBlock:"newDirectoryBlock",newFactoidBlock:"newFactoidBlock",newAdminBlock:"newAdminBlock",newEntryCreditBlock:"newEntryCreditBlock",newChain:"newChain"};Object.freeze(a);t.exports={FactomEventEmitter:class extends n{constructor(t,e){super(),this._cli=t,this._lastBlockHeightProcessed=0,this.opts={interval:7500,...e},this._chainSubscriptions=new Set,this._factoidAddressSubscriptions=new Set,this.on("removeListener",t=>this._removeListener(t)),this.on("newListener",t=>this._newListener(t))}get chainSubscriptions(){return this._chainSubscriptions}get factoidAddressSubscriptions(){return this._factoidAddressSubscriptions}get isPolling(){return!!this._isPolling}async _newListener(t){"string"==typeof t&&(this._isBlockchainEvent(t)&&this._startPolling(),Object.values(a).includes(t)||(o(t)?this._factoidAddressSubscriptions.add(t):t.match(/\b[A-Fa-f0-9]{64}\b/)&&this._chainSubscriptions.add(t)))}async _removeListener(t){"string"==typeof t&&(this._chainSubscriptions.has(t)&&0===this.listenerCount(t)?this._chainSubscriptions.delete(t):this._factoidAddressSubscriptions.has(t)&&0===this.listenerCount(t)&&this._factoidAddressSubscriptions.delete(t),this.eventNames().some(this._isBlockchainEvent)||this._stopPolling())}_isBlockchainEvent(t){return Object.values(a).includes(t)||o(t)||t.match(/\b[A-Fa-f0-9]{64}\b/)}_startPolling(){this.isPolling||(this._poll(),this._isPolling=setInterval(()=>this._poll(),this.opts.interval))}_stopPolling(){this.isPolling&&(clearInterval(this._isPolling),this._isPolling=!1)}async _poll(){try{const t=await this._cli.getDirectoryBlockHead();t.height>this._lastBlockHeightProcessed&&(this._lastBlockHeightProcessed=t.height,this._handleDirectoryBlock(t))}catch(t){this.emit("error",t)}}_handleDirectoryBlock(t){this.emit(a.newDirectoryBlock,t),this.listenerCount(a.newAdminBlock)>0&&this._emitAdminBlock(t),this.listenerCount(a.newEntryCreditBlock)>0&&this._emitEntryCreditBlock(t),(this.listenerCount(a.newFactoidBlock)>0||this._factoidAddressSubscriptions.size>0)&&this._emitFactoidBlock(t),this.listenerCount(a.newChain)>0&&this._emitNewChains(t);const e=t.entryBlockRefs.filter(t=>this._chainSubscriptions.has(t.chainId));e.length>0&&this._emitEntryBlock(e)}async _emitFactoidBlock(t){try{const e=await this._cli.getFactoidBlock(t.factoidBlockRef);this.listenerCount(a.newFactoidBlock)>0&&this.emit(a.newFactoidBlock,e),this._factoidAddressSubscriptions.size>0&&this._emitFactoidTransaction(e,t)}catch(t){this.emit("error",t)}}async _emitAdminBlock(t){try{const e=await this._cli.getAdminBlock(t.adminBlockRef);this.emit(a.newAdminBlock,e)}catch(t){this.emit("error",t)}}async _emitEntryCreditBlock(t){try{const e=await this._cli.getEntryCreditBlock(t.entryCreditBlockRef);this.emit(a.newEntryCreditBlock,e)}catch(t){this.emit("error",t)}}async _emitNewChains(t){try{const e=async t=>{const e=await this._cli.getEntryBlock(t.keyMR);0===e.sequenceNumber&&this.emit(a.newChain,e)};await i.map(t.entryBlockRefs,e,{concurrency:10})}catch(t){this.emit("error",t)}}async _emitEntryBlock(t){await i.map(t,async t=>{try{const e=await this._cli.getEntryBlock(t.keyMR);this.emit(t.chainId,e)}catch(t){this.emit("error",t)}},{concurrency:10})}_emitFactoidTransaction(t,e){const r=this._factoidAddressSubscriptions;t.transactions.forEach(t=>{const n=new Set([...t.inputs,...t.factoidOutputs].filter(t=>r.has(t.address)).map(t=>t.address));if(n.size>0){const r=new s(s.builder(t),{factoidBlockKeyMR:e.factoidBlockRef,directoryBlockHeight:e.height,directoryBlockKeyMR:e.keyMR});n.forEach(t=>this.emit(t,r))}})}},FACTOM_EVENT:a}},function(t,e,r){"use strict";var n=r(2),i=n(r(27)),o=n(r(28)),s=n(r(3)),a=n(r(4)),u=n(r(39)),c=n(r(34)),l=n(r(40)),f=n(r(41)),h=r(5),p=r(6),d=r(71).extend(r(72)),y=r(36),g=r(46),m=r(26).BaseTokenCLI,v=d.object().keys({address:d.factom().factoidAddress("public").required(),page:d.number().integer().min(0),limit:d.number().integer().min(0),order:d.string().valid(["asc","desc"])}),_=d.object().keys({page:d.number().integer().min(0),limit:d.number().integer().min(0),order:d.string().valid(["asc","desc"])}),b=function(t){function e(t,r){return(0,s.default)(this,e),(0,u.default)(this,(0,c.default)(e).call(this,t,r))}var r,n,m;return(0,f.default)(e,t),(0,a.default)(e,[{key:"getIssuance",value:(m=(0,o.default)(i.default.mark((function t(){var r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.default)((0,c.default)(e.prototype),"getIssuance",this).call(this);case 2:return r=t.sent,t.abrupt("return",new g(r));case 4:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"getTransaction",value:(n=(0,o.default)(i.default.mark((function t(r){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.default)((0,c.default)(e.prototype),"getTransaction",this).call(this,r);case 2:return n=t.sent,t.abrupt("return",new y(n));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getTransactions",value:(r=(0,o.default)(i.default.mark((function t(r){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.default)((0,c.default)(e.prototype),"getTransactions",this).call(this,r);case 2:return n=t.sent,t.abrupt("return",n.map((function(t){return new y(t)})));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"getNFToken",value:function(t){return this._cli.call("get-nf-token",w(this,{nftokenid:t}))}},{key:"getNFBalance",value:function(t){var e=d.validate(t,v);if(e.error)throw new Error("Params validation error - "+e.error.details[0].message);if(!p.isValidPublicFctAddress(t.address))throw new Error("You must include a valid public Factoid address");return this._cli.call("get-nf-balance",w(this,t))}},{key:"getNFTokens",value:function(t){var e=d.validate(t,_);if(e.error)throw new Error("Params validation error - "+e.error.details[0].message);return this._cli.call("get-nf-tokens",w(this,t))}},{key:"getType",value:function(){return h.FAT1}}]),e}(m);function w(t,e){return Object.assign({chainid:t._tokenChainId},e)}t.exports={CLI:b}},function(t,e,r){"use strict";var n=r(2),i=n(r(27)),o=n(r(28)),s=n(r(3)),a=n(r(4)),u=n(r(39)),c=n(r(34)),l=n(r(40)),f=n(r(41)),h=r(5),p=r(37),d=r(84),y=function(t){function e(t,r){return(0,s.default)(this,e),(0,u.default)(this,(0,c.default)(e).call(this,t,r))}var r,n,y;return(0,f.default)(e,t),(0,a.default)(e,[{key:"getIssuance",value:(y=(0,o.default)(i.default.mark((function t(){var r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.default)((0,c.default)(e.prototype),"getIssuance",this).call(this);case 2:return r=t.sent,t.abrupt("return",new d(r));case 4:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"getTransaction",value:(n=(0,o.default)(i.default.mark((function t(r){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.default)((0,c.default)(e.prototype),"getTransaction",this).call(this,r);case 2:return n=t.sent,t.abrupt("return",new p(n));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getTransactions",value:(r=(0,o.default)(i.default.mark((function t(r){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.default)((0,c.default)(e.prototype),"getTransactions",this).call(this,r);case 2:return n=t.sent,t.abrupt("return",n.map((function(t){return new p(t)})));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"getType",value:function(){return h.FAT0}}]),e}(r(26).BaseTokenCLI);t.exports={CLI:y}},function(t,e,r){"use strict";var n=r(2),i=n(r(3)),o=n(r(4)),s=r(12),a=r(12),u=r(9),c=r(14)({strict:!0}),l=function(){function t(e,r,n){if((0,i.default)(this,t),!a.isValidIdentityChainId(r))throw new Error("You must include a valid issuer identity Root Chain Id to issue a FAT token");if(this._rootChainId=r,void 0===e||"string"!=typeof e)throw new Error("Token is a required string");if(this._tokenId=e,!s.isValidSk1(n))throw new Error("Supplied key is not a valid sk1 private key");this._sk1=n,this._type="FAT-0"}return(0,o.default)(t,[{key:"symbol",value:function(t){if(!t)throw new Error("Token symbol must be defined");if(!new RegExp("[A-Z ]+").test(t))throw new Error("Token symbol must only contain capital letters A-Z");if(0==t.length||t.length>4)throw new Error("Token symbol must be 1 - 4 characters");return this._symbol=t,this}},{key:"supply",value:function(t){if((t=new u(t)).isEqualTo(0)||t.isLessThan(-1))throw new Error("Supply must be equal to -1(infinite) or greater than 0");return this._supply=t,this}},{key:"precision",value:function(t){if(isNaN(t)||!Number.isInteger(t)||t<0||t>18)throw new Error("Precision must be an integer between 0 and 18");return this._precision=t,this}},{key:"metadata",value:function(t){try{c.stringify(t)}catch(t){throw new Error("Transaction metadata bust be a valid JSON object or primitive")}return this._metadata=t,this}},{key:"build",value:function(){return void 0===this._supply&&(this._supply=new u(-1)),new(r(84))(this)}}]),t}();t.exports=l}])}));